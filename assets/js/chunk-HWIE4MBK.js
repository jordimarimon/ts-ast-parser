import{c as d,d as f}from"./chunk-X5OQPEMW.js";var We=d(f(),1);function lt(t){let e=t.name;return!!e&&(We.default.isMemberName(e)||We.default.isComputedPropertyName(e))}var ut=d(f(),1);function C(t,e){let r=t;for(;r&&r.flags&ut.default.SymbolFlags.Alias;)r=e.getAliasedSymbol(r);return r}function A(t,e){let r=e.getSymbolAtLocation(t);return!r&&lt(t)&&(r=e.getSymbolAtLocation(t.name)),r}function P(t,e){let r;"kind"in t?r=C(A(t,e.checker),e.checker):r=t.aliasSymbol??t.getSymbol(),r||(r=t.symbol);let i=r?.getDeclarations()?.[0],o=i?.getSourceFile(),s=e.system.normalizePath(o?.fileName)??"";return{symbol:r,path:s,line:i?g(i):null}}function g(t){return t.getSourceFile().getLineAndCharacterOfPosition(t.getStart()).line+1}var dt=d(f(),1),Ue;(function(t){t[t.UNKNOWN=1e6]="UNKNOWN"})(Ue||(Ue={}));var J;(function(t){t[t.SEMANTIC=0]="SEMANTIC",t[t.COMMAND_LINE=1]="COMMAND_LINE",t[t.ARGUMENT=2]="ARGUMENT"})(J||(J={}));var pe=class{constructor(){this._diagnostics=[]}getAll(){return this._diagnostics}isEmpty(){return!this._diagnostics.length}add(e,r,i){let o;e===J.SEMANTIC&&i?o={kind:J.SEMANTIC,file:i.getSourceFile(),start:g(i),length:i.getWidth(),category:dt.default.DiagnosticCategory.Error,messageText:r,code:Ue.UNKNOWN}:o={kind:e,messageText:r},this._diagnostics.push(o)}addMany(e){this._diagnostics.push(...e.map(r=>({...r,kind:J.SEMANTIC})))}};var He=d(f(),1),me=()=>typeof He.default.canHaveDecorators=="function"&&typeof He.default.canHaveModifiers=="function";var $e=d(f(),1);function se(t){return me()?$e.default.canHaveModifiers(t)?$e.default.getModifiers(t)??[]:[]:Array.from(t.modifiers??[])}var Ge=d(f(),1);function ft(t){return se(t).some(e=>e.kind===Ge.default.SyntaxKind.ExportKeyword)}function ht(t){return se(t).some(e=>e.kind===Ge.default.SyntaxKind.DefaultKeyword)}var S;(function(t){t.Default="Default",t.Namespace="Namespace",t.Star="Star",t.Named="Named",t.Equals="Equals"})(S||(S={}));var p;(function(t){t.Module="Module",t.Import="Import",t.Declaration="Declaration",t.Export="Export",t.Other="Other"})(p||(p={}));var ae=class{constructor(e,r,i){this._declaration=null,this._node=e,this._declaration=i??null,this._context=r}getName(){return this._declaration?this._declaration.name?.getText()??"":this._node.name?.getText()??""}getOriginalName(){return this.getName()}getNodeType(){return p.Export}getContext(){return this._context}getKind(){return ht(this._node)?S.Default:S.Named}getTSNode(){return this._node}serialize(){return{name:this.getName(),kind:this.getKind()}}};var le=class{constructor(e,r){this._node=e,this._context=r}getName(){return this._node.expression.getText()??""}getOriginalName(){return this.getName()}getNodeType(){return p.Export}getContext(){return this._context}getKind(){return this._node.isExportEquals?S.Equals:S.Default}isTypeOnly(){return!1}getTSNode(){return this._node}serialize(){return{name:this.getName(),kind:this.getKind()}}};function n(t,e,r){t==null||r==null||(typeof r=="boolean"?r&&(t[e]=r):typeof r=="string"?r!==""&&(t[e]=r):Array.isArray(r)?r.length&&(t[e]=r):rr(r)?Object.keys(r).length&&(t[e]=r):t[e]=r)}function rr(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}var gt=d(f(),1),ue=class{constructor(e,r){this._node=e,this._context=r}getName(){return!this._node.exportClause||!gt.default.isNamespaceExport(this._node.exportClause)?"":this._node.exportClause.name?.escapedText??""}getOriginalName(){return this.getName()}getContext(){return this._context}getKind(){return S.Namespace}getNodeType(){return p.Export}getModule(){return this._node.moduleSpecifier?.getText()??""}getTSNode(){return this._node}isTypeOnly(){return this._node.isTypeOnly??!1}serialize(){let e={name:this.getName(),kind:this.getKind()};return n(e,"module",this.getModule()),n(e,"typeOnly",this.isTypeOnly()),e}};var de=class{constructor(e,r,i){this._node=e,this._element=r,this._context=i}getName(){return this._element.name?.escapedText??""}getOriginalName(){return this._element.propertyName?.escapedText||this.getName()}getKind(){return S.Named}getNodeType(){return p.Export}getContext(){return this._context}isTypeOnly(){return this._node.isTypeOnly??!1}getModule(){return this._node.moduleSpecifier?.getText()??""}getTSNode(){return this._node}isReexport(){return this.getOriginalName()!==this.getName()}serialize(){let e=this.getOriginalName(),r={name:this.getName(),kind:this.getKind()};return e!==r.name&&n(r,"originalName",this.getOriginalName()),n(r,"typeOnly",this.isTypeOnly()),n(r,"module",this.getModule()),r}};var fe=class{constructor(e,r){this._node=e,this._context=r}getName(){return"*"}getOriginalName(){return this.getName()}getKind(){return S.Star}getNodeType(){return p.Export}getContext(){return this._context}getModule(){return this._node.moduleSpecifier?.getText()??""}getTSNode(){return this._node}isTypeOnly(){return this._node.isTypeOnly??!1}serialize(){let e={name:this.getName(),kind:this.getKind()};return n(e,"module",this.getModule()),n(e,"typeOnly",this.isTypeOnly()),e}};var k=d(f(),1),yt={isNode:t=>ft(t),create:(t,e)=>{let r=[];if(k.default.isVariableStatement(t))for(let i of t.declarationList.declarations)r.push(new ae(t,e,i));return(k.default.isFunctionDeclaration(t)||k.default.isClassDeclaration(t)||k.default.isInterfaceDeclaration(t)||k.default.isEnumDeclaration(t)||k.default.isTypeAliasDeclaration(t))&&r.push(new ae(t,e)),r}},_t={isNode:t=>k.default.isExportAssignment(t),create:(t,e)=>[new le(t,e)]},xt={isNode:t=>k.default.isExportDeclaration(t),create:(t,e)=>{let r=t.exportClause&&k.default.isNamedExports(t.exportClause),i=t.exportClause&&k.default.isNamespaceExport(t.exportClause),o=t?.moduleSpecifier!==void 0,s=[];if(r)for(let a of t.exportClause.elements)s.push(new de(t,a,e));else i?s.push(new ue(t,e)):o&&s.push(new fe(t,e));return s}};var N;(function(t){t.Class="Class",t.Interface="Interface",t.Function="Function",t.Mixin="Mixin",t.Variable="Variable",t.Enum="Enum",t.TypeAlias="TypeAlias"})(N||(N={}));var Nt=t=>Array.isArray(t)&&t.length>0;var qe=d(f(),1);function G(t){return!!t.replace(/'/g,"")[0]?.match(/[@a-zA-Z\d]/g)}function L(t){return t.length<1e3&&(/.*node_modules\/.+/.test(t)||/^https?:\/\/.+/.test(t))}function ee(t,e){if(!t)return"";let o=C(A(t,e.checker),e.checker)?.declarations?.[0]?.getSourceFile().fileName??"";return e.system.normalizePath(o)}function te(t,e){let r=e.paths??{};for(let i in r){let o=new RegExp(i);if(t.length<1e3&&o.test(t))return!0}return!1}function Tt(t){return!!t?.importClause?.name}function Qe(t){let e=t?.importClause?.namedBindings;return!e||!qe.default.isNamedImports(e)?!1:Nt(e?.elements)}function bt(t){let e=t?.importClause?.namedBindings;return!e||!qe.default.isNamespaceImport(e)?!1:!!e?.name&&!Qe(t)}function St(t){return Object.prototype.hasOwnProperty.call(t,"importClause")&&t.importClause==null}var W;(function(t){t.public="public",t.private="private",t.protected="protected"})(W||(W={}));var u=d(f(),1);function he(t){let e=u.default.getCombinedModifierFlags(t);return z(e,u.default.ModifierFlags.Private)||t.name&&u.default.isPrivateIdentifier(t.name)?W.private:z(e,u.default.ModifierFlags.Protected)?W.protected:W.public}function ge(t,e){let r=e.getTypeAtLocation(t).getSymbol(),o=(r&&e.getDeclaredTypeOfSymbol(r))?.getProperties()??[];return Pt(t,o,e)}function Dt(t,e){let r=e.getTypeAtLocation(t).getSymbol(),i=r&&e.getTypeOfSymbolAtLocation(r,t),o=(i&&e.getPropertiesOfType(i))??[];return Pt(t,o,e)}function Pt(t,e,r){let i=[];for(let o of e){let s=o.getDeclarations()?.[0],a=s?.getSourceFile()?.fileName??"",m=r.getTypeOfSymbolAtLocation(o,t);if(z(o.flags,u.default.SymbolFlags.ModuleMember)||z(o.flags,u.default.SymbolFlags.Prototype)||L(a))continue;let c=ir(t,o,r);i.push({inherited:c,symbol:o,type:m,overrides:or(s)})}return i}function ir(t,e,r){let o=r.getTypeAtLocation(t)?.getBaseTypes()?.[0];if(!o)return!1;let s=o.getSymbol()?.getDeclarations()?.slice()||[],a=s.flatMap(m=>u.default.isClassDeclaration(m)?m.members.filter(u.default.isConstructorDeclaration):[]);return s.push(...a),s.some(m=>e.getDeclarations()?.some(c=>c.parent===m))}function Ot(t){return t?u.default.isMethodSignature(t)||u.default.isPropertySignature(t)||u.default.isPropertyDeclaration(t)||u.default.isMethodDeclaration(t):!1}function ye(t){return!t||!u.default.canHaveModifiers(t)||u.default.isVariableStatement(t)||u.default.isImportDeclaration(t)?!1:z(u.default.getCombinedModifierFlags(t),u.default.ModifierFlags.Readonly)}function or(t){return!t||!u.default.canHaveModifiers(t)||u.default.isVariableStatement(t)||u.default.isImportDeclaration(t)?!1:z(u.default.getCombinedModifierFlags(t),u.default.ModifierFlags.Override)}function ce(t){return!!t&&z(t.flags,u.default.SymbolFlags.Optional)}function re(t){return!t||!u.default.canHaveModifiers(t)||u.default.isVariableStatement(t)||u.default.isImportDeclaration(t)?!1:z(u.default.getCombinedModifierFlags(t),u.default.ModifierFlags.Static)}function ie(t){return!t||!u.default.canHaveModifiers(t)||u.default.isVariableStatement(t)||u.default.isImportDeclaration(t)?!1:z(u.default.getCombinedModifierFlags(t),u.default.ModifierFlags.Abstract)}function z(t,e){return(t&e)===e}var _e=d(f(),1);function At(t,e){let r=e.checker.getTypeAtLocation(t),i=e.checker.getBaseTypes(r);for(let o of i)if(Mt(o,e.checker))return!0;return!1}function Mt(t,e){return t.getSymbol()?.getName()==="HTMLElement"?!0:e.getBaseTypes(t).some(i=>Mt(i,e))}function xe(t,e){let r=t.heritageClauses??[],i=[];for(let o of r){let s=o.types??[];for(let a of s){let m=nr(a,e);m&&i.push(m)}}return i}function nr(t,e){let r=t.expression,i=t.typeArguments;if(!_e.default.isIdentifier(r))return null;let{path:o,symbol:s,line:a}=P(r,e),m=r.escapedText??"";i&&(m+=`<${Ne(i).join(", ")}>`);let c={},y={name:m},_=o&&L(o);return o&&!_&&a!=null&&(c.line=a,c.path=o),n(y,"source",c),n(y,"kind",sr(s)),y}function Ne(t){let e=[];for(let r of t){let i="";_e.default.isTypeReferenceNode(r)?(i=r.typeName.getText()??"",r.typeArguments&&(i+=`<${Ne(r.typeArguments).join(", ")}>`)):i+=r.getText(),e.push(i)}return e}function sr(t){return t?z(t.flags,_e.default.SymbolFlags.Class)?N.Class:N.Interface:null}var v=class{constructor(e,r){this._node=e,this._context=r}getContext(){return this._context}getNodeType(){return p.Declaration}getName(){return this._node.name.getText()??""}getTSNode(){return this._node}getLine(){return g(this._node)}getDefault(){return this._node.default?.getText()||""}getConstraint(){return this._node.constraint?Ne([this._node.constraint])[0]??"":""}hasDefault(){return!!this.getDefault()}serialize(){let e={name:this.getName()};return n(e,"default",this.getDefault()),n(e,"constraint",this.getConstraint()),e}};var Ze=d(f(),1);function wt(t){return!!(t&&Ze.default.isModuleDeclaration(t)&&t.body&&Ze.default.isModuleBlock(t.body))}function ar(t){let e=[t.name?.getText()??""],r=t;for(;wt(r.parent?.parent);)e.push(r.parent.parent.name?.getText()??""),r=r.parent.parent;return e.reverse().join(".")}function V(t){let e=t.parent?.parent;for(;e&&!wt(e);)e=e.parent;return e?ar(e):""}var Te=class{constructor(e){this._jsDocTagValue=e}getRawValue(){return this._jsDocTagValue}getDescription(){return typeof this._jsDocTagValue=="string"?this._jsDocTagValue:typeof this._jsDocTagValue=="boolean"?"":this._jsDocTagValue?.description??""}getName(){return typeof this._jsDocTagValue=="string"||typeof this._jsDocTagValue=="boolean"?"":this._jsDocTagValue?.name??""}getValue(){return typeof this._jsDocTagValue=="string"||typeof this._jsDocTagValue=="boolean"?this._jsDocTagValue:this._jsDocTagValue?.value}getType(){return typeof this._jsDocTagValue=="string"||typeof this._jsDocTagValue=="boolean"?"":this._jsDocTagValue.type??""}getDefault(){return typeof this._jsDocTagValue=="string"||typeof this._jsDocTagValue=="boolean"?"":this._jsDocTagValue?.default??""}isOptional(){return typeof this._jsDocTagValue=="string"||typeof this._jsDocTagValue=="boolean"?!1:!!this._jsDocTagValue?.optional}serialize(){return this._jsDocTagValue}};var O;(function(t){t.description="description",t.param="param",t.returns="returns",t.type="type",t.summary="summary",t.default="default",t.readonly="readonly",t.deprecated="deprecated",t.example="example",t.override="override",t.see="see",t.since="since",t.throws="throws",t.public="public",t.protected="protected",t.private="private",t.internal="internal",t.ignore="ignore",t.category="category",t.typedef="typedef",t.typeParam="typeParam",t.reflect="reflect",t.cssprop="cssprop",t.cssproperty="cssproperty",t.csspart="csspart",t.slot="slot",t.attr="attr",t.fires="fires",t.event="event",t.tag="tag",t.tagname="tagname"})(O||(O={}));var E;(function(t){t.start="/**",t.nostart="/***",t.delim="*",t.end="*/"})(E=E||(E={}));function Xe(t){return/^\s+$/.test(t)}function Ct(t){let e=t.match(/\r+$/);return e==null?["",t]:[t.slice(-e[0].length),t.slice(0,-e[0].length)]}function U(t){let e=t.match(/^\s+/);return e==null?["",t]:[t.slice(0,e[0].length),t.slice(e[0].length)]}function Et(t){return t.split(/\n/)}function jt(t={}){return Object.assign({tag:"",name:"",type:"",optional:!1,description:"",problems:[],source:[]},t)}function Ye(t={}){return Object.assign({start:"",delimiter:"",postDelimiter:"",tag:"",postTag:"",name:"",postName:"",type:"",postType:"",description:"",end:"",lineEnd:""},t)}var cr=/^@\S+/;function et({fence:t="```"}={}){let e=pr(t),r=(i,o)=>e(i)?!o:o;return function(o){let s=[[]],a=!1;for(let m of o)cr.test(m.tokens.description)&&!a?s.push([m]):s[s.length-1].push(m),a=r(m.tokens.description,a);return s}}function pr(t){return typeof t=="string"?e=>e.split(t).length%2===0:t}function tt({startLine:t=0,markers:e=E}={}){let r=null,i=t;return function(s){let a=s,m=Ye();if([m.lineEnd,a]=Ct(a),[m.start,a]=U(a),r===null&&a.startsWith(e.start)&&!a.startsWith(e.nostart)&&(r=[],m.delimiter=a.slice(0,e.start.length),a=a.slice(e.start.length),[m.postDelimiter,a]=U(a)),r===null)return i++,null;let c=a.trimRight().endsWith(e.end);if(m.delimiter===""&&a.startsWith(e.delim)&&!a.startsWith(e.end)&&(m.delimiter=e.delim,a=a.slice(e.delim.length),[m.postDelimiter,a]=U(a)),c){let y=a.trimRight();m.end=a.slice(y.length-e.end.length),a=y.slice(0,-e.end.length)}if(m.description=a,r.push({number:i,source:s,tokens:m}),i++,c){let y=r.slice();return r=null,y}return null}}function rt({tokenizers:t}){return function(r){var i;let o=jt({source:r});for(let s of t)if(o=s(o),!((i=o.problems[o.problems.length-1])===null||i===void 0)&&i.critical)break;return o}}function be(){return t=>{let{tokens:e}=t.source[0],r=e.description.match(/\s*(@(\S+))(\s*)/);return r===null?(t.problems.push({code:"spec:tag:prefix",message:'tag should start with "@" symbol',line:t.source[0].number,critical:!0}),t):(e.tag=r[1],e.postTag=r[3],e.description=e.description.slice(r[0].length),t.tag=r[2],t)}}function Se(t="compact"){let e=lr(t);return r=>{let i=0,o=[];for(let[m,{tokens:c}]of r.source.entries()){let y="";if(m===0&&c.description[0]!=="{")return r;for(let _ of c.description)if(_==="{"&&i++,_==="}"&&i--,y+=_,i===0)break;if(o.push([c,y]),i===0)break}if(i!==0)return r.problems.push({code:"spec:type:unpaired-curlies",message:"unpaired curlies",line:r.source[0].number,critical:!0}),r;let s=[],a=o[0][0].postDelimiter.length;for(let[m,[c,y]]of o.entries())c.type=y,m>0&&(c.type=c.postDelimiter.slice(a)+y,c.postDelimiter=c.postDelimiter.slice(0,a)),[c.postType,c.description]=U(c.description.slice(y.length)),s.push(c.type);return s[0]=s[0].slice(1),s[s.length-1]=s[s.length-1].slice(0,-1),r.type=e(s),r}}var mr=t=>t.trim();function lr(t){return t==="compact"?e=>e.map(mr).join(""):t==="preserve"?e=>e.join(`
`):t}var ur=t=>t&&t.startsWith('"')&&t.endsWith('"');function De(){let t=(e,{tokens:r},i)=>r.type===""?e:i;return e=>{let{tokens:r}=e.source[e.source.reduce(t,0)],i=r.description.trimLeft(),o=i.split('"');if(o.length>1&&o[0]===""&&o.length%2===1)return e.name=o[1],r.name=`"${o[1]}"`,[r.postName,r.description]=U(i.slice(r.name.length)),e;let s=0,a="",m=!1,c;for(let _ of i){if(s===0&&Xe(_))break;_==="["&&s++,_==="]"&&s--,a+=_}if(s!==0)return e.problems.push({code:"spec:name:unpaired-brackets",message:"unpaired brackets",line:e.source[0].number,critical:!0}),e;let y=a;if(a[0]==="["&&a[a.length-1]==="]"){m=!0,a=a.slice(1,-1);let _=a.split("=");if(a=_[0].trim(),_[1]!==void 0&&(c=_.slice(1).join("=").trim()),a==="")return e.problems.push({code:"spec:name:empty-name",message:"empty name",line:e.source[0].number,critical:!0}),e;if(c==="")return e.problems.push({code:"spec:name:empty-default",message:"empty default value",line:e.source[0].number,critical:!0}),e;if(!ur(c)&&/=(?!>)/.test(c))return e.problems.push({code:"spec:name:invalid-default",message:"invalid default value syntax",line:e.source[0].number,critical:!0}),e}return e.optional=m,e.name=a,r.name=y,c!==void 0&&(e.default=c),[r.postName,r.description]=U(i.slice(r.name.length)),e}}function Pe(t="compact",e=E){let r=it(t);return i=>(i.description=r(i.source,e),i)}function it(t){return t==="compact"?dr:t==="preserve"?gr:t}function dr(t,e=E){return t.map(({tokens:{description:r}})=>r.trim()).filter(r=>r!=="").join(" ")}var fr=(t,{tokens:e},r)=>e.type===""?t:r,hr=({tokens:t})=>(t.delimiter===""?t.start:t.postDelimiter.slice(1))+t.description;function gr(t,e=E){if(t.length===0)return"";t[0].tokens.description===""&&t[0].tokens.delimiter===e.start&&(t=t.slice(1));let r=t[t.length-1];return r!==void 0&&r.tokens.description===""&&r.tokens.end.endsWith(e.end)&&(t=t.slice(0,-1)),t=t.slice(t.reduce(fr,0)),t.map(hr).join(`
`)}function ot({startLine:t=0,fence:e="```",spacing:r="compact",markers:i=E,tokenizers:o=[be(),Se(r),De(),Pe(r)]}={}){if(t<0||t%1>0)throw new Error("Invalid startLine");let s=tt({startLine:t,markers:i}),a=et({fence:e}),m=rt({tokenizers:o}),c=it(r);return function(y){let _=[];for(let Yt of Et(y)){let Je=s(Yt);if(Je===null)continue;let pt=a(Je),mt=pt.slice(1).map(m);_.push({description:c(pt[0],i),tags:mt,source:Je,problems:mt.reduce((er,tr)=>er.concat(tr.problems),[])})}return _}}function yr(t){return t.start+t.delimiter+t.postDelimiter+t.tag+t.postTag+t.type+t.postType+t.name+t.postName+t.description+t.end+t.lineEnd}function nt(){return t=>t.source.map(({tokens:e})=>yr(e)).join(`
`)}var _r={line:0,start:0,delimiter:0,postDelimiter:0,tag:0,postTag:0,name:0,postName:0,type:0,postType:0,description:0,end:0,lineEnd:0};var _o=Object.keys(_r);function It(t,e={}){return ot(e)(t)}var Lo=nt();function kt(t){let e=[];for(let r of t.jsDoc??[])xr(r,e);return e}function xr(t,e){let r=It(t.getFullText(),{spacing:"preserve"})??[];for(let i of r){if(i.problems.length)continue;let o=zt(i.description??"");o!==""&&e.push({kind:O.description,value:o});for(let s of i.tags){let a=s.tag??"";e.push({kind:a,value:Nr(a,s)})}}}function Nr(t,e){let r={},i=zt(Tr(e.description??"")),o=e.default??"",s=e.name??"",a=e.type??"";o!==""&&(r.default=o),e.optional&&(r.optional=!0),a!==""&&(r.type=a),s!==""&&(r.name=s),i!==""&&(r.description=i);let m=Object.keys(r).length;if(m===1&&(r.description||r.name))return s||i;if(m===2&&r.description&&r.name){let c=e.source.find(_=>_.source.includes(t));if(!((c?.tokens.name??"")+(c?.tokens.description??"")).includes("-"))return[s,i].join(" ")}return r}function zt(t=""){return t.trim().replace(/^\s+|\s+$/g,"").trim()}function Tr(t=""){return t.startsWith("- ")?t.slice(2):t}var h=class{constructor(e){this._jsDoc={},kt(e).forEach(r=>{this._jsDoc[r.kind]===void 0&&(this._jsDoc[r.kind]=[]),this._jsDoc[r.kind]?.push(new Te(r.value))})}hasTag(e){return this._jsDoc[e]!==void 0}getTag(e){return this._jsDoc[e]?.[0]}getAllTags(e){return this._jsDoc[e]??[]}isIgnored(){return this.hasTag(O.ignore)||this.hasTag(O.internal)||this.hasTag(O.private)}serialize(){return Object.entries(this._jsDoc).flatMap(([e,r])=>r.map(i=>({kind:e,value:i.serialize()})))}};var T=d(f(),1);function j(t,e){let r=t;if(r==null)return;if((T.default.isAsExpression(r)||T.default.isTypeAssertionExpression(r)||T.default.isParenthesizedExpression(r)||T.default.isComputedPropertyName(r))&&(r=r.expression),T.default.isPrefixUnaryExpression(r))return Pr(r,e);if(r==null)return;let i=r.getText()??"";if(T.default.isStringLiteralLike(r)||T.default.isArrayLiteralExpression(r)||T.default.isObjectLiteralExpression(r))return i;if(T.default.isNumericLiteral(r))return Sr(i);if(br(r))return i==="true";if(r.kind===T.default.SyntaxKind.NullKeyword)return null;if(r.kind!==T.default.SyntaxKind.UndefinedKeyword)return T.default.isIdentifier(r)||T.default.isPropertyAccessExpression(r)?Dr(r,e):i}function br(t){return t.kind===T.default.SyntaxKind.FalseKeyword||t.kind===T.default.SyntaxKind.TrueKeyword}function Sr(t){let e=parseFloat(t);return isNaN(e)?t:e}function Dr(t,e){let r=C(A(t,e),e),i=t.getText()??"",o=r?.declarations?.[0],s=o?.getSourceFile().fileName??"";return o==null||L(s)?i:T.default.isVariableDeclaration(o)||T.default.isPropertyDeclaration(o)?j(o.initializer,e):i}function Pr(t,e){let r=j(t.operand,e);if(typeof r!="number"&&typeof r!="string"&&typeof r!="boolean")return r;switch(t.operator){case T.default.SyntaxKind.MinusToken:return-r;case T.default.SyntaxKind.ExclamationToken:return!r;case T.default.SyntaxKind.PlusToken:return+r;default:return r}}var q=d(f(),1);function Ft(t){return t?.statements.find(q.default.isReturnStatement)}function Z(t){return t!=null&&q.default.isArrowFunction(t)}function X(t){return t!=null&&q.default.isFunctionExpression(t)}function Oe(t){if(t==null)return!1;if(q.default.isFunctionDeclaration(t))return!0;if(!q.default.isVariableStatement(t))return!1;let e=t.declarationList?.declarations?.[0];if(!e)return!1;let r=e.initializer;return!!r&&(q.default.isArrowFunction(r)||q.default.isFunctionExpression(r))}var H;(function(t){t.Property="Property",t.Method="Method",t.IndexSignature="IndexSignature"})(H||(H={}));var at=d(f(),1);function I(t){let e;return me()?e=at.default.canHaveDecorators(t)?at.default.getDecorators(t)??[]:[]:e=t.decorators??[],e}var $=d(f(),1),w=class{constructor(e,r){this._decorator=e,this._context=r,this._jsDoc=new h(e)}getName(){let e=this._decorator.expression;if($.default.isIdentifier(e))return e.escapedText??"";if($.default.isCallExpression(e)){let r=e.expression;if($.default.isIdentifier(r))return r.escapedText??""}return""}getTSNode(){return this._decorator}getContext(){return this._context}getNodeType(){return p.Other}getJSDoc(){return this._jsDoc}getArguments(){let e=this._decorator.expression;return $.default.isCallExpression(e)?e.arguments.map(r=>j(r,this._context.checker)):[]}getLine(){let e=this._decorator.expression;return $.default.isIdentifier(e)?P(e,this._context).line:$.default.isCallExpression(e)?P(e.expression,this._context).line:null}hasArguments(){return!!this.getArguments().length}getPath(){let e=this._decorator.expression;return $.default.isIdentifier(e)?P(e,this._context).path:$.default.isCallExpression(e)?P(e.expression,this._context).path:""}serialize(){let e=this.getPath(),r=this.getLine(),i={name:this.getName()};return r!=null?i.source={path:e,line:r}:i.source={path:e},n(i,"jsDoc",this.getJSDoc().serialize()),n(i,"arguments",this.getArguments()),i}};var oe=d(f(),1),Q=class{constructor(e,r,i){this._node=e,this._nodeContext=r,this._context=i;let[o,s]=this._getAccessors();o?this._jsDoc=new h(o):s?this._jsDoc=new h(s):this._jsDoc=new h(this._node)}getName(){let[e,r]=this._getAccessors();return e?e.name?.getText()??"":r?r.name?.getText()??"":oe.default.isIdentifier(this._node.name)?this._node.name.escapedText??"":this._node.name?.getText()??""}getKind(){return H.Property}getTSNode(){return this._node}getNodeType(){return p.Other}getContext(){return this._context}getLine(){let[e,r]=this._getAccessors();return e?g(e):r?g(r):P(this._node,this._context).line}getType(){let e=oe.default.getJSDocType(this._node);return e?new D(e,null,this._context):this._nodeContext?.type?D.fromType(this._nodeContext.type,this._context):this._node.type?new D(this._node.type,null,this._context):D.fromNode(this._node,this._context)}getDefault(){let e=this.getJSDoc().getTag(O.default)?.getValue()??"",[r,i]=this._getAccessors();if(e)return e;if(r)return j(Ft(r.body)?.expression,this._context.checker);if(!i)return j(this._node.initializer,this._context.checker)}getModifier(){return oe.default.isClassElement(this._node)?he(this._node):null}getJSDoc(){return this._jsDoc}getDecorators(){let[e,r]=this._getAccessors();return e?I(e).map(i=>new w(i,this._context)):r?I(r).map(i=>new w(i,this._context)):I(this._node).map(i=>new w(i,this._context))}isOptional(){if(this._nodeContext)return ce(this._nodeContext.symbol);let e=this._context.checker,r=C(A(this._node,e),e);return ce(r)}isStatic(){let[e,r]=this._getAccessors();return e?re(e):r?re(r):re(this._node)}isReadOnly(){let e=!!this.getJSDoc().getTag(O.readonly)?.getValue(),[r,i]=this._getAccessors();return e||!!r&&!i||ye(this._node)}isWriteOnly(){let[e,r]=this._getAccessors();return!e&&!!r}isAbstract(){return ie(this._node)}isInherited(){return!this._nodeContext?.overrides&&!!this._nodeContext?.inherited}overrides(){return!!this._nodeContext?.overrides}serialize(){let e={name:this.getName(),kind:this.getKind(),type:this.getType().serialize()};return n(e,"line",this.getLine()),n(e,"optional",this.isOptional()),n(e,"jsDoc",this.getJSDoc().serialize()),n(e,"decorators",this.getDecorators().map(r=>r.serialize())),n(e,"default",this.getDefault()),n(e,"static",this.isStatic()),n(e,"readOnly",this.isReadOnly()),n(e,"abstract",this.isAbstract()),n(e,"override",this.overrides()),n(e,"inherited",this.isInherited()),n(e,"writeOnly",this.isWriteOnly()),e}_getAccessors(){let e=this._nodeContext?.symbol?.getDeclarations()??[],r=e.find(oe.default.isGetAccessor),i=e.find(oe.default.isSetAccessor);return[r,i]}};var Ae=d(f(),1),ne=class{constructor(e,r,i){this._node=e,this._symbol=r,this._context=i,this._jsDoc=new h(this._node)}getName(){return this.isNamed()?"__namedParameter":this._symbol?this._symbol.getName()??"":this._node.name?.getText()??""}getNodeType(){return p.Other}getTSNode(){return this._node}getContext(){return this._context}getLine(){return g(this._node)}getType(){let e=Ae.default.getJSDocType(this._node),r=this._context.checker;if(e)return new D(e,null,this._context);if(!this._symbol)return D.fromNode(this._node,this._context);let i=r.getTypeOfSymbolAtLocation(this._symbol,this._node);return i?D.fromType(i,this._context):D.fromNode(this._node,this._context)}getDefault(){return j(this._node.initializer,this._context.checker)}getDecorators(){return I(this._node).map(e=>new w(e,this._context))}getNamedElements(){if(!this.isNamed())return[];let e=this._node.name?.elements??[],r=[];for(let i of e)r.push(this._createNamedParameterBinding(i));return r}getJSDoc(){return this._jsDoc}isNamed(){return Ae.default.isObjectBindingPattern(this._node.name)}isRest(){return!!(this._node.dotDotDotToken&&this._node.type?.kind===Ae.default.SyntaxKind.ArrayType)}isOptional(){return!!this._context.checker.isOptionalParameter(this._node)}serialize(){let e={name:this.getName(),type:this.getType().serialize(),line:this.getLine()};return n(e,"decorators",this.getDecorators().map(r=>r.serialize())),n(e,"jsDoc",this.getJSDoc().serialize()),n(e,"optional",this.isOptional()),n(e,"rest",this.isRest()),n(e,"named",this.isNamed()),n(e,"default",this.getDefault()),n(e,"elements",this.getNamedElements()),e}_createNamedParameterBinding(e){let r={name:e.name?.getText()||""};return n(r,"default",j(e?.initializer,this._context.checker)),r}};var Kt=d(f(),1),Y=class{constructor(e,r){this._node=e,this._context=r,this._jsDoc=new h(this._node.getDeclaration())}getContext(){return this._context}getNodeType(){return p.Other}getTSNode(){return this._node}getLine(){return g(this._node.getDeclaration())}getPath(){return this._node.getDeclaration()?.getSourceFile()?.fileName??""}getJSDoc(){return this._jsDoc}getReturnType(){let e=Kt.default.getJSDocReturnType(this._node.getDeclaration());if(e)return new D(e,null,this._context);let r=this._context.checker.getReturnTypeOfSignature(this._node);return D.fromType(r,this._context)}getTypeParameters(){return this._node.getDeclaration().typeParameters?.map(e=>new v(e,this._context))??[]}getParameters(){let e=this._node.parameters??[],r=this._node.getDeclaration().parameters??[],i=[];for(let o=0;o<r.length;o++){let s=r[o],a=new ne(s,e[o]??null,this._context);a.getJSDoc().isIgnored()||i.push(a)}return i}getParameterByName(e){return this.getParameters().find(r=>r.getName()===e)??null}serialize(){let e={return:{type:this.getReturnType().serialize()}};return n(e,"line",this.getLine()),n(e,"jsDoc",this.getJSDoc().serialize()),n(e,"typeParameters",this.getTypeParameters().map(r=>r.serialize())),n(e,"parameters",this.getParameters().map(r=>r.serialize())),e}};var x=d(f(),1),R=class{constructor(e,r,i){this._jsDoc=null,this._node=e,this._member=r,this._context=i,(x.default.isVariableStatement(e)||x.default.isPropertyDeclaration(e)||x.default.isPropertySignature(e))&&(this._jsDoc=new h(e))}getName(){return x.default.isFunctionDeclaration(this._node)||x.default.isMethodDeclaration(this._node)||x.default.isMethodSignature(this._node)?this._node.name?.getText()||"":x.default.isPropertyDeclaration(this._node)||x.default.isPropertySignature(this._node)?this._node.name?.getText()||"":x.default.isVariableStatement(this._node)&&this._node.declarationList.declarations.find(r=>Z(r.initializer)||X(r.initializer))?.name?.getText()||""}getNodeType(){return p.Declaration}getContext(){return this._context}getKind(){return Ot(this._node)?H.Method:N.Function}getTSNode(){return this._node}getLine(){return P(this._node,this._context).line}getNamespace(){return V(this._node)}getJSDoc(){return this._jsDoc}getDecorators(){return I(this._node).map(e=>new w(e,this._context))}getDecoratorWithName(e){return this.getDecorators().find(r=>r.getName()===e)??null}getSignatures(){let e=this._getFunctionNode(),r=this._context.checker,i=this._member?.type;if(!i){let o=e&&A(e,this._context.checker);i=e&&o&&r?.getTypeOfSymbolAtLocation(o,e.getSourceFile())}if(!i){let o=e&&r?.getSignatureFromDeclaration(e);return o?[new Y(o,this._context)]:[]}return i.getNonNullableType().getCallSignatures().map(o=>new Y(o,this._context))}getModifier(){return x.default.isClassElement(this._node)?he(this._node):null}isGenerator(){let e=this._getFunctionNode();return!!e&&!x.default.isMethodSignature(e)&&!x.default.isFunctionTypeNode(e)&&!!e.asteriskToken}isAsync(){let e=this._getFunctionNode();return e?se(e).some(r=>r.kind===x.default.SyntaxKind.AsyncKeyword):!1}isOptional(){return ce(this._member?.symbol)}isStatic(){return re(this._node)}isReadOnly(){return ye(this._node)}isAbstract(){return ie(this._node)}isInherited(){return!this._member?.overrides&&!!this._member?.inherited}isArrowFunctionOrFunctionExpression(){return x.default.isVariableStatement(this._node)?this._node.declarationList.declarations.some(e=>Z(e.initializer)||X(e.initializer)):!1}overrides(){return!!this._member?.overrides}serialize(){let e={name:this.getName(),kind:this.getKind(),signatures:this.getSignatures().map(r=>r.serialize())};return n(e,"namespace",this.getNamespace()),n(e,"jsDoc",this.getJSDoc()?.serialize()),n(e,"decorators",this.getDecorators().map(r=>r.serialize())),n(e,"async",this.isAsync()),n(e,"generator",this.isGenerator()),n(e,"static",this.isStatic()),n(e,"readOnly",this.isReadOnly()),n(e,"abstract",this.isAbstract()),n(e,"override",this.overrides()),n(e,"inherited",this.isInherited()),n(e,"optional",this.isOptional()),e}_getFunctionNode(){let e=this._node;return x.default.isVariableStatement(this._node)&&(e=this._node.declarationList.declarations.find(i=>Z(i.initializer)||X(i.initializer))?.initializer),x.default.isPropertySignature(this._node)&&(e=this._node.type?.kind===x.default.SyntaxKind.FunctionType?this._node.type:null),x.default.isPropertyDeclaration(this._node)&&(e=this._node.initializer),e==null||!x.default.isFunctionDeclaration(e)&&!x.default.isArrowFunction(e)&&!x.default.isFunctionExpression(e)&&!x.default.isMethodSignature(e)&&!x.default.isMethodDeclaration(e)&&!x.default.isFunctionTypeNode(e)?null:e}};var F;(function(t){t.Array="Array",t.Union="Union",t.Intersection="Intersection",t.Literal="Literal",t.Conditional="Conditional",t.Reference="Reference",t.Primitive="Primitive",t.Tuple="Tuple"})(F||(F={}));var l=d(f(),1),D=class t{constructor(e,r,i){this._node=e,this._type=r??(e?i.checker.getTypeFromTypeNode(e):null),this._context=i}static fromType(e,r){let i=r.checker.typeToTypeNode(e,void 0,l.default.NodeBuilderFlags.IgnoreErrors)??null;return new t(i,e,r)}static fromNode(e,r){let i=r.checker,o=l.default.getJSDocType(e);if(o)return new t(o,null,r);let s=i.getTypeAtLocation(e);return this._isTypeAssertion(e)||(s=i.getBaseTypeOfLiteralType(s)),t.fromType(s,r)}getContext(){return this._context}getTSNode(){return this._node}getNodeType(){return p.Other}getTupleMemberName(){return!this._node||!l.default.isNamedTupleMember(this._node)?"":this._node.name.escapedText??""}getText(){if(this.isReference()){let e=this._node;if(l.default.isIdentifier(e.typeName)){let r=e.typeName.escapedText??"",i=(e.typeArguments??[]).map(o=>new t(o,null,this._context).getText());return i.length>0?`${r}<${i.join(", ")}>`:r}}if(this.isTuple())return`[${this.getElements().map(r=>{let i=r.getTSNode();return i&&l.default.isNamedTupleMember(i)?`${r.getTupleMemberName()}: ${r.getText()}`:r.getText()}).join(", ")}]`;if(this.isPrimitive())return this._getPrimitiveTypeText();try{return this._node?.getText()??""}catch{return(this._type&&this._context.checker.typeToString(this._type))??""}}getPath(){let e="";if(this.isReference()&&l.default.isIdentifier(this._node.typeName)){let r=this._node.typeName;e=P(r,this._context).path}return!e&&this._type&&(e=P(this._type,this._context).path),!e&&this._node?P(this._node,this._context).path:e}getLine(){let e=null;if(this.isReference()&&l.default.isIdentifier(this._node.typeName)){let r=this._node.typeName;e=P(r,this._context).line}return e==null&&this._type&&(e=P(this._type,this._context).line),e==null&&this._node?P(this._node,this._context).line:e}isPrimitive(){let e=l.default.TypeFlags.String|l.default.TypeFlags.StringLiteral|l.default.TypeFlags.Number|l.default.TypeFlags.NumberLiteral|l.default.TypeFlags.Boolean|l.default.TypeFlags.BooleanLiteral|l.default.TypeFlags.BigInt|l.default.TypeFlags.BigIntLiteral|l.default.TypeFlags.Null|l.default.TypeFlags.Undefined|l.default.TypeFlags.ESSymbol,r=this._type&&(this._type.flags&e)!==0,i=!!this._node&&(this._node.kind===l.default.SyntaxKind.NumberKeyword||this._node.kind===l.default.SyntaxKind.NumericLiteral||this._node.kind===l.default.SyntaxKind.BooleanKeyword||this._node.kind===l.default.SyntaxKind.StringKeyword||this._node.kind===l.default.SyntaxKind.StringLiteral||this._node.kind===l.default.SyntaxKind.UndefinedKeyword||this._node.kind===l.default.SyntaxKind.NullKeyword||this._node.kind===l.default.SyntaxKind.SymbolKeyword||this._node.kind===l.default.SyntaxKind.BigIntKeyword||this._node.kind===l.default.SyntaxKind.VoidKeyword);return r||i}isLiteral(){return!!this._node&&l.default.isTypeLiteralNode(this._node)}isConditional(){return!!this._node&&l.default.isConditionalTypeNode(this._node)}isUnion(){return!!this._node&&l.default.isUnionTypeNode(this._node)}isIntersection(){return!!this._node&&l.default.isIntersectionTypeNode(this._node)}isArray(){return!!this._node&&l.default.isArrayTypeNode(this._node)}isReference(){return!!this._node&&l.default.isTypeReferenceNode(this._node)}isTuple(){return!!this._node&&l.default.isTupleTypeNode(this._node)}getProperties(){if(!this.isLiteral())return[];let e=this._context.checker,r=this._node,i=r.members??[],o=[];for(let s of i){if(!l.default.isPropertySignature(s))continue;let a=C(A(s,e),e),m=a&&e.getTypeOfSymbolAtLocation(a,r);o.push(new Q(s,{symbol:a,type:m},this._context))}return o}getMethods(){if(!this.isLiteral())return[];let e=this._context.checker,r=this._node,i=r.members??[],o=[];for(let s of i){if(!l.default.isMethodSignature(s))continue;let a=C(A(s,e),e),m=a&&this._context.checker.getTypeOfSymbolAtLocation(a,r);o.push(new R(s,{symbol:a,type:m},this._context))}return o}getElements(){return this.isUnion()||this.isIntersection()?this._node.types.map(r=>new t(r,null,this._context)):this.isTuple()?this._node.elements.map(r=>new t(r,null,this._context)):[]}getElementType(){return this.isArray()?new t(this._node.elementType,null,this._context):null}getReferenceType(){if(!this.isReference())return null;let e=this._context.checker,r=this._node.typeName,i=e.getTypeAtLocation(r),o=e.typeToTypeNode(i,void 0,l.default.NodeBuilderFlags.IgnoreErrors);if(o)return new t(o,i,this._context);let s=C(A(r,e),e);if(!s)return null;let a=s.getDeclarations()?.find(l.default.isTypeNode);return a?new t(a,i,this._context):new t(null,i,this._context)}getTypeArguments(){return this.isReference()?(this._node.typeArguments??[]).map(r=>new t(r,null,this._context)):[]}serialize(){let e={text:this.getText()},r={},i=this.getPath(),o=this.getLine();return!L(i)&&o!=null&&(r.line=o,r.path=i),this.isConditional()?e.kind=F.Conditional:this.isIntersection()?e.kind=F.Intersection:this.isUnion()?e.kind=F.Union:this.isArray()?e.kind=F.Array:this.isLiteral()?e.kind=F.Literal:this.isPrimitive()?e.kind=F.Primitive:this.isReference()?e.kind=F.Reference:this.isTuple()&&(e.kind=F.Tuple),n(e,"name",this.getTupleMemberName()),n(e,"elements",this.getElements().map(s=>s.serialize())),n(e,"properties",this.getProperties().map(s=>s.serialize())),n(e,"methods",this.getMethods().map(s=>s.serialize())),n(e,"elementType",this.getElementType()?.serialize()),this.isReference()&&n(e,"source",r),e}static _isTypeAssertion(e){return l.default.hasOnlyExpressionInitializer(e)&&!!e.initializer&&(l.default.isAsExpression(e.initializer)||l.default.isTypeAssertionExpression(e))}_getPrimitiveTypeText(){let e=(this._type&&this._context.checker.typeToString(this._type))??"";if(!this._node||e!==""&&e!=="any")return e;switch(this._node.kind){case l.default.SyntaxKind.NumberKeyword:return"number";case l.default.SyntaxKind.BooleanKeyword:return"boolean";case l.default.SyntaxKind.StringKeyword:return"string";case l.default.SyntaxKind.UndefinedKeyword:return"undefined";case l.default.SyntaxKind.NullKeyword:return"null";case l.default.SyntaxKind.SymbolKeyword:return"symbol";case l.default.SyntaxKind.BigIntKeyword:return"bigint";case l.default.SyntaxKind.VoidKeyword:return"void";default:return""}}};var Me=class{constructor(e,r){this._node=e,this._context=r,this._jsDoc=new h(this._node)}getContext(){return this._context}getTSNode(){return this._node}getNodeType(){return p.Declaration}getKind(){return N.TypeAlias}getName(){return this._node.name?.getText()??""}getLine(){return g(this._node)}getNamespace(){return V(this._node)}getJSDoc(){return this._jsDoc}getValue(){return new D(this._node.type,null,this._context)}getTypeParameters(){return this._node.typeParameters?.map(e=>new v(e,this._context))??[]}serialize(){let e={name:this.getName(),kind:this.getKind(),line:this.getLine(),value:this.getValue().serialize()};return n(e,"namespace",this.getNamespace()),n(e,"jsDoc",this.getJSDoc().serialize()),n(e,"typeParameters",this.getTypeParameters().map(r=>r.serialize())),e}};var Lt=d(f(),1),vt={isNode:t=>Lt.default.isTypeAliasDeclaration(t),create:(t,e)=>[new Me(t,e)]};var we=class{constructor(e,r,i){this._node=e,this._member=r,this._context=i,this._parameter=this._getParameter(),this._jsDoc=new h(this._node)}getName(){return this._parameter?.getName()??""}getNodeType(){return p.Other}getContext(){return this._context}getKind(){return H.IndexSignature}getTSNode(){return this._node}getJSDoc(){return this._jsDoc}getLine(){return g(this._node)}getType(){return{text:this.getJSDoc().getTag(O.type)?.getValue()||this._node.type?.getText()||""}}getIndexType(){return this._parameter?.getType()??null}isOptional(){return!!this._parameter?.isOptional()}serialize(){let e={name:this.getName(),line:this.getLine(),kind:H.IndexSignature,type:this.getType()};return n(e,"indexType",this.getIndexType()?.serialize()),n(e,"optional",this.isOptional()),n(e,"jsDoc",this.getJSDoc().serialize()),e}_getParameter(){let e=this._member.type?.getCallSignatures()?.[0],r=this._node.parameters??[],i=e?.parameters??[],o=r[0],s=i[0]??null;return o?new ne(o,s,this._context):null}};var B=d(f(),1),Ce=class{constructor(e,r){this._members=[],this._node=e,this._context=r,this._members=ge(this._node,this._context.checker),this._jsDoc=new h(this._node)}getName(){return this._node.name.getText()??""}getNodeType(){return p.Declaration}getKind(){return N.Interface}getContext(){return this._context}getTSNode(){return this._node}getLine(){return g(this._node)}getIndexSignature(){let e=this._context.checker,r=A(this._node,e)?.members?.get("__index"),i=r?.getDeclarations()?.[0];if(!i||!B.default.isIndexSignatureDeclaration(i))return null;let o={symbol:r,type:e.getTypeOfSymbolAtLocation(r,this._node)};return new we(i,o,this._context)}getProperties(){let e=[];for(let r of this._members){let{symbol:i}=r,o=i?.getDeclarations()?.[0];if(!o)continue;let s=B.default.isPropertySignature(o)&&o.type&&B.default.isFunctionTypeNode(o.type);(B.default.isPropertySignature(o)||B.default.isGetAccessor(o)||B.default.isSetAccessor(o))&&!s&&e.push(new Q(o,r,this._context))}return e}getPropertyWithName(e){return this.getProperties().find(r=>r.getName()===e)??null}getMethods(){let e=[];for(let r of this._members){let{symbol:i}=r,o=i?.getDeclarations()?.[0];if(!o)continue;let s=B.default.isPropertySignature(o)&&o.type&&B.default.isFunctionTypeNode(o.type);(B.default.isMethodSignature(o)||s)&&e.push(new R(o,r,this._context))}return e}getMethodWithName(e){return this.getMethods().find(r=>r.getName()===e)??null}getTypeParameters(){return this._node.typeParameters?.map(e=>new v(e,this._context))??[]}getNamespace(){return V(this._node)}getJSDoc(){return this._jsDoc}getHeritage(){return xe(this._node,this._context)}serialize(){let e={name:this.getName(),kind:this.getKind(),line:this.getLine()};return n(e,"heritage",this.getHeritage()),n(e,"typeParameters",this.getTypeParameters().map(r=>r.serialize())),n(e,"jsDoc",this.getJSDoc().serialize()),n(e,"namespace",this.getNamespace()),n(e,"indexSignature",this.getIndexSignature()?.serialize()),n(e,"properties",this.getProperties().map(r=>r.serialize())),n(e,"methods",this.getMethods().map(r=>r.serialize())),e}};var Vt=d(f(),1),Rt={isNode:t=>Vt.default.isInterfaceDeclaration(t),create:(t,e)=>[new Ce(t,e)]};var Bt={isNode:Oe,create:(t,e)=>[new R(t,null,e)]};var Ee=class{constructor(e,r,i){this._node=e,this._declaration=r,this._context=i,this._jsDoc=new h(this._node)}getContext(){return this._context}getName(){return this._declaration.name.getText()??""}getTSNode(){return this._declaration}getNodeType(){return p.Declaration}getKind(){return N.Variable}getDecorators(){return I(this._node).map(e=>new w(e,this._context))}getLine(){return g(this._node)}getType(){return D.fromNode(this._declaration,this._context)}getValue(){return this.getJSDoc().getTag(O.default)?.getValue()??j(this._declaration.initializer,this._context.checker)}getNamespace(){return V(this._node)}getJSDoc(){return this._jsDoc}serialize(){let e=this.getValue(),r={name:this.getName(),kind:this.getKind(),line:this.getLine(),type:this.getType().serialize()};return e!==""&&(r.default=e),n(r,"jsDoc",this.getJSDoc().serialize()),n(r,"decorators",this.getDecorators().map(i=>i.serialize())),n(r,"namespace",this.getNamespace()),r}};var je=d(f(),1);function Ie(t){if(je.default.isClassDeclaration(t))return!0;if(!je.default.isVariableStatement(t))return!1;let e=t.declarationList?.declarations?.[0];if(!e)return!1;let r=e.initializer;return!!r&&je.default.isClassExpression(r)}var Jt=d(f(),1),Wt={isNode:t=>Jt.default.isVariableStatement(t)&&!Oe(t)&&!Ie(t),create:(t,e)=>{let r=[];for(let i of t.declarationList.declarations)r.push(new Ee(t,i,e));return r}};var M;(function(t){t.Default="Default",t.Named="Named",t.Namespace="Namespace",t.SideEffect="SideEffect",t.Dynamic="Dynamic"})(M||(M={}));var ke=class{constructor(e,r){this._node=e,this._context=r}getTSNode(){return this._node}getNodeType(){return p.Import}getKind(){return M.SideEffect}getContext(){return this._context}getImportPath(){return this._node.moduleSpecifier?.text??""}isBareModuleSpecifier(){return G(this.getImportPath())}serialize(){let e={kind:M.SideEffect,importPath:this.getImportPath()};return n(e,"bareModuleSpecifier",this.isBareModuleSpecifier()),e}};var ze=class{constructor(e,r){this._node=e,this._context=r}getTSNode(){return this._node}getContext(){return this._context}getName(){return this._node.importClause?.namedBindings?.name?.escapedText??""}getNodeType(){return p.Import}getKind(){return M.Namespace}getImportPath(){return this._node.moduleSpecifier?.text??""}getOriginalPath(){let e=this._node.importClause?.namedBindings?.name,r=this.getImportPath();return te(r,this._context.system.getCommandLine().options)?ee(e,this._context):r}isTypeOnly(){return!!this._node?.importClause?.isTypeOnly}isBareModuleSpecifier(){return G(this.getImportPath())}serialize(){let e=this.getOriginalPath(),r={name:this.getName(),kind:this.getKind(),importPath:this.getImportPath()};return e!==r.importPath&&(r.originalPath=e),n(r,"typeOnly",this.isTypeOnly()),n(r,"bareModuleSpecifier",this.isBareModuleSpecifier()),r}};var Fe=class{constructor(e,r){this._node=e,this._context=r}getName(){return this._node.importClause?.name?.escapedText??""}getTSNode(){return this._node}getContext(){return this._context}getNodeType(){return p.Import}getKind(){return M.Default}getReferenceName(){return this.getName()}getImportPath(){return this._node.moduleSpecifier?.text??""}getOriginalPath(){let e=this._node.importClause?.name,r=this.getImportPath();return te(r,this._context.system.getCommandLine().options)?ee(e,this._context):r}isTypeOnly(){return!!this._node?.importClause?.isTypeOnly}isBareModuleSpecifier(){return G(this.getImportPath())}serialize(){let e=this.getOriginalPath(),r={name:this.getName(),kind:this.getKind(),importPath:this.getImportPath()};return e!==r.importPath&&(r.originalPath=e),n(r,"typeOnly",this.isTypeOnly()),n(r,"bareModuleSpecifier",this.isBareModuleSpecifier()),r}};var Ke=class{constructor(e,r,i){this._node=e,this._element=r,this._context=i}getTSNode(){return this._node}getContext(){return this._context}getName(){return this._element.name.escapedText??""}getReferenceName(){return this._element.propertyName?.escapedText??this.getName()}getNodeType(){return p.Import}getKind(){return M.Named}getImportPath(){return this._node.moduleSpecifier?.text??""}getOriginalPath(){let e=this.getImportPath();return te(e,this._context.system.getCommandLine().options)?ee(this._element.name,this._context):e}isTypeOnly(){return!!this._node?.importClause?.isTypeOnly}isBareModuleSpecifier(){return G(this.getImportPath())}serialize(){let e=this.getOriginalPath(),r=this.getReferenceName(),i={name:this.getName(),kind:this.getKind(),importPath:this.getImportPath()};return r!==i.name&&(i.referenceName=r),e!==i.importPath&&(i.originalPath=e),n(i,"typeOnly",this.isTypeOnly()),n(i,"bareModuleSpecifier",this.isBareModuleSpecifier()),i}};var Ut=d(f(),1),Le={isNode:t=>Ut.default.isImportDeclaration(t),create:(t,e)=>{let r=[];return Tt(t)&&r.push(new Fe(t,e)),St(t)&&r.push(new ke(t,e)),Qe(t)&&(t.importClause?.namedBindings?.elements??[]).forEach(o=>r.push(new Ke(t,o,e))),bt(t)&&r.push(new ze(t,e)),r}};var K=d(f(),1),ve=class{constructor(e,r){this._instanceMembers=[],this._staticMembers=[],this._node=e,this._context=r,this._jsDoc=new h(e);let i=this._getClassNode();i&&(this._instanceMembers=ge(i,this._context.checker),this._staticMembers=Dt(i,this._context.checker))}getName(){return K.default.isVariableStatement(this._node)?this._node.declarationList.declarations?.[0]?.name?.getText()??"":this._node.name?.getText()??""}getNodeType(){return p.Declaration}getKind(){return N.Class}getContext(){return this._context}getTSNode(){return this._node}getLine(){return g(this._node)}getNamespace(){return V(this._node)}getJSDoc(){return this._jsDoc}getDecorators(){return I(this._node).map(e=>new w(e,this._context))}getDecoratorWithName(e){return this.getDecorators().find(r=>r.getName()===e)??null}getConstructors(){let e=this._getClassNode();if(!e)return[];let r=this._context.checker,i=r.getTypeAtLocation(e).getSymbol(),s=(i&&r.getTypeOfSymbolAtLocation(i,e))?.getConstructSignatures()??[],a=[];for(let m of s){if(!m.getDeclaration())continue;let c=new Y(m,this._context),y=c.getPath();y&&!L(y)&&a.push(c)}return a}getProperties(){return this._getPropertyMembers(this._instanceMembers)}getStaticProperties(){return this._getPropertyMembers(this._staticMembers)}getPropertyWithName(e){return this.getProperties().find(r=>r.getName()===e)??null}getMethods(){return this._getMethodMembers(this._instanceMembers)}getStaticMethods(){return this._getMethodMembers(this._staticMembers)}getMethodWithName(e){return this.getMethods().find(r=>r.getName()===e)??null}getTypeParameters(){let e=this._getClassNode();return e?e.typeParameters?.map(r=>new v(r,this._context))??[]:[]}getHeritage(){let e=this._getClassNode();return e?xe(e,this._context):[]}isCustomElement(){let e=this._getClassNode();return e?At(e,this._context):!1}isAbstract(){let e=this._getClassNode();return e?ie(e):!1}serialize(){let e={name:this.getName(),kind:this.getKind(),line:this.getLine()};return n(e,"constructors",this.getConstructors().map(r=>r.serialize())),n(e,"decorators",this.getDecorators().map(r=>r.serialize())),n(e,"jsDoc",this.getJSDoc().serialize()),n(e,"typeParameters",this.getTypeParameters().map(r=>r.serialize())),n(e,"heritage",this.getHeritage()),n(e,"abstract",this.isAbstract()),n(e,"customElement",this.isCustomElement()),n(e,"namespace",this.getNamespace()),n(e,"properties",this.getProperties().map(r=>r.serialize())),n(e,"staticProperties",this.getStaticProperties().map(r=>r.serialize())),n(e,"methods",this.getMethods().map(r=>r.serialize())),n(e,"staticMethods",this.getStaticMethods().map(r=>r.serialize())),e}_getPropertyMembers(e){let r=[];for(let i of e){let{symbol:o}=i,s=o?.getDeclarations()?.[0];if(!s)continue;let a=K.default.isPropertyDeclaration(s);if(!(K.default.isMethodDeclaration(s)||a&&(Z(s.initializer)||X(s.initializer)))&&(a||K.default.isGetAccessor(s)||K.default.isSetAccessor(s))){let c=new Q(s,i,this._context);c.getModifier()===W.public&&r.push(c)}}return r}_getMethodMembers(e){let r=[];for(let i of e){let{symbol:o}=i,s=o?.getDeclarations()?.[0];if(!s)continue;let a=K.default.isPropertyDeclaration(s);if(K.default.isMethodDeclaration(s)||a&&(Z(s.initializer)||X(s.initializer))){let c=new R(s,i,this._context);c.getModifier()===W.public&&r.push(c)}}return r}_getClassNode(){if(K.default.isClassDeclaration(this._node))return this._node;if(!K.default.isVariableStatement(this._node))return null;let r=this._node.declarationList.declarations[0]?.initializer;return!r||!K.default.isClassExpression(r)?null:r}};var Ht={isNode:t=>Ie(t),create:(t,e)=>[new ve(t,e)]};var Ve=class{constructor(e,r,i){this._node=e,this._value=r,this._context=i,this._jsDoc=new h(e)}getNodeType(){return p.Other}getName(){return this._node.name.getText()??""}getValue(){return this._value}getContext(){return this._context}getLine(){return g(this._node)}getTSNode(){return this._node}getJSDoc(){return this._jsDoc}serialize(){let e={name:this.getName(),value:this.getValue()};return n(e,"jsDoc",this.getJSDoc().serialize()),e}};var Re=class{constructor(e,r){this._node=e,this._context=r,this._jsDoc=new h(this._node)}getNodeType(){return p.Declaration}getKind(){return N.Enum}getTSNode(){return this._node}getContext(){return this._context}getName(){return this._node.name?.getText()??""}getLine(){return g(this._node)}getNamespace(){return this._node.parent?.parent?.name?.getText()??""}getJSDoc(){return this._jsDoc}getMembers(){let e=0;return this._node.members.map(r=>{let i=r.initializer?.getText()??"";if(i!==""){let o=parseInt(i);isNaN(o)||(e=o+1,i=o)}else i=e++;return new Ve(r,i,this._context)})}serialize(){let e={kind:this.getKind(),name:this.getName(),line:this.getLine()};return n(e,"namespace",this.getNamespace()),n(e,"members",this.getMembers().map(r=>r.serialize())),n(e,"jsDoc",this.getJSDoc().serialize()),e}};var $t=d(f(),1),Gt={isNode:t=>$t.default.isEnumDeclaration(t),create:(t,e)=>[new Re(t,e)]};var qt=[Bt,Ht,Wt,Gt,vt,Rt],Qt=[yt,_t,xt];var b={ImportNode:t=>t.getNodeType()===p.Import,DefaultImportNode:t=>b.ImportNode(t)&&t.getKind()===M.Default,NamedImportNode:t=>b.ImportNode(t)&&t.getKind()===M.Named,NamespaceImportNode:t=>b.ImportNode(t)&&t.getKind()===M.Namespace,SideEffectImportNode:t=>b.ImportNode(t)&&t.getKind()===M.SideEffect,DeclarationNode:t=>t.getNodeType()===p.Declaration,EnumNode:t=>b.DeclarationNode(t)&&t.getKind()===N.Enum,VariableNode:t=>b.DeclarationNode(t)&&t.getKind()===N.Variable,TypeAliasNode:t=>b.DeclarationNode(t)&&t.getKind()===N.TypeAlias,FunctionNode:t=>b.DeclarationNode(t)&&t.getKind()===N.Function,ClassNode:t=>b.DeclarationNode(t)&&t.getKind()===N.Class,InterfaceNode:t=>b.DeclarationNode(t)&&t.getKind()===N.Interface,ExportNode:t=>t.getNodeType()===p.Export,DefaultExportNode:t=>b.ExportNode(t)&&t.getKind()===S.Default,NamedExportNode:t=>b.ExportNode(t)&&t.getKind()===S.Named,EqualExportNode:t=>b.ExportNode(t)&&t.getKind()===S.Equals,NamespaceExportNode:t=>b.ExportNode(t)&&t.getKind()===S.Namespace,ReExportNode:t=>b.ExportNode(t)&&t.getKind()===S.Star};var ct=d(f(),1),Be=class{constructor(e,r){this._imports=[],this._exports=[],this._declarations=[],this._node=e,this._context=r,this._visitNode(e),this._removeNonPublicDeclarations()}getTSNode(){return this._node}getSourcePath(){return this._context.system.normalizePath(this._node.fileName)}getOutputPath(){let e=this._node.fileName;if(e.endsWith("js"))return e;if(e.endsWith(".d.ts"))return"";let r=this._context.system.getAbsolutePath(e),i=ct.default.getOutputFileNames(this._context.system.getCommandLine(),r,!1).filter(o=>o.endsWith(".js"))[0];return this._context.system.normalizePath(i)}getNodeType(){return p.Module}getContext(){return this._context}getImports(){return this._imports}getExports(){return this._exports}getDeclarations(){return this._declarations}getDeclarationByKind(e){return this.getDeclarations().filter(r=>r.getKind()===e)}getDeclarationByName(e){return this.getDeclarations().find(r=>r.getName()===e)??null}getAllDeclarationsInNamespace(e){return this.getDeclarations().filter(r=>r.getNamespace()===e)}getDeclarationsByCategory(e){return this.getDeclarations().filter(r=>r.getJSDoc()?.getTag(O.category)?.getValue()===e)}serialize(){return{sourcePath:this.getSourcePath(),outputPath:this.getOutputPath(),imports:this.getImports().map(e=>e.serialize()),declarations:this.getDeclarations().map(e=>e.serialize()),exports:this.getExports().map(e=>e.serialize())}}_visitNode(e){let r=!1;Le.isNode(e)&&this._add(Le.create(e,this._context));for(let i of qt)i.isNode(e)&&(this._add(i.create(e,this._context)),r=!0);for(let i of Qt)i.isNode(e)&&this._add(i.create(e,this._context));r||ct.default.forEachChild(e,i=>this._visitNode(i))}_add(e){for(let r of e)b.ImportNode(r)&&this._imports.push(r),b.DeclarationNode(r)&&!this._hasDeclaration(r)&&this._declarations.push(r),b.ExportNode(r)&&!this._hasExport(r)&&this._exports.push(r)}_hasDeclaration(e){return this._declarations.some(r=>r.getName()===e.getName())}_hasExport(e){return b.ReExportNode(e)?this._exports.some(r=>b.ReExportNode(r)&&r.getModule()===e.getModule()):this._exports.some(r=>r.getName()===e.getName()&&r.getKind()===e.getKind())}_removeNonPublicDeclarations(){this._declarations=this._declarations.filter(e=>{let r=this._exports.findIndex(o=>o.getOriginalName()===e.getName()),i=!!e.getJSDoc()?.isIgnored();return r===-1?!1:(i&&this._exports.splice(r,1),!i)})}};var Zt=typeof document=="object"&&!!document;var Xt=d(f(),1);async function Jc(t,e={}){if(!t)return{result:null,errors:[{kind:J.ARGUMENT,messageText:"Source code is empty."}]};let r="/unknown.ts",i;Zt?i=await import("./browser-system-5QCWMVEE.js").then(_=>_.BrowserSystem.create({fsMap:new Map([[r,t]]),analyserOptions:e})):i=await import("./node-system-5SMSK6JE.js").then(_=>new _.NodeSystem({vfs:!0,fsMap:new Map([[r,t]]),analyserOptions:e}));let o=i.getCommandLine(),s=i.getCompilerHost(),a=Xt.default.createProgram({rootNames:o.fileNames,options:o.options,host:s}),m=a.getSourceFile(r),c=new pe;if(c.addMany(a.getSemanticDiagnostics()),!e.skipDiagnostics&&!c.isEmpty())return{result:null,errors:c.getAll()};if(o.errors.forEach(_=>{c.add(J.COMMAND_LINE,_.messageText)}),o.errors.length>0)return{result:null,errors:c.getAll()};if(!m)return c.add(J.COMMAND_LINE,"Unable to analyse source code."),{result:null,errors:c.getAll()};let y={program:a,system:i,options:e??null,diagnostics:c,checker:a.getTypeChecker()};return{result:new Be(m,y),errors:c.getAll()}}export{Jc as a};
