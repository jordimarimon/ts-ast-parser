import{a as f,b as zt}from"./chunk-NSZ5ZMGQ.js";import{c as g}from"./chunk-BLPUKQJE.js";var Kt={experimentalDecorators:!0,target:"es2020",module:"ES2020",lib:["es2020","DOM"],declaration:!0,skipLibCheck:!0,skipDefaultLibCheck:!0},Et={target:"es2020",module:"ES2020",lib:["es2020","DOM"],allowJs:!0,skipLibCheck:!0,skipDefaultLibCheck:!0,moduleResolution:"node",typeRoots:[]};var Z=g(f(),1);function fe(r,e){let{compilerOptions:t,jsProject:i,include:n,exclude:o}=e,s=["**node_modules**"];if(i)return Z.default.parseJsonConfigFileContent({compilerOptions:Et,include:n??["**/*.js"],exclude:o??s},r,r.getCurrentDirectory());if(t)return Z.default.parseJsonConfigFileContent({compilerOptions:{...t,declaration:!0},include:n??["**/*.ts"],exclude:o??s},r,r.getCurrentDirectory());let c=Pr(r,e);return c||Z.default.parseJsonConfigFileContent({compilerOptions:Kt,include:n??["**/*.ts"],exclude:o??s},r,r.getCurrentDirectory())}function Pr(r,e){var t,i;let{tsConfigFilePath:n,include:o,exclude:s}=e,c=bt=>r.fileExists(bt),l=bt=>r.readFile(bt),y=n?r.isAbsolute(n)?r.getDirectoryName(n):r.getDirectoryName(r.getAbsolutePath(n)):r.getCurrentDirectory(),T=n?r.getBaseName(n):"tsconfig.json",w=Z.default.findConfigFile(y,c,T),K=w&&Z.default.readConfigFile(w,l);return!K||typeof K!="object"?null:(s!==void 0&&Array.isArray(s)&&((t=K.config).exclude??(t.exclude=[]),K.config.exclude.push(...s)),o!==void 0&&Array.isArray(o)&&((i=K.config).include??(i.include=[]),K.config.include.push(...o)),Z.default.parseJsonConfigFileContent(K.config,r,r.getDirectoryName(w),{},w))}var ye=g(f(),1),Se=class{constructor(e){Object.defineProperty(this,"_diagnostics",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_formatDiagnosticHost",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._formatDiagnosticHost={getCanonicalFileName:t=>t,getCurrentDirectory:()=>e.getCurrentDirectory(),getNewLine:()=>e.newLine}}format(e){return ye.default.formatDiagnosticsWithColorAndContext(e,this._formatDiagnosticHost)}getAll(){return Array.from(ye.default.sortAndDeduplicateDiagnostics(this._diagnostics))}isEmpty(){return!this._diagnostics.length}flatten(e){return ye.default.flattenDiagnosticMessageText(e.messageText,`
`)}addOne(e,t){let i={file:e?.getSourceFile(),start:e?.getStart(),length:e?.getWidth(),category:ye.default.DiagnosticCategory.Error,messageText:t,code:1e6};this._diagnostics.push(i)}addMany(e){this._diagnostics.push(...e)}};var Pe=g(f(),1),ne=class{constructor(e,t){Object.defineProperty(this,"_system",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cwd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._system=e,this._options=t,this._cwd=e.getCurrentDirectory()}getSourceFile(e,t){let i=this.readFile(e,this._options.charset);return Pe.default.createSourceFile(e,i,t,!0)}getDefaultLibFileName(e){return zt?Pe.default.getDefaultLibFileName(e):Pe.default.getDefaultLibFilePath(e)}writeFile(e,t,i){this._system.writeFile(e,t,i)}getCurrentDirectory(){return this._cwd}useCaseSensitiveFileNames(){return this._system.useCaseSensitiveFileNames}getCanonicalFileName(e){return this._system.useCaseSensitiveFileNames?e:e.toLowerCase()}getNewLine(){return this._system.newLine}fileExists(e){return this._system.fileExists(e)}readFile(e,t){return this._system.readFile(e,t)??""}directoryExists(e){return this._system.directoryExists(e)}getDirectories(e){return this._system.getDirectories(e)}readDirectory(e,t,i,n,o){return this._system.readDirectory(e,t,i,n,o)}realpath(e){return this._system.realpath(e)}};var ke=g(f(),1),ve=class{constructor(e,t,i,n,o){Object.defineProperty(this,"_getProgram",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getCommandLine",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_diagnostics",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_system",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_reflectedNodesBySymbol",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this._system=e,this._getProgram=t,this._getCommandLine=i,this._diagnostics=n,this._options=o}getProgram(){return this._getProgram()}getCommandLine(){return this._getCommandLine()}getTypeChecker(){return this._getProgram().getTypeChecker()}getSystem(){return this._system}getDiagnostics(){return this._diagnostics}getOptions(){return this._options}registerReflectedNode(e,t){let i=this.getSymbol(e);if(!i)return t();let n=this._reflectedNodesBySymbol.get(i);return n||(n=t(),this._reflectedNodesBySymbol.set(i,n)),n}getSymbol(e){let t=this.getTypeChecker(),i=t.getSymbolAtLocation(e);for(!i&&this._isNamedNode(e)&&(i=t.getSymbolAtLocation(e.name));i&&i.flags&ke.default.SymbolFlags.Alias;)i=t.getAliasedSymbol(i);return i||(i=e.symbol),i??null}getLocation(e){let t;"kind"in e?t=this.getSymbol(e):t=e.aliasSymbol??e.getSymbol();let i=t?.getDeclarations()?.[0],n=i?.getSourceFile(),o=n?.fileName?this._system.normalizePath(this._system.realpath(n.fileName)):"",s=i?this.getLinePosition(i):null;return{symbol:t,path:o,line:s}}getLinePosition(e){return e.getSourceFile().getLineAndCharacterOfPosition(e.getStart()).line+1}_isNamedNode(e){let t=e.name;return!!t&&(ke.default.isMemberName(t)||ke.default.isComputedPropertyName(t))}};var _t=g(f(),1),we=()=>typeof _t.default.canHaveDecorators=="function"&&typeof _t.default.canHaveModifiers=="function";var xt=g(f(),1);function be(r){return we()?xt.default.canHaveModifiers(r)?xt.default.getModifiers(r)??[]:[]:Array.from(r.modifiers??[])}var Tt=g(f(),1);function Lt(r){return be(r).some(e=>e.kind===Tt.default.SyntaxKind.ExportKeyword)}function Ft(r){return be(r).some(e=>e.kind===Tt.default.SyntaxKind.DefaultKeyword)}var O;(function(r){r.Default="Default",r.Namespace="Namespace",r.Star="Star",r.Named="Named",r.Equals="Equals"})(O||(O={}));var _;(function(r){r.Import="Import",r.Declaration="Declaration",r.Export="Export"})(_||(_={}));var _e=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_declaration",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._declaration=i??null,this._context=t}getName(){return this._declaration?this._declaration.name.getText()??"":this._node.name?.getText()??""}getFullyQualifiedName(){let e=this._declaration??this._node,t=this._context.getSymbol(e);return t?this._context.getTypeChecker().getFullyQualifiedName(t).split(".").slice(1).join("."):this.getName()}getOriginalName(){return this.getName()}getNodeType(){return _.Export}getContext(){return this._context}getKind(){return Ft(this._node)?O.Default:O.Named}getTSNode(){return this._node}serialize(){return{name:this.getFullyQualifiedName(),kind:this.getKind()}}};var Oe=class{constructor(e,t){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._context=t}getName(){return this._node.expression.getText()??""}getOriginalName(){return this.getName()}getNodeType(){return _.Export}getContext(){return this._context}getKind(){return this._node.isExportEquals?O.Equals:O.Default}isTypeOnly(){return!1}getTSNode(){return this._node}serialize(){return{name:this.getName(),kind:this.getKind()}}};function a(r,e,t){r==null||t==null||(typeof t=="boolean"?t&&(r[e]=t):typeof t=="string"?t!==""&&(r[e]=t):Array.isArray(t)?t.length&&(r[e]=t):kr(t)?Object.keys(t).length&&(r[e]=t):r[e]=t)}function kr(r){return r!=null&&Object.prototype.toString.call(r)==="[object Object]"}var Mt=g(f(),1),De=class{constructor(e,t){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._context=t}getName(){return!this._node.exportClause||!Mt.default.isNamespaceExport(this._node.exportClause)?"":this._node.exportClause.name.escapedText??""}getOriginalName(){return this.getName()}getContext(){return this._context}getKind(){return O.Namespace}getNodeType(){return _.Export}getModule(){return this._node.moduleSpecifier?.getText()??""}getTSNode(){return this._node}isTypeOnly(){return this._node.isTypeOnly}serialize(){let e={name:this.getName(),kind:this.getKind()};return a(e,"module",this.getModule()),a(e,"typeOnly",this.isTypeOnly()),e}};var Ce=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._element=t,this._context=i}getName(){return this._element.name.escapedText??""}getOriginalName(){return this._element.propertyName?.escapedText??this.getName()}getKind(){return O.Named}getNodeType(){return _.Export}getContext(){return this._context}isTypeOnly(){return!!this._node.isTypeOnly}getModule(){return this._node.moduleSpecifier?.getText()??""}getTSNode(){return this._node}isReexport(){return this.getOriginalName()!==this.getName()}serialize(){let e=this.getOriginalName(),t={name:this.getName(),kind:this.getKind()};return e!==t.name&&a(t,"originalName",this.getOriginalName()),a(t,"typeOnly",this.isTypeOnly()),a(t,"module",this.getModule()),t}};var je=class{constructor(e,t){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._context=t}getName(){return"*"}getOriginalName(){return this.getName()}getKind(){return O.Star}getNodeType(){return _.Export}getContext(){return this._context}getModule(){return this._node.moduleSpecifier?.getText()??""}getTSNode(){return this._node}isTypeOnly(){return!!this._node.isTypeOnly}serialize(){let e={name:this.getName(),kind:this.getKind()};return a(e,"module",this.getModule()),a(e,"typeOnly",this.isTypeOnly()),e}};var M=g(f(),1),It={isNode:r=>Lt(r),create:(r,e)=>{let t=[];if(M.default.isVariableStatement(r))for(let i of r.declarationList.declarations)t.push(new _e(r,e,i));return(M.default.isFunctionDeclaration(r)||M.default.isClassDeclaration(r)||M.default.isInterfaceDeclaration(r)||M.default.isEnumDeclaration(r)||M.default.isTypeAliasDeclaration(r))&&t.push(new _e(r,e)),t}},Rt={isNode:r=>M.default.isExportAssignment(r),create:(r,e)=>[new Oe(r,e)]},Bt={isNode:r=>M.default.isExportDeclaration(r),create:(r,e)=>{let t=r.exportClause&&M.default.isNamedExports(r.exportClause),i=r.exportClause&&M.default.isNamespaceExport(r.exportClause),n=r.moduleSpecifier!==void 0,o=[];if(t)for(let s of r.exportClause.elements)o.push(new Ce(r,s,e));else i?o.push(new De(r,e)):n&&o.push(new je(r,e));return o}};var k;(function(r){r.Class="Class",r.Interface="Interface",r.Function="Function",r.Mixin="Mixin",r.Variable="Variable",r.Enum="Enum",r.TypeAlias="TypeAlias"})(k||(k={}));var p;(function(r){r.Array="Array",r.Union="Union",r.Intersection="Intersection",r.TypeLiteral="TypeLiteral",r.Conditional="Conditional",r.Reference="Reference",r.Intrinsic="Intrinsic",r.Tuple="Tuple",r.NamedTupleMember="NamedTupleMember",r.Operator="Operator",r.Unknown="Unknown",r.IndexAccess="IndexAccess",r.Literal="Literal",r.Function="Function",r.Query="Query",r.Infer="Infer",r.Mapped="Mapped",r.Optional="Optional",r.Predicate="Predicate",r.Rest="Rest",r.TemplateLiteral="TemplateLiteral"})(p||(p={}));var Ae=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.TemplateLiteral}getText(){return this._context.getTypeChecker().typeToString(this._type)}serialize(){return{text:this.getText(),kind:this.getKind()}}};var Nt=g(f(),1);function $(r){return!!r.replace(/'/g,"")[0]?.match(/[@a-zA-Z\d]/g)}function C(r){return r.length<1e3&&(/.*node_modules\/.+/.test(r)||/^https?:\/\/.+/.test(r))}function oe(r,e){if(!r)return"";let n=e.getSymbol(r)?.declarations?.[0]?.getSourceFile().fileName??"";return e.getSystem().normalizePath(n)}function se(r,e){let t=e.paths??{};for(let i in t){let n=new RegExp(i);if(r.length<1e3&&n.test(r))return!0}return!1}function Vt(r){return!!r.importClause?.name}function St(r){let e=r.importClause?.namedBindings;return!e||!Nt.default.isNamedImports(e)?!1:e.elements.length>0}function Jt(r){let e=r.importClause?.namedBindings;return!e||!Nt.default.isNamespaceImport(e)?!1:!!e.name&&!St(r)}function Ut(r){return Object.prototype.hasOwnProperty.call(r,"importClause")&&r.importClause==null}var qt=g(f(),1),ze=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_loc",{enumerable:!0,configurable:!0,writable:!0,value:null}),this._node=e,this._type=t,this._context=i,qt.default.isTypeReferenceNode(e.objectType)&&(this._loc=i.getLocation(e.objectType.typeName))}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.IndexAccess}getText(){return`${this.getObjectType().getText()}[${this.getIndexType().getText()}]`}getPath(){return this._loc?.path??""}getLine(){return this._loc?.line??null}getObjectType(){return d(this._node.objectType,this._context)}getIndexType(){return d(this._node.indexType,this._context)}serialize(){let e={text:this.getText(),kind:this.getKind()},t={},i=this.getPath(),n=this.getLine();return n!=null&&!C(i)&&(t.line=n,t.path=i),a(e,"source",t),e}};var Ke=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.NamedTupleMember}getText(){return`${this.getName()}: ${this.getType().getText()}`}getName(){return this._node.name.getText()??""}getType(){return d(this._node.type,this._context)}isOptional(){return!!this._node.questionToken}serialize(){let e={name:this.getName(),...this.getType().serialize()};return a(e,"optional",this.isOptional()),e}};var Ee=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Intersection}getText(){try{return this._node.getText()??""}catch{return this._context.getTypeChecker().typeToString(this._type)??""}}getElements(){return this._node.types.map(e=>d(e,this._context))}serialize(){return{text:this.getText(),kind:this.getKind(),elements:this.getElements().map(e=>e.serialize())}}};var Le=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Conditional}getText(){try{return this._node.getText()??""}catch{return this._context.getTypeChecker().typeToString(this._type)??""}}getCheckType(){return d(this._node.checkType,this._context)}getExtendsType(){return d(this._node.extendsType,this._context)}getTrueType(){return d(this._node.trueType,this._context)}getFalseType(){return d(this._node.falseType,this._context)}serialize(){return{text:this.getText(),kind:this.getKind()}}};var V=g(f(),1),A=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Intrinsic}getText(){switch(this._node.kind){case V.default.SyntaxKind.NumberKeyword:return"number";case V.default.SyntaxKind.BooleanKeyword:return"boolean";case V.default.SyntaxKind.StringKeyword:return"string";case V.default.SyntaxKind.UndefinedKeyword:return"undefined";case V.default.SyntaxKind.NullKeyword:return"null";case V.default.SyntaxKind.ObjectKeyword:return"object";case V.default.SyntaxKind.SymbolKeyword:return"symbol";case V.default.SyntaxKind.BigIntKeyword:return"bigint";case V.default.SyntaxKind.VoidKeyword:return"void";default:return this._context.getTypeChecker().typeToString(this._type)??""}}serialize(){return{text:this.getText(),kind:this.getKind()}}};var Pt=g(f(),1),Fe=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_loc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i,this._loc=i.getLocation(e.typeName)}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Reference}getText(){if(!(this._type.flags&Pt.default.TypeFlags.Any))return this._context.getTypeChecker().typeToString(this._type);let e=Pt.default.isIdentifier(this._node.typeName)?this._node.typeName.text:this._node.typeName.right.text,t=this.getTypeArguments().map(i=>i.getText());return t.length>0?`${e}<${t.join(", ")}>`:e}getPath(){return this._loc.path}getLine(){return this._loc.line}getTypeArguments(){return(this._node.typeArguments??[]).map(e=>d(e,this._context))}serialize(){let e={text:this.getText(),kind:this.getKind()},t={},i=this.getPath(),n=this.getLine();return!C(i)&&n!=null&&(t.line=n,t.path=i),a(e,"source",t),a(e,"typeArguments",this.getTypeArguments().map(o=>o.serialize())),e}};var Ht=g(f(),1),Me=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Predicate}getText(){let e=Ht.default.isThisTypeNode(this._node.parameterName)?"this":this._node.parameterName.getText(),t=this.asserts()?["asserts",e]:[e],i=this.getTargetType();return i&&t.push("is",i.getText()),t.join(" ")}getTargetType(){return this._node.type?d(this._node.type,this._context):null}asserts(){return!!this._node.assertsModifier}serialize(){return{text:this.getText(),kind:this.getKind()}}};var Ie=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Operator}getText(){try{return this._node.getText()??""}catch{return this._context.getTypeChecker().typeToString(this._type)??""}}getElementType(){return d(this._node.type,this._context)}serialize(){return{text:this.getText(),kind:this.getKind(),elementType:this.getElementType().serialize()}}};var v=g(f(),1);function z(r,e){let t=r;if(t==null)return;if((v.default.isAsExpression(t)||v.default.isTypeAssertionExpression(t)||v.default.isParenthesizedExpression(t)||v.default.isComputedPropertyName(t))&&(t=t.expression),v.default.isPrefixUnaryExpression(t))return Dr(t,e);if(t==null)return;let i=t.getText()??"";if(v.default.isStringLiteralLike(t)||v.default.isArrayLiteralExpression(t)||v.default.isObjectLiteralExpression(t))return i;if(v.default.isNumericLiteral(t))return wr(i);if(vr(t))return i==="true";if(t.kind===v.default.SyntaxKind.NullKeyword)return null;if(t.kind!==v.default.SyntaxKind.UndefinedKeyword)return v.default.isIdentifier(t)||v.default.isPropertyAccessExpression(t)?Or(t,e):i}function vr(r){return r.kind===v.default.SyntaxKind.FalseKeyword||r.kind===v.default.SyntaxKind.TrueKeyword}function wr(r){let e=parseFloat(r);return isNaN(e)?r:e}function Or(r,e){let t=e.getSymbol(r),i=r.getText()??"",n=t?.declarations?.[0],o=n?.getSourceFile().fileName??"",s=o?e.getSystem().realpath(o):"";return n==null||C(s)?i:v.default.isVariableDeclaration(n)||v.default.isPropertyDeclaration(n)?z(n.initializer,e):i}function Dr(r,e){let t=z(r.operand,e);if(typeof t!="number"&&typeof t!="string"&&typeof t!="boolean")return t;switch(r.operator){case v.default.SyntaxKind.MinusToken:return-t;case v.default.SyntaxKind.ExclamationToken:return!t;case v.default.SyntaxKind.PlusToken:return+t;default:return t}}var Re=class{constructor(e,t){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._context=t}getTSNode(){return this._node}getContext(){return this._context}getName(){return this._node.name.getText()||""}getDefault(){return z(this._node.initializer,this._context)}serialize(){let e={name:this.getName()};return a(e,"default",this.getDefault()),e}};var kt=g(f(),1);function E(r){let e;return we()?e=kt.default.canHaveDecorators(r)?kt.default.getDecorators(r)??[]:[]:e=r.decorators??[],e}function ee(r){let e=[r(0)],t=[];return{next(i){t.push(i);let n=e[e.length-1],o=n.next(i);if(o.kind==="backtrack"){if(!n.isValid())return e.pop(),{kind:"backtrack",tokens:t};let s=r(e.length),c=o.tokens,l,y=0;for(let T=0;T<c.length;T++){let w=c[T];if(l=s.next(w),y=T,l.kind==="error"||l.kind==="success")break;if(l.kind==="backtrack"){y-=l.tokens.length-1;break}}return l?.kind==="error"?{kind:"backtrack",tokens:o.tokens}:((s.isValid()||l?.kind==="in-progress")&&(t=c,e.push(s)),y===c.length-1?l:{kind:"backtrack",tokens:c.slice(y)})}if(o.kind==="error"){let s=e.length;return e.pop(),s>1?{kind:"backtrack",tokens:t}:o}return o.kind==="success"&&(e.push(r(e.length)),t=[]),{kind:"in-progress"}},isValid(){return e.length>0&&!!e[0]?.isValid()},serialize(){return e.flatMap(i=>i.serialize())}}}function S(r){let e=[],t=!0;return{next(i){e.push(i);let n=r.next(i);return n.kind==="error"?(t=!1,{kind:"backtrack",tokens:e}):n},isValid(){return t},serialize(){return t?r.serialize():[]}}}var u;(function(r){r[r.Newline=0]="Newline",r[r.Spaces=1]="Spaces",r[r.AsciiWord=2]="AsciiWord",r[r.Slash=3]="Slash",r[r.Star=4]="Star",r[r.Backslash=5]="Backslash",r[r.DoubleQuote=6]="DoubleQuote",r[r.Tilde=7]="Tilde",r[r.AtSign=8]="AtSign",r[r.LeftCurlyBracket=9]="LeftCurlyBracket",r[r.RightCurlyBracket=10]="RightCurlyBracket",r[r.Backtick=11]="Backtick",r[r.Period=12]="Period",r[r.Colon=13]="Colon",r[r.Pipe=14]="Pipe",r[r.PoundSymbol=15]="PoundSymbol",r[r.RightSquareBracket=16]="RightSquareBracket",r[r.LeftSquareBracket=17]="LeftSquareBracket",r[r.Equal=18]="Equal",r[r.Hyphen=19]="Hyphen",r[r.Other=20]="Other"})(u||(u={}));var xe=class{constructor(e,t,i,n,o,s){Object.defineProperty(this,"_kind",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_multiple",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_start",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_line",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_lexeme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_end",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._kind=e,this._lexeme=t,this._multiple=i,this._line=n,this._start=o,this._end=s}get kind(){return this._kind}get start(){return this._start}get end(){return this._end}get line(){return this._line}get length(){return this._end-this._start}get multiple(){return this._multiple}merge(e){this._end=e.end,this._lexeme=`${this._lexeme}${e.toString()}`}toString(){return this._lexeme}};function m(r,e){let t=null;return{next(i){let n=e?.length==null||i.length===e.length;return i.kind===r&&n?(t=i,{kind:"success"}):{kind:"error",error:{line:i.line,start:i.start,end:i.end,message:`Expected token of kind "${u[r]}" but instead found "${u[i.kind]}".`}}},isValid(){return!!t},serialize(){let i=t?.toString()??"";return e?.serializable&&i?[{kind:"text",text:i}]:[]}}}function Q(r){let e=r.reduce((i,n,o)=>(i[o]={valid:!0,finalized:!1,backtrackTokens:[]},i),{}),t=null;return{next(i){for(let s=0;s<r.length;s++){let c=e[s],l=r[s],y=t!=null?r[t]:null;(t!=null?e[t]:null)?.valid||(t=null),Cr(i,l,c),c.finalized&&c.valid&&(!y||y.priority<l.priority)&&(t=s)}let n=Object.values(e);if(n.every(s=>!s.valid))return{kind:"error",error:e[0]?.error};if(t==null||n.some(s=>s.valid&&!s.finalized))return{kind:"in-progress"};let o=e[t];return o.backtrackTokens.length>0?{kind:"backtrack",tokens:o.backtrackTokens}:{kind:"success"}},isValid(){return t!=null&&!!e[t]?.valid},serialize(){return t==null?[]:r[t].symbol.serialize()}}}function Cr(r,e,t){if(!t.valid)return;if(t.finalized){t.backtrackTokens.push(r);return}let i=e.symbol,n=i.next(r);if(n.kind!=="in-progress"){if(n.kind==="success"){t.valid=!0,t.finalized=!0;return}if(n.kind==="error"){t.valid=!1,t.error=n.error;return}t.finalized=!0,t.valid=i.isValid(),t.backtrackTokens=n.tokens}}function q(r){let e=[],t=!0;return{next(i){e.push(i);let n=0;for(let{kinds:s,canEscape:c}of r){if(e.length<s.length)continue;let l=c&&e[e.length-s.length-1]?.kind===u.Backslash;if(s.every((T,w)=>e[e.length-s.length+w]?.kind===T)&&!l){n=s.length;break}}if(!n)return{kind:"in-progress"};let o=e.slice(e.length-n);return e=e.slice(0,e.length-n),t=e.length>0,{kind:"backtrack",tokens:o}},isValid(){return t},serialize(){return t?[{kind:"text",text:e.map(i=>i.toString()).join("").trim()}]:[]}}}function Wt(){let r=Q([{symbol:jr(),priority:0},{symbol:Ar(),priority:0}]);return{next(e){return r.next(e)},isValid(){return r.isValid()},serialize(){return r.serialize()}}}function jr(){let r=[m(u.LeftSquareBracket),q([{kinds:[u.AtSign],canEscape:!0},{kinds:[u.Star,u.Slash]},{kinds:[u.LeftCurlyBracket],canEscape:!0},{kinds:[u.RightSquareBracket],canEscape:!0}]),m(u.RightSquareBracket),m(u.LeftCurlyBracket),m(u.AtSign),m(u.AsciiWord,{serializable:!0}),m(u.Spaces),q([{kinds:[u.AtSign],canEscape:!0},{kinds:[u.Star,u.Slash]},{kinds:[u.LeftSquareBracket],canEscape:!0},{kinds:[u.RightCurlyBracket],canEscape:!0}]),m(u.RightCurlyBracket)],e=0,t=!0;return{next(i){let o=r[e].next(i);if(o.kind==="backtrack"){if(e++,e===r.length-1){let l={kind:"error",error:{line:i.line,start:i.start,end:i.end,message:`Unexpected token found "${u[i.kind]}"`}};return o.tokens.length===1?this.next(o.tokens[0]):l}let s,c=o.tokens.length-1;for(let l=0;l<=c;l++){let y=o.tokens[l];if(s=this.next(y),s.kind==="error")return s;if(s.kind==="success"&&l<c)return{kind:"backtrack",tokens:o.tokens.slice(l+1)}}return s}return o.kind==="error"?(t=!1,o):(o.kind==="success"&&e++,e===r.length?(t=!0,{kind:"success"}):{kind:"in-progress"})},isValid(){return t},serialize(){if(!t)return[];let i=r[5].serialize()[0]?.text??"",n=r[7].serialize()[0]?.text??"",o=r[1].serialize()[0]?.text??"";return[{kind:i,target:n,targetText:o}]}}}function Ar(){let r=[m(u.LeftCurlyBracket),m(u.AtSign),m(u.AsciiWord,{serializable:!0}),q([{kinds:[u.AtSign],canEscape:!0},{kinds:[u.Pipe],canEscape:!0},{kinds:[u.Star,u.Slash]},{kinds:[u.RightCurlyBracket],canEscape:!0}]),S(m(u.Spaces)),S(m(u.Pipe)),S(m(u.Spaces)),q([{kinds:[u.AtSign],canEscape:!0},{kinds:[u.Pipe],canEscape:!0},{kinds:[u.Star,u.Slash]},{kinds:[u.RightCurlyBracket],canEscape:!0}]),m(u.RightCurlyBracket)],e=0,t=!0;return{next(i){let o=r[e].next(i);if(o.kind==="backtrack"){if(e++,e===r.length-1){let l={kind:"error",error:{line:i.line,start:i.start,end:i.end,message:`Unexpected token found "${u[i.kind]}"`}};return o.tokens.length===1?this.next(o.tokens[0]):l}if(e!==4)return this.next(o.tokens[0]);let s,c=o.tokens.length-1;for(let l=0;l<=c;l++){let y=o.tokens[l];if(s=this.next(y),s.kind==="error")return s;if(s.kind==="success"&&l<c)return{kind:"backtrack",tokens:o.tokens.slice(l+1)}}return s}return o.kind==="error"?(t=!1,o):(o.kind==="success"&&e++,e===r.length?(t=!0,{kind:"success"}):{kind:"in-progress"})},isValid(){return t},serialize(){if(!t)return[];let i=r[2].serialize()[0]?.text??"",n=r[3].serialize()[0]?.text??"",o=r[7].serialize()[0]?.text??"";return[{kind:i,target:n,targetText:o}]}}}function vt(r){let e=[],t=!1;return{next(i){return e.push(i),e.length<r.length?{kind:"in-progress"}:e.length===r.length&&e.every((o,s)=>r[s]===o.kind)?(t=!1,{kind:"error",error:{line:i.line,start:i.start,end:i.end,message:`Unexpected token of kind "${u[i.kind]}".`}}):(t=!0,{kind:"backtrack",tokens:e})},isValid(){return t},serialize(){return[]}}}function $t(){let r=ee(e=>wt({startPadding:!0,standaloneLine:e>0}));return{next(e){return r.next(e)},isValid(){return r.isValid()},serialize(){let e=Ot(r.serialize());return e.length?[{kind:"description",text:e}]:[]}}}function wt(r){let e=[r.startPadding?m(u.Spaces,{length:1}):S(m(u.Spaces,{length:1})),vt([u.Star,u.Slash]),r.standaloneLine?m(u.Star):S(m(u.Star)),S(m(u.Spaces)),vt([u.AtSign]),S(ee(()=>Q([{priority:0,symbol:q([{kinds:[u.LeftSquareBracket],canEscape:!0},{kinds:[u.LeftCurlyBracket],canEscape:!0},{kinds:[u.Newline]},{kinds:[u.Star,u.Slash]},{kinds:[u.AtSign],canEscape:!0}])},{priority:1,symbol:Wt()}]))),S(m(u.Newline,{serializable:!0}))],t=0,i=!1,n=[];return{next(o){n.push(o);let c=e[t].next(o);if(c.kind==="backtrack"){if(t++,t===e.length)return i=!0,c;if(t===e.length-1){let T=c.tokens[0],w=c.tokens.length>1;return T.kind===u.AtSign?(i=!1,{kind:"backtrack",tokens:n}):w?(i=!0,c):this.next(T)}if(t!==2)return this.next(c.tokens[0]);n=n.slice(0,n.length-c.tokens.length);let l,y=c.tokens.length-1;for(let T=0;T<=y;T++){let w=c.tokens[T];if(l=this.next(w),l.kind==="success"&&T<y)return{kind:"backtrack",tokens:c.tokens.slice(T+1)}}return l}return c.kind==="error"?(i=!1,{kind:"backtrack",tokens:n}):(c.kind==="success"&&t++,t===e.length?(i=!0,{kind:"success"}):{kind:"in-progress"})},isValid(){return i},serialize(){return e.flatMap(o=>o.serialize())}}}function Ot(r){let e=[];if(r.every(n=>n.kind==="text"&&(n.text===""||n.text===`
`)))return[];for(let n=0;n<r.length;n++){let o=r[n],s=e[e.length-1],c=n===r.length-1,l=typeof o.text=="string"&&o.text===`
`;if(!(l&&c)){if(o.kind==="text"&&s?.kind==="text"){let y=s.text??"",T=y.endsWith(`
`),w=l&&T?"":o.text??"";s.text=y+w;continue}e.push(o)}}if(e.length===1&&e[0]?.kind==="text")return(e[0]?.text??"").replace(/^\n+|\n+$/,"");let i=e[e.length-1];return i.kind==="text"&&(i.text=(i.text??"").replace(/\n+$/,"")),e}function Qt(){let r=[m(u.Spaces,{length:1}),m(u.Star),S(m(u.Spaces)),m(u.Newline)],e=[],t=0,i=!1;return{next(n){e.push(n);let s=r[t].next(n);if(s.kind==="backtrack"){t++;let c=s.tokens[0];return e.pop(),this.next(c)}return s.kind==="error"?(i=!1,{kind:"backtrack",tokens:e}):(s.kind==="success"&&t++,t===r.length?(i=!0,{kind:"success"}):{kind:"in-progress"})},isValid(){return i},serialize(){return[]}}}var zr=["access","author","default","defaultvalue","description","example","exception","file","fileoverview","kind","license","overview","return","returns","since","summary","throws","version","variation"];function Gt(){let r=[m(u.Spaces,{length:1}),S(m(u.Star)),S(m(u.Spaces)),m(u.AtSign),m(u.AsciiWord,{serializable:!0}),S(m(u.Spaces)),S(Kr()),S(m(u.Spaces)),S(Q([{symbol:m(u.AsciiWord,{serializable:!0}),priority:0},{symbol:Er(),priority:1}])),S(m(u.Spaces)),S(m(u.Hyphen)),S(m(u.Spaces)),S(ee(t=>wt({startPadding:t>0,standaloneLine:t>0})))],e=0;return{next(t){let n=r[e].next(t);if(n.kind==="backtrack"){if(e++,e===r.length)return n;if(e!==7&&e!==9)return this.next(n.tokens[0]);let o;for(let s=0;s<n.tokens.length;s++){let c=n.tokens[s];if(o=this.next(c),o.kind==="error")return n;if(o.kind==="backtrack")return{kind:"backtrack",tokens:o.tokens.concat(n.tokens.slice(s+1))}}return o}return n.kind==="error"?n:(n.kind==="success"&&e++,{kind:"in-progress"})},isValid(){return e>4},serialize(){if(e<=4)return[];let t={},i=r[4]?.serialize()[0]?.text??"",n=r[6]?.serialize()[0]?.text??"",o=r[8]?.serialize()[0],s=!!o?.optional,c=o?.default??"",l=(o?.name??"")||(o?.text??""),y=Ot(r[r.length-1]?.serialize()??[]);return zr.includes(i)&&(y=typeof y=="string"?[l,y].join(" ").trim():[{kind:"text",text:l},...y],l=""),Array.isArray(y)&&!y.length&&(y=""),t.kind=i,l&&(t.name=l),y&&(t.text=y),n&&(t.type=n),s&&(t.optional=!0),c&&(t.default=c),[t]}}}function Kr(){let r=[],e=0,t=!0;return{next(i){return r.push(i),i.kind===u.LeftCurlyBracket?(e++,{kind:"in-progress"}):e?i.kind===u.RightCurlyBracket?(e--,e>0?{kind:"in-progress"}:(t=!0,{kind:"success"})):{kind:"in-progress"}:(t=!1,{kind:"error",error:{line:i.line,start:i.start,end:i.end,message:`Expected a left curly bracket but found "${u[i.kind]}"`}})},isValid(){return t},serialize(){return t?[{kind:"text",text:r.slice(1,-1).map(i=>i.toString()).join("").trim()}]:[]}}}function Er(){let r=[m(u.LeftSquareBracket),m(u.AsciiWord,{serializable:!0}),Lr(),m(u.RightSquareBracket)],e=[],t=0,i=!0;return{next(n){e.push(n);let s=r[t].next(n);return s.kind==="backtrack"?(t++,i=!0,s.tokens.length>1?{kind:"backtrack",tokens:e}:this.next(s.tokens[0])):s.kind==="error"?(i=!1,{kind:"backtrack",tokens:e}):(s.kind==="success"&&t++,t===r.length?(i=!0,{kind:"success"}):{kind:"in-progress"})},isValid(){return i},serialize(){if(!i)return[];let n=r[1].serialize()[0]?.text??"",o=r[2].serialize()[0]?.text??"";return[{name:n,default:o,optional:!0}]}}}function Lr(){let r=[m(u.Equal),q([{kinds:[u.Newline]},{kinds:[u.Star,u.Slash]},{kinds:[u.AtSign],canEscape:!0},{kinds:[u.RightSquareBracket],canEscape:!0}])],e=[],t=0,i=!0;return{next(n){e.push(n);let s=r[t].next(n);return s.kind==="backtrack"?(t++,i=!0,s):s.kind==="error"?(i=!1,{kind:"backtrack",tokens:e}):(s.kind==="success"&&t++,t===r.length?(i=!0,{kind:"success"}):{kind:"in-progress"})},isValid(){return i},serialize(){return i?[{text:r[1].serialize()[0]?.text??""}]:[]}}}function Xt(){let r=[m(u.Slash),m(u.Star),m(u.Star),S(m(u.Newline)),S($t()),S(ee(()=>Q([{priority:0,symbol:Qt()},{priority:1,symbol:Gt()}]))),S(m(u.Spaces,{length:1})),m(u.Star),m(u.Slash)],e=0;return{next(t){let i=r[e];if(!i)return{kind:"error",error:{start:t.start,end:t.end,line:t.line,message:`Unexpected token found at the end of the comment: "${u[t.kind]}"`}};let n=i.next(t);if(n.kind==="error")return n;if(n.kind==="backtrack"){e++;let o=n.tokens;for(let s of o)if(n=this.next(s),n.kind==="error")return n}else n.kind==="success"&&e++;return e<r.length?{kind:"in-progress"}:{kind:"success"}},isValid(){return e===r.length},serialize(){let t=[];for(let i of r)t.push(...i.serialize());return t}}}var Fr=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","_"],Mr=[" ","	","\f"],Yt={47:{kind:u.Slash,multiple:!1},42:{kind:u.Star,multiple:!1},35:{kind:u.PoundSymbol,multiple:!1},34:{kind:u.DoubleQuote,multiple:!1},46:{kind:u.Period,multiple:!1},64:{kind:u.AtSign,multiple:!1},96:{kind:u.Backtick,multiple:!1},123:{kind:u.LeftCurlyBracket,multiple:!1},125:{kind:u.RightCurlyBracket,multiple:!1},124:{kind:u.Pipe,multiple:!1},126:{kind:u.Tilde,multiple:!1},58:{kind:u.Colon,multiple:!1},61:{kind:u.Equal,multiple:!1},91:{kind:u.LeftSquareBracket,multiple:!1},93:{kind:u.RightSquareBracket,multiple:!1},45:{kind:u.Hyphen,multiple:!1},92:{kind:u.Backslash,multiple:!1},10:{kind:u.Newline,multiple:!1},...Fr.reduce((r,e)=>(r[e.charCodeAt(0)]={kind:u.AsciiWord,multiple:!0},r),{}),...Mr.reduce((r,e)=>(r[e.charCodeAt(0)]={kind:u.Spaces,multiple:!0},r),{})};function*Zt(r){let e=r.trim().replace(/\r\n/g,`
`),t=e.length,i=0,n=0,o=0,s=[],c=null,l=null;for(;i<t;){let y=e.charCodeAt(i),T=e[i],w=Yt[y],K=i-o;if(w!==void 0?c=new xe(w.kind,T,w.multiple,n,K,K+1):c=new xe(u.Other,T,!0,n,K,K+1),i+=c.length,l&&l.multiple&&c.kind===l.kind?(l.merge(c),c=l):(l&&(yield l),s.push(c),l=c),c.kind===u.Newline&&(n++,o=i+1,s=[]),Ir(s)){yield l;break}}}function Ir(r){let e=r.length;return r[e-1]?.kind===u.Slash&&r[e-2]?.kind===u.Star}function er(r){let e=Xt(),t=null;for(let i of Zt(r))if(t=e.next(i),t.kind==="error")return{error:t.error,parts:[]};return t?.kind!=="success"?{parts:[],error:{line:0,start:0,end:r.length,message:"Unbalanced comment"}}:{error:null,parts:e.serialize()}}var Be=g(f(),1),N=class{constructor(e){Object.defineProperty(this,"_parts",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._parseComments(e)}hasTag(e){return this._parts.some(t=>t.kind===e)}getTag(e){return this._parts.find(t=>t.kind===e)}getAllTags(e){return this._parts.filter(t=>t.kind===e)}isIgnored(){return this._parts.some(e=>e.kind==="ignore"||e.kind==="internal"||e.kind==="private")}serialize(){return this._parts}_parseComments(e){let t=Be.default.isSourceFile(e),i,n;if(t?(n=Be.default.forEachChild(e,s=>s),i=e.text):(n=e,i=e.getSourceFile()?.text),!i||!n)return;let o=Be.default.getLeadingCommentRanges(i,n.pos)??[];if(o.length){t?o=o.slice(0,o.length>1?-1:1):o=[o[o.length-1]];for(let s of o){let c=i.substring(s.pos,s.end);c=c.split(/\r\n|\n/).map(T=>T.replace(/^\s+/," ")).join(`
`);let l;try{l=er(c)}catch{}if(!l||l.error)continue;let y=l.parts.some(T=>T.kind==="module"||T.kind==="fileoverview"||T.kind==="packageDocumentation");!t&&y||o.length===1&&t&&!y||(this._parts=this._parts.concat(l.parts))}}}};var Te=g(f(),1),j=class{constructor(e,t){Object.defineProperty(this,"_decorator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_jsDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._decorator=e,this._context=t,this._jsDoc=new N(e)}getName(){let e=this._decorator.expression;return Te.default.isCallExpression(e)&&(e=e.expression),e.getText()}getTSNode(){return this._decorator}getContext(){return this._context}getJSDoc(){return this._jsDoc}hasArguments(){return!!this.getArguments().length}getArguments(){let e=this._decorator.expression;return Te.default.isCallExpression(e)?e.arguments.map(t=>z(t,this._context)):[]}getLine(){let e=this._decorator.expression;return Te.default.isCallExpression(e)?this._context.getLocation(e.expression).line:this._context.getLocation(e).line}getPath(){let e=this._decorator.expression;return Te.default.isCallExpression(e)?this._context.getLocation(e.expression).path:this._context.getLocation(e).path}serialize(){let e=this.getPath(),t=this.getLine(),i={name:this.getName()};return t!=null&&(i.source={path:e,line:t}),a(i,"jsDoc",this.getJSDoc().serialize()),a(i,"arguments",this.getArguments()),i}};var Dt=g(f(),1),G=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_symbol",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_jsDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._symbol=t,this._context=i,this._jsDoc=new N(this._node)}getName(){return this.isNamed()?"__namedParameter":this._symbol?this._symbol.getName()??"":this._node.name.getText()??""}getTSNode(){return this._node}getContext(){return this._context}getLine(){return this._context.getLinePosition(this._node)}getType(){let e=this._context.getTypeChecker(),t=this._symbol?e.getTypeOfSymbolAtLocation(this._symbol,this._node):null;return t?d(t,this._context):ae(this._node,this._context)}getDefault(){return z(this._node.initializer,this._context)}getDecorators(){return E(this._node).map(e=>new j(e,this._context))}getNamedElements(){if(!this.isNamed())return[];let e=this._node.name.elements??[],t=[];for(let i of e)t.push(new Re(i,this._context));return t}getJSDoc(){return this._jsDoc}isNamed(){return Dt.default.isObjectBindingPattern(this._node.name)}isRest(){return!!(this._node.dotDotDotToken&&this._node.type?.kind===Dt.default.SyntaxKind.ArrayType)}isOptional(){return!!this._context.getTypeChecker().isOptionalParameter(this._node)}serialize(){let e={name:this.getName(),type:this.getType().serialize(),line:this.getLine()};return a(e,"decorators",this.getDecorators().map(t=>t.serialize())),a(e,"jsDoc",this.getJSDoc().serialize()),a(e,"optional",this.isOptional()),a(e,"rest",this.isRest()),a(e,"named",this.isNamed()),a(e,"default",this.getDefault()),a(e,"elements",this.getNamedElements().map(t=>t.serialize())),e}};var tr=g(f(),1),Ve=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Function}getText(){return this._context.getTypeChecker().typeToString(this._type)}getTypeParameters(){return this._node.typeParameters?.map(e=>new L(e,this._context))??[]}getParameters(){return(this._node.parameters??[]).map(e=>{let t=this._context.getSymbol(e),i=t?.getDeclarations()?.find(n=>tr.default.isParameter(n));return new G(i??e,t,this._context)})}getReturnType(){return d(this._node.type,this._context)}serialize(){let e={text:this.getText(),kind:this.getKind(),return:this.getReturnType().serialize()};return a(e,"typeParameters",this.getTypeParameters().map(t=>t.serialize())),a(e,"parameters",this.getParameters().map(t=>t.serialize())),e}};var Je=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Optional}getText(){return`${this.getElementType().getText()}?`}getElementType(){return d(this._node.type,this._context)}serialize(){return{text:this.getText(),kind:this.getKind(),elementType:this.getElementType().serialize()}}};var H;(function(r){r.public="public",r.private="private",r.protected="protected"})(H||(H={}));var x=g(f(),1);function Ue(r){let e=x.default.getCombinedModifierFlags(r);return I(e,x.default.ModifierFlags.Private)||r.name&&x.default.isPrivateIdentifier(r.name)?H.private:I(e,x.default.ModifierFlags.Protected)?H.protected:H.public}function qe(r,e){let t=e.getTypeChecker(),i=t.getTypeAtLocation(r).getSymbol(),o=(i&&t.getDeclaredTypeOfSymbol(i))?.getProperties()??[];return ir(r,o,e)}function rr(r,e){let t=e.getTypeChecker(),i=t.getTypeAtLocation(r).getSymbol(),n=i&&t.getTypeOfSymbolAtLocation(i,r),o=(n&&t.getPropertiesOfType(n))??[];return ir(r,o,e)}function ir(r,e,t){let i=[],n=t.getTypeChecker(),o=t.getSystem();for(let s of e){let c=s.getDeclarations()?.[0],l=c?.getSourceFile()?.fileName??"",y=l?o.realpath(l):"",T=n.getTypeOfSymbolAtLocation(s,r);if(I(s.flags,x.default.SymbolFlags.ModuleMember)||I(s.flags,x.default.SymbolFlags.Prototype)||C(y))continue;let w=Rr(r,s,n);i.push({inherited:w,symbol:s,type:T,overrides:Br(c)})}return i}function Rr(r,e,t){let n=t.getTypeAtLocation(r).getBaseTypes()?.[0];if(!n)return!1;let o=n.getSymbol()?.getDeclarations()?.slice()??[],s=o.flatMap(c=>x.default.isClassDeclaration(c)?c.members.filter(x.default.isConstructorDeclaration):[]);return o.push(...s),o.some(c=>e.getDeclarations()?.some(l=>l.parent===c))}function nr(r){return r?x.default.isMethodSignature(r)||x.default.isPropertySignature(r)||x.default.isPropertyDeclaration(r)||x.default.isMethodDeclaration(r):!1}function He(r){return!r||!x.default.canHaveModifiers(r)||x.default.isVariableStatement(r)||x.default.isImportDeclaration(r)?!1:I(x.default.getCombinedModifierFlags(r),x.default.ModifierFlags.Readonly)}function Br(r){return!r||!x.default.canHaveModifiers(r)||x.default.isVariableStatement(r)||x.default.isImportDeclaration(r)?!1:I(x.default.getCombinedModifierFlags(r),x.default.ModifierFlags.Override)}function Ne(r){return!!r&&I(r.flags,x.default.SymbolFlags.Optional)}function ue(r){return!r||!x.default.canHaveModifiers(r)||x.default.isVariableStatement(r)||x.default.isImportDeclaration(r)?!1:I(x.default.getCombinedModifierFlags(r),x.default.ModifierFlags.Static)}function ce(r){return!r||!x.default.canHaveModifiers(r)||x.default.isVariableStatement(r)||x.default.isImportDeclaration(r)?!1:I(x.default.getCombinedModifierFlags(r),x.default.ModifierFlags.Abstract)}function I(r,e){return(r&e)===e}var X=g(f(),1);function or(r){return r?.statements.find(X.default.isReturnStatement)}function te(r){return r!=null&&X.default.isArrowFunction(r)}function re(r){return r!=null&&X.default.isFunctionExpression(r)}function We(r){if(r==null)return!1;if(X.default.isFunctionDeclaration(r))return!0;if(!X.default.isVariableStatement(r))return!1;let e=r.declarationList.declarations[0];if(!e)return!1;let t=e.initializer;return!!t&&(X.default.isArrowFunction(t)||X.default.isFunctionExpression(t))}var W;(function(r){r.Property="Property",r.Method="Method",r.IndexSignature="IndexSignature"})(W||(W={}));var le=g(f(),1),Y=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nodeContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_jsDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._nodeContext=t,this._context=i;let[n,o]=this._getAccessors();n?this._jsDoc=new N(n):o?this._jsDoc=new N(o):this._jsDoc=new N(this._node)}getName(){let[e,t]=this._getAccessors();return e?e.name.getText()??"":t?t.name.getText()??"":le.default.isIdentifier(this._node.name)?this._node.name.escapedText??"":this._node.name.getText()??""}getKind(){return W.Property}getTSNode(){return this._node}getContext(){return this._context}getLine(){let[e,t]=this._getAccessors();return e?this._context.getLinePosition(e):t?this._context.getLinePosition(t):this._context.getLocation(this._node).line}getType(){let e=le.default.getJSDocType(this._node);return e?d(e,this._context):this._nodeContext?.type?d(this._nodeContext.type,this._context):this._node.type?d(this._node.type,this._context):ae(this._node,this._context)}getDefault(){let e=this.getJSDoc().getTag("default")?.text,[t,i]=this._getAccessors();if(e)return e;if(t)return z(or(t.body)?.expression,this._context);if(!i)return z(this._node.initializer,this._context)}getModifier(){return le.default.isClassElement(this._node)?Ue(this._node):null}getJSDoc(){return this._jsDoc}getDecorators(){let[e,t]=this._getAccessors();return e?E(e).map(i=>new j(i,this._context)):t?E(t).map(i=>new j(i,this._context)):E(this._node).map(i=>new j(i,this._context))}isOptional(){if(this._nodeContext)return Ne(this._nodeContext.symbol);let e=this._context.getSymbol(this._node);return Ne(e)}isStatic(){let[e,t]=this._getAccessors();return e?ue(e):t?ue(t):ue(this._node)}isReadOnly(){let e=!!this.getJSDoc().getTag("readonly"),[t,i]=this._getAccessors();return e||!!t&&!i||He(this._node)}isWriteOnly(){let[e,t]=this._getAccessors();return!e&&!!t}isAbstract(){return ce(this._node)}isInherited(){return!this._nodeContext?.overrides&&!!this._nodeContext?.inherited}overrides(){return!!this._nodeContext?.overrides}serialize(){let e={name:this.getName(),kind:this.getKind(),type:this.getType().serialize()};return a(e,"line",this.getLine()),a(e,"optional",this.isOptional()),a(e,"jsDoc",this.getJSDoc().serialize()),a(e,"decorators",this.getDecorators().map(t=>t.serialize())),a(e,"default",this.getDefault()),a(e,"static",this.isStatic()),a(e,"readOnly",this.isReadOnly()),a(e,"abstract",this.isAbstract()),a(e,"override",this.overrides()),a(e,"inherited",this.isInherited()),a(e,"writeOnly",this.isWriteOnly()),e}_getAccessors(){let e=this._nodeContext?.symbol?.getDeclarations()??[],t=e.find(le.default.isGetAccessor),i=e.find(le.default.isSetAccessor);return[t,i]}};var Ct=g(f(),1);function sr(r){return!!(r&&Ct.default.isModuleDeclaration(r)&&r.body&&Ct.default.isModuleBlock(r.body))}function Vr(r){let e=[r.name.getText()??""],t=r;for(;sr(t.parent?.parent);)e.push(t.parent?.parent?.name.getText()??""),t=t.parent?.parent;return e.reverse().join(".")}function F(r){let e=r.parent?.parent;for(;e&&!sr(e);)e=e.parent;return e?Vr(e):""}var ar=g(f(),1),ie=class{constructor(e,t){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_jsDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._context=t,this._jsDoc=new N(this._node.getDeclaration())}getContext(){return this._context}getTSNode(){return this._node}getLine(){return this._context.getLinePosition(this._node.getDeclaration())}getPath(){let e=this._node.getDeclaration().getSourceFile().fileName??"";return e&&this._context.getSystem().realpath(e)}getJSDoc(){return this._jsDoc}getReturnType(){let e=ar.default.getJSDocReturnType(this._node.getDeclaration());if(e)return d(e,this._context);let t=this._context.getTypeChecker().getReturnTypeOfSignature(this._node);return d(t,this._context)}getTypeParameters(){return this._node.getDeclaration().typeParameters?.map(e=>new L(e,this._context))??[]}getParameters(){let e=this._node.parameters??[],t=this._node.getDeclaration().parameters??[],i=[];for(let n=0;n<t.length;n++){let o=t[n],s=new G(o,e[n]??null,this._context);s.getJSDoc().isIgnored()||i.push(s)}return i}getParameterByName(e){return this.getParameters().find(t=>t.getName()===e)??null}serialize(){let e={return:{type:this.getReturnType().serialize()}};return a(e,"line",this.getLine()),a(e,"jsDoc",this.getJSDoc().serialize()),a(e,"typeParameters",this.getTypeParameters().map(t=>t.serialize())),a(e,"parameters",this.getParameters().map(t=>t.serialize())),e}};var P=g(f(),1),J=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_member",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_jsDoc",{enumerable:!0,configurable:!0,writable:!0,value:null}),this._node=e,this._member=t,this._context=i,(P.default.isVariableStatement(e)||P.default.isPropertyDeclaration(e)||P.default.isPropertySignature(e))&&(this._jsDoc=new N(e))}getName(){return P.default.isFunctionDeclaration(this._node)||P.default.isMethodDeclaration(this._node)||P.default.isMethodSignature(this._node)||P.default.isPropertyDeclaration(this._node)||P.default.isPropertySignature(this._node)?this._node.name?.getText()??"":P.default.isVariableStatement(this._node)?this._node.declarationList.declarations.find(t=>te(t.initializer)||re(t.initializer))?.name.getText()??"":""}getNodeType(){return _.Declaration}getContext(){return this._context}getKind(){return nr(this._node)?W.Method:k.Function}getTSNode(){return this._node}getLine(){return this._context.getLocation(this._node).line}getNamespace(){return F(this._node)}getJSDoc(){return this._jsDoc}getDecorators(){return E(this._node).map(e=>new j(e,this._context))}getDecoratorWithName(e){return this.getDecorators().find(t=>t.getName()===e)??null}getSignatures(){let e=this._getFunctionNode(),t=this._context.getTypeChecker(),i=this._member?.type;if(!i){let n=e&&this._context.getSymbol(e);i=e&&n&&t.getTypeOfSymbolAtLocation(n,e.getSourceFile())}if(!i){let n=e&&t.getSignatureFromDeclaration(e);return n?[new ie(n,this._context)]:[]}return i.getNonNullableType().getCallSignatures().map(n=>new ie(n,this._context))}getModifier(){return P.default.isClassElement(this._node)?Ue(this._node):null}isGenerator(){let e=this._getFunctionNode();return!!e&&!P.default.isMethodSignature(e)&&!P.default.isFunctionTypeNode(e)&&!!e.asteriskToken}isAsync(){let e=this._getFunctionNode();return e?be(e).some(t=>t.kind===P.default.SyntaxKind.AsyncKeyword):!1}isOptional(){return Ne(this._member?.symbol)}isStatic(){return ue(this._node)}isReadOnly(){return He(this._node)}isAbstract(){return ce(this._node)}isInherited(){return!this._member?.overrides&&!!this._member?.inherited}isArrowFunctionOrFunctionExpression(){return P.default.isVariableStatement(this._node)?this._node.declarationList.declarations.some(e=>te(e.initializer)||re(e.initializer)):!1}overrides(){return!!this._member?.overrides}serialize(){let e={name:this.getName(),kind:this.getKind(),signatures:this.getSignatures().map(t=>t.serialize())};return a(e,"namespace",this.getNamespace()),a(e,"jsDoc",this.getJSDoc()?.serialize()),a(e,"decorators",this.getDecorators().map(t=>t.serialize())),a(e,"async",this.isAsync()),a(e,"generator",this.isGenerator()),a(e,"static",this.isStatic()),a(e,"readOnly",this.isReadOnly()),a(e,"abstract",this.isAbstract()),a(e,"override",this.overrides()),a(e,"inherited",this.isInherited()),a(e,"optional",this.isOptional()),e}_getFunctionNode(){let e=this._node;return P.default.isVariableStatement(this._node)&&(e=this._node.declarationList.declarations.find(i=>te(i.initializer)||re(i.initializer))?.initializer),P.default.isPropertySignature(this._node)&&(e=this._node.type&&P.default.isFunctionTypeNode(this._node.type)?this._node.type:null),P.default.isPropertyDeclaration(this._node)&&(e=this._node.initializer),e==null||!P.default.isFunctionDeclaration(e)&&!P.default.isArrowFunction(e)&&!P.default.isFunctionExpression(e)&&!P.default.isMethodSignature(e)&&!P.default.isMethodDeclaration(e)&&!P.default.isFunctionTypeNode(e)?null:e}};var jt=g(f(),1),$e=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getText(){try{return this._node.getText()??""}catch{return this._context.getTypeChecker().typeToString(this._type)??""}}getKind(){return p.TypeLiteral}getProperties(){let e=this._context.getTypeChecker(),t=this._node.members??[],i=[];for(let n of t){if(!jt.default.isPropertySignature(n))continue;let o=this._context.getSymbol(n),s=o&&e.getTypeOfSymbolAtLocation(o,this._node);i.push(new Y(n,{symbol:o,type:s},this._context))}return i}getMethods(){let e=this._context.getTypeChecker(),t=this._node.members??[],i=[];for(let n of t){if(!jt.default.isMethodSignature(n))continue;let o=this._context.getSymbol(n),s=o&&e.getTypeOfSymbolAtLocation(o,this._node);i.push(new J(n,{symbol:o,type:s},this._context))}return i}serialize(){let e={text:this.getText(),kind:this.getKind()};return a(e,"properties",this.getProperties().map(t=>t.serialize())),a(e,"methods",this.getMethods().map(t=>t.serialize())),e}};var pe=g(f(),1),de=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Unknown}getText(){let e={[pe.default.SyntaxKind.AnyKeyword]:"any",[pe.default.SyntaxKind.NeverKeyword]:"never",[pe.default.SyntaxKind.ObjectKeyword]:"object",[pe.default.SyntaxKind.UnknownKeyword]:"unknown",[pe.default.SyntaxKind.IntrinsicKeyword]:"intrinsic"},t=this._node&&e[this._node.kind];return t||this._context.getTypeChecker().typeToString(this._type)}serialize(){return{text:this.getText(),kind:this.getKind()}}};var R=g(f(),1),Qe=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Literal}getText(){switch(this._node.literal.kind){case R.default.SyntaxKind.TrueKeyword:return"true";case R.default.SyntaxKind.FalseKeyword:return"false";case R.default.SyntaxKind.NullKeyword:return"null";case R.default.SyntaxKind.PrefixUnaryExpression:{let t=this._node.literal.operand;return this._getUnaryExpressionText(t)}case R.default.SyntaxKind.NumericLiteral:return this._node.literal.text;case R.default.SyntaxKind.StringLiteral:return`"${this._node.literal.text}"`;case R.default.SyntaxKind.BigIntLiteral:return this._node.literal.text;case R.default.SyntaxKind.NoSubstitutionTemplateLiteral:return this._node.literal.text;default:return""}}serialize(){return{text:this.getText(),kind:this.getKind()}}_getUnaryExpressionText(e){switch(e.kind){case R.default.SyntaxKind.NumericLiteral:return this._node.literal.getText();case R.default.SyntaxKind.BigIntLiteral:return this._node.literal.getText().replace("n","");default:return""}}};var Ge=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Mapped}getText(){return this._context.getTypeChecker().typeToString(this._type)}serialize(){return{text:this.getText(),kind:this.getKind()}}};var Xe=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_loc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i,this._loc=i.getLocation(e.exprName)}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Query}getPath(){return this._loc.path}getLine(){return this._loc.line}getText(){return this._context.getTypeChecker().typeToString(this._type)}getTypeArguments(){return(this._node.typeArguments??[]).map(e=>d(e,this._context))}serialize(){let e={text:this.getText(),kind:this.getKind()},t={},i=this.getPath(),n=this.getLine();return!C(i)&&n!=null&&(t.line=n,t.path=i),a(e,"source",t),a(e,"typeArguments",this.getTypeArguments().map(o=>o.serialize())),e}};var Ye=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Infer}getText(){let e=this.getConstraint(),t=this._node.typeParameter.name.text;return e?`infer ${t} extends ${e.getText()}`:`infer ${t}`}getConstraint(){let e=this._node.typeParameter.constraint;return e?d(e,this._context):null}serialize(){let e={text:this.getText(),kind:this.getKind()};return a(e,"constraint",this.getConstraint()?.serialize()),e}};var Ze=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Union}getText(){try{return this._node.getText()??""}catch{return this._context.getTypeChecker().typeToString(this._type)??""}}getElements(){return this._node.types.map(e=>d(e,this._context))}serialize(){return{text:this.getText(),kind:this.getKind(),elements:this.getElements().map(e=>e.serialize())}}};var et=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Array}getText(){return`${this.getElementType().getText()}[]`}getElementType(){return d(this._node.elementType,this._context)}serialize(){return{text:this.getText(),kind:this.getKind(),elementType:this.getElementType().serialize()}}};var tt=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Tuple}getText(){return`[${this.getElements().map(e=>e.getText()).join(", ")}]`}getElements(){return this._node.elements.map(e=>d(e,this._context))}serialize(){return{text:this.getText(),kind:this.getKind(),elements:this.getElements().map(e=>e.serialize())}}};var rt=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._type=t,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return p.Rest}getText(){return`...${this.getElementType().getText()}`}getElementType(){return d(this._node.type,this._context)}serialize(){return{text:this.getText(),kind:this.getKind(),elementType:this.getElementType().serialize()}}};var b=g(f(),1),Jr={[b.default.SyntaxKind.TypeLiteral]:(r,e,t)=>new $e(r,e,t),[b.default.SyntaxKind.ConditionalType]:(r,e,t)=>new Le(r,e,t),[b.default.SyntaxKind.UnionType]:(r,e,t)=>new Ze(r,e,t),[b.default.SyntaxKind.IntersectionType]:(r,e,t)=>new Ee(r,e,t),[b.default.SyntaxKind.ArrayType]:(r,e,t)=>new et(r,e,t),[b.default.SyntaxKind.TypeReference]:(r,e,t)=>new Fe(r,e,t),[b.default.SyntaxKind.TupleType]:(r,e,t)=>new tt(r,e,t),[b.default.SyntaxKind.NamedTupleMember]:(r,e,t)=>new Ke(r,e,t),[b.default.SyntaxKind.TypeOperator]:(r,e,t)=>new Ie(r,e,t),[b.default.SyntaxKind.LiteralType]:(r,e,t)=>new Qe(r,e,t),[b.default.SyntaxKind.IndexedAccessType]:(r,e,t)=>new ze(r,e,t),[b.default.SyntaxKind.FunctionType]:(r,e,t)=>new Ve(r,e,t),[b.default.SyntaxKind.TypeQuery]:(r,e,t)=>new Xe(r,e,t),[b.default.SyntaxKind.InferType]:(r,e,t)=>new Ye(r,e,t),[b.default.SyntaxKind.MappedType]:(r,e,t)=>new Ge(r,e,t),[b.default.SyntaxKind.OptionalType]:(r,e,t)=>new Je(r,e,t),[b.default.SyntaxKind.TypePredicate]:(r,e,t)=>new Me(r,e,t),[b.default.SyntaxKind.RestType]:(r,e,t)=>new rt(r,e,t),[b.default.SyntaxKind.TemplateLiteralType]:(r,e,t)=>new Ae(r,e,t),[b.default.SyntaxKind.AnyKeyword]:(r,e,t)=>new A(r,e,t),[b.default.SyntaxKind.BigIntKeyword]:(r,e,t)=>new A(r,e,t),[b.default.SyntaxKind.BooleanKeyword]:(r,e,t)=>new A(r,e,t),[b.default.SyntaxKind.NeverKeyword]:(r,e,t)=>new A(r,e,t),[b.default.SyntaxKind.NumberKeyword]:(r,e,t)=>new A(r,e,t),[b.default.SyntaxKind.ObjectKeyword]:(r,e,t)=>new A(r,e,t),[b.default.SyntaxKind.StringKeyword]:(r,e,t)=>new A(r,e,t),[b.default.SyntaxKind.SymbolKeyword]:(r,e,t)=>new A(r,e,t),[b.default.SyntaxKind.UndefinedKeyword]:(r,e,t)=>new A(r,e,t),[b.default.SyntaxKind.VoidKeyword]:(r,e,t)=>new A(r,e,t),[b.default.SyntaxKind.UnknownKeyword]:(r,e,t)=>new de(r,e,t)};function d(r,e){let t=e.getTypeChecker(),i,n;if("kind"in r)i=r,n=t.getTypeFromTypeNode(r);else if(i=t.typeToTypeNode(r,void 0,b.default.NodeBuilderFlags.IgnoreErrors)??null,n=r,!i)return new de(null,r,e);b.default.isParenthesizedTypeNode(i)&&(i=i.type,n=t.getTypeFromTypeNode(i));let o=Jr[i.kind];return o?o(i,n,e):new de(i,n,e)}function ae(r,e){let t=e.getTypeChecker(),i=b.default.getJSDocType(r);if(i)return d(i,e);let n=t.getTypeAtLocation(r);return Ur(r)||(n=t.getBaseTypeOfLiteralType(n)),d(n,e)}function Ur(r){return b.default.hasOnlyExpressionInitializer(r)&&!!r.initializer&&(b.default.isAsExpression(r.initializer)||b.default.isTypeAssertionExpression(r))}var L=class{constructor(e,t){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._context=t}getContext(){return this._context}getName(){return this._node.name.getText()??""}getTSNode(){return this._node}getLine(){return this._context.getLinePosition(this._node)}getDefault(){return this._node.default?d(this._node.default,this._context):null}getConstraint(){return this._node.constraint?d(this._node.constraint,this._context):null}hasDefault(){return!!this._node.default}serialize(){let e={name:this.getName()};return a(e,"default",this.getDefault()?.serialize()),a(e,"constraint",this.getConstraint()?.serialize()),e}};var it=class{constructor(e,t){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_jsDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._context=t,this._jsDoc=new N(this._node)}getContext(){return this._context}getTSNode(){return this._node}getNodeType(){return _.Declaration}getKind(){return k.TypeAlias}getName(){return this._node.name.getText()??""}getLine(){return this._context.getLinePosition(this._node)}getNamespace(){return F(this._node)}getJSDoc(){return this._jsDoc}getValue(){return d(this._node.type,this._context)}getTypeParameters(){return this._node.typeParameters?.map(e=>new L(e,this._context))??[]}serialize(){let e={name:this.getName(),kind:this.getKind(),line:this.getLine(),value:this.getValue().serialize()};return a(e,"namespace",this.getNamespace()),a(e,"jsDoc",this.getJSDoc().serialize()),a(e,"typeParameters",this.getTypeParameters().map(t=>t.serialize())),e}};var ur=g(f(),1),cr={isNode:r=>ur.default.isTypeAliasDeclaration(r),create:(r,e)=>[e.registerReflectedNode(r,()=>new it(r,e))]};var lr=g(f(),1),me=class{constructor(e,t){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_loc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._context=t,this._loc=t.getLocation(e.expression)}getContext(){return this._context}getTSNode(){return this._node}getName(){return this._node.expression.getText()}getTypeArguments(){return(this._node.typeArguments??[]).map(e=>d(e,this._context))}getPath(){return this._loc.path}getLine(){return this._loc.line}serialize(){let e={name:this.getName(),kind:this._loc.symbol&&I(this._loc.symbol.flags,lr.default.SymbolFlags.Class)?k.Class:k.Interface},t={},i=this.getPath(),n=this.getLine();return!C(i)&&n!=null&&(t.line=n,t.path=i),a(e,"source",t),a(e,"typeArguments",this.getTypeArguments().map(o=>o.serialize())),e}};var nt=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_member",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parameter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_jsDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._member=t,this._context=i,this._parameter=this._getParameter(),this._jsDoc=new N(this._node)}getName(){return this._parameter?.getName()??""}getContext(){return this._context}getKind(){return W.IndexSignature}getTSNode(){return this._node}getJSDoc(){return this._jsDoc}getLine(){return this._context.getLinePosition(this._node)}getType(){return d(this._node.type,this._context)}getIndexType(){return this._parameter?.getType()??null}isOptional(){return!!this._parameter?.isOptional()}serialize(){let e={name:this.getName(),line:this.getLine(),kind:W.IndexSignature,type:this.getType().serialize()};return a(e,"indexType",this.getIndexType()?.serialize()),a(e,"optional",this.isOptional()),a(e,"jsDoc",this.getJSDoc().serialize()),e}_getParameter(){let e=this._member.type?.getCallSignatures()?.[0],t=this._node.parameters??[],i=e?.parameters??[],n=t[0],o=i[0]??null;return n?new G(n,o,this._context):null}};var U=g(f(),1),ot=class{constructor(e,t){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_members",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_jsDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_heritage",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._node=e,this._context=t,this._members=qe(this._node,this._context),this._jsDoc=new N(this._node),this._heritage=(this._node.heritageClauses??[]).flatMap(i=>i.types.map(n=>new me(n,this._context)))}getName(){return this._node.name.getText()??""}getNodeType(){return _.Declaration}getKind(){return k.Interface}getContext(){return this._context}getTSNode(){return this._node}getLine(){return this._context.getLinePosition(this._node)}getIndexSignature(){let e=this._context.getTypeChecker(),t=this._context.getSymbol(this._node)?.members?.get("__index"),i=t?.getDeclarations()?.[0];if(!i||!U.default.isIndexSignatureDeclaration(i))return null;let n={symbol:t,type:e.getTypeOfSymbolAtLocation(t,this._node)},o=()=>new nt(i,n,this._context);return this._context.registerReflectedNode(i,o)}getProperties(){let e=[];for(let t of this._members){let{symbol:i}=t,n=i?.getDeclarations()?.[0];if(!n)continue;let o=U.default.isPropertySignature(n)&&n.type&&U.default.isFunctionTypeNode(n.type);if((U.default.isPropertySignature(n)||U.default.isGetAccessor(n)||U.default.isSetAccessor(n))&&!o){let s=new Y(n,t,this._context);e.push(s)}}return e}getPropertyWithName(e){return this.getProperties().find(t=>t.getName()===e)??null}getMethods(){let e=[];for(let t of this._members){let{symbol:i}=t,n=i?.getDeclarations()?.[0];if(!n)continue;let o=U.default.isPropertySignature(n)&&n.type&&U.default.isFunctionTypeNode(n.type);if(U.default.isMethodSignature(n)||o){let s=new J(n,t,this._context);e.push(s)}}return e}getMethodWithName(e){return this.getMethods().find(t=>t.getName()===e)??null}getTypeParameters(){return(this._node.typeParameters??[]).map(e=>new L(e,this._context))}getNamespace(){return F(this._node)}getJSDoc(){return this._jsDoc}getHeritage(){return this._heritage}serialize(){let e={name:this.getName(),kind:this.getKind(),line:this.getLine()};return a(e,"heritage",this.getHeritage().map(t=>t.serialize())),a(e,"typeParameters",this.getTypeParameters().map(t=>t.serialize())),a(e,"jsDoc",this.getJSDoc().serialize()),a(e,"namespace",this.getNamespace()),a(e,"indexSignature",this.getIndexSignature()?.serialize()),a(e,"properties",this.getProperties().map(t=>t.serialize())),a(e,"methods",this.getMethods().map(t=>t.serialize())),e}};var pr=g(f(),1),dr={isNode:r=>pr.default.isInterfaceDeclaration(r),create:(r,e)=>[e.registerReflectedNode(r,()=>new ot(r,e))]};var mr={isNode:We,create:(r,e)=>[e.registerReflectedNode(r,()=>new J(r,null,e))]};var st=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_declaration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_jsDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._declaration=t,this._context=i,this._jsDoc=new N(this._node)}getContext(){return this._context}getName(){return this._declaration.name.getText()??""}getTSNode(){return this._declaration}getNodeType(){return _.Declaration}getKind(){return k.Variable}getDecorators(){return E(this._node).map(e=>new j(e,this._context))}getLine(){return this._context.getLinePosition(this._node)}getType(){return ae(this._declaration,this._context)}getValue(){return this.getJSDoc().getTag("default")?.text??z(this._declaration.initializer,this._context)}getNamespace(){return F(this._node)}getJSDoc(){return this._jsDoc}serialize(){let e=this.getValue(),t={name:this.getName(),kind:this.getKind(),line:this.getLine(),type:this.getType().serialize()};return e!==""&&(t.default=e),a(t,"jsDoc",this.getJSDoc().serialize()),a(t,"decorators",this.getDecorators().map(i=>i.serialize())),a(t,"namespace",this.getNamespace()),t}};var at=g(f(),1);function ut(r){if(at.default.isClassDeclaration(r))return!0;if(!at.default.isVariableStatement(r))return!1;let e=r.declarationList.declarations[0];if(!e)return!1;let t=e.initializer;return!!t&&at.default.isClassExpression(t)}var hr=g(f(),1),gr={isNode:r=>hr.default.isVariableStatement(r)&&!We(r)&&!ut(r),create:(r,e)=>{let t=[];for(let i of r.declarationList.declarations){let n=()=>new st(r,i,e),o=e.registerReflectedNode(i,n);t.push(o)}return t}};var D;(function(r){r.Default="Default",r.Named="Named",r.Namespace="Namespace",r.SideEffect="SideEffect",r.Dynamic="Dynamic"})(D||(D={}));var ct=class{constructor(e,t){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._context=t}getTSNode(){return this._node}getNodeType(){return _.Import}getKind(){return D.SideEffect}getContext(){return this._context}getImportPath(){return this._node.moduleSpecifier.text??""}isBareModuleSpecifier(){return $(this.getImportPath())}serialize(){let e={kind:D.SideEffect,importPath:this.getImportPath()};return a(e,"bareModuleSpecifier",this.isBareModuleSpecifier()),e}};var lt=class{constructor(e,t){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._context=t}getTSNode(){return this._node}getContext(){return this._context}getName(){return(this._node.importClause?.namedBindings).name.escapedText??""}getNodeType(){return _.Import}getKind(){return D.Namespace}getImportPath(){return this._node.moduleSpecifier.text??""}getOriginalPath(){let e=(this._node.importClause?.namedBindings).name,t=this.getImportPath(),i=this._context.getCommandLine().options;return se(t,i)?oe(e,this._context):t}isTypeOnly(){return!!this._node.importClause?.isTypeOnly}isBareModuleSpecifier(){return $(this.getImportPath())}serialize(){let e=this.getOriginalPath(),t={name:this.getName(),kind:this.getKind(),importPath:this.getImportPath()};return e!==t.importPath&&(t.originalPath=e),a(t,"typeOnly",this.isTypeOnly()),a(t,"bareModuleSpecifier",this.isBareModuleSpecifier()),t}};var pt=class{constructor(e,t){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._context=t}getName(){return this._node.importClause?.name?.escapedText??""}getTSNode(){return this._node}getContext(){return this._context}getNodeType(){return _.Import}getKind(){return D.Default}getReferenceName(){return this.getName()}getImportPath(){return this._node.moduleSpecifier.text??""}getOriginalPath(){let e=this._node.importClause?.name,t=this.getImportPath(),i=this._context.getCommandLine().options;return se(t,i)?oe(e,this._context):t}isTypeOnly(){return!!this._node.importClause?.isTypeOnly}isBareModuleSpecifier(){return $(this.getImportPath())}serialize(){let e=this.getOriginalPath(),t={name:this.getName(),kind:this.getKind(),importPath:this.getImportPath()};return e!==t.importPath&&(t.originalPath=e),a(t,"typeOnly",this.isTypeOnly()),a(t,"bareModuleSpecifier",this.isBareModuleSpecifier()),t}};var dt=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._element=t,this._context=i}getTSNode(){return this._node}getContext(){return this._context}getName(){return this._element.name.escapedText??""}getReferenceName(){return this._element.propertyName?.escapedText??this.getName()}getNodeType(){return _.Import}getKind(){return D.Named}getImportPath(){return this._node.moduleSpecifier.text??""}getOriginalPath(){let e=this.getImportPath(),t=this._context.getCommandLine().options;return se(e,t)?oe(this._element.name,this._context):e}isTypeOnly(){return!!this._node.importClause?.isTypeOnly||this._element.isTypeOnly}isBareModuleSpecifier(){return $(this.getImportPath())}serialize(){let e=this.getOriginalPath(),t=this.getReferenceName(),i={name:this.getName(),kind:this.getKind(),importPath:this.getImportPath()};return t!==i.name&&(i.referenceName=t),e!==i.importPath&&(i.originalPath=e),a(i,"typeOnly",this.isTypeOnly()),a(i,"bareModuleSpecifier",this.isBareModuleSpecifier()),i}};var fr=g(f(),1),mt={isNode:r=>fr.default.isImportDeclaration(r),create:(r,e)=>{let t=[];return Vt(r)&&t.push(new pt(r,e)),Ut(r)&&t.push(new ct(r,e)),St(r)&&((r.importClause?.namedBindings).elements??[]).forEach(n=>t.push(new dt(r,n,e))),Jt(r)&&t.push(new lt(r,e)),t}};function yr(r,e){let t=e.getTypeChecker(),i=t.getTypeAtLocation(r),n=i.isClassOrInterface()?t.getBaseTypes(i):[];for(let o of n)if(br(o,t))return!0;return!1}function br(r,e){return r.getSymbol()?.getName()==="HTMLElement"?!0:r.isClassOrInterface()?e.getBaseTypes(r).some(i=>br(i,e)):!1}var B=g(f(),1),ht=class{constructor(e,t){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_instanceMembers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_staticMembers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_heritage",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_jsDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._context=t,this._jsDoc=new N(e);let i=this._getClassNode();i&&(this._instanceMembers=qe(i,this._context),this._staticMembers=rr(i,this._context),this._heritage=(i.heritageClauses??[]).flatMap(n=>n.types.map(o=>new me(o,this._context))))}getName(){return B.default.isVariableStatement(this._node)?this._node.declarationList.declarations[0]?.name.getText()??"":this._node.name?.getText()??""}getNodeType(){return _.Declaration}getKind(){return k.Class}getContext(){return this._context}getTSNode(){return this._node}getLine(){return this._context.getLinePosition(this._node)}getNamespace(){return F(this._node)}getJSDoc(){return this._jsDoc}getDecorators(){return E(this._node).map(e=>new j(e,this._context))}getDecoratorWithName(e){return this.getDecorators().find(t=>t.getName()===e)??null}getConstructors(){let e=this._getClassNode();if(!e)return[];let t=this._context.getTypeChecker(),i=t.getTypeAtLocation(e).getSymbol(),o=(i&&t.getTypeOfSymbolAtLocation(i,e))?.getConstructSignatures()??[],s=[];for(let c of o){if(!c.getDeclaration())continue;let l=new ie(c,this._context),y=l.getPath();y&&!C(y)&&s.push(l)}return s}getProperties(){return this._getPropertyMembers(this._instanceMembers)}getStaticProperties(){return this._getPropertyMembers(this._staticMembers)}getPropertyWithName(e){return this.getProperties().find(t=>t.getName()===e)??null}getMethods(){return this._getMethodMembers(this._instanceMembers)}getStaticMethods(){return this._getMethodMembers(this._staticMembers)}getMethodWithName(e){return this.getMethods().find(t=>t.getName()===e)??null}getTypeParameters(){let e=this._getClassNode();return e?e.typeParameters?.map(t=>new L(t,this._context))??[]:[]}getHeritage(){return this._heritage}isCustomElement(){let e=this._getClassNode();return e?yr(e,this._context):!1}isAbstract(){let e=this._getClassNode();return e?ce(e):!1}serialize(){let e={name:this.getName(),kind:this.getKind(),line:this.getLine()};return a(e,"constructors",this.getConstructors().map(t=>t.serialize())),a(e,"decorators",this.getDecorators().map(t=>t.serialize())),a(e,"jsDoc",this.getJSDoc().serialize()),a(e,"typeParameters",this.getTypeParameters().map(t=>t.serialize())),a(e,"heritage",this.getHeritage().map(t=>t.serialize())),a(e,"abstract",this.isAbstract()),a(e,"customElement",this.isCustomElement()),a(e,"namespace",this.getNamespace()),a(e,"properties",this.getProperties().map(t=>t.serialize())),a(e,"staticProperties",this.getStaticProperties().map(t=>t.serialize())),a(e,"methods",this.getMethods().map(t=>t.serialize())),a(e,"staticMethods",this.getStaticMethods().map(t=>t.serialize())),e}_getPropertyMembers(e){let t=[];for(let i of e){let{symbol:n}=i,o=n?.getDeclarations()?.[0];if(!o)continue;let s=B.default.isPropertyDeclaration(o);if(!(B.default.isMethodDeclaration(o)||s&&(te(o.initializer)||re(o.initializer)))&&(s||B.default.isGetAccessor(o)||B.default.isSetAccessor(o))){let l=new Y(o,i,this._context);l.getModifier()===H.public&&t.push(l)}}return t}_getMethodMembers(e){let t=[];for(let i of e){let{symbol:n}=i,o=n?.getDeclarations()?.[0];if(!o)continue;let s=B.default.isPropertyDeclaration(o);if(B.default.isMethodDeclaration(o)||s&&(te(o.initializer)||re(o.initializer))){let l=new J(o,i,this._context);l.getModifier()===H.public&&t.push(l)}}return t}_getClassNode(){if(B.default.isClassDeclaration(this._node)||B.default.isClassExpression(this._node))return this._node;let t=this._node.declarationList.declarations[0]?.initializer;return!t||!B.default.isClassExpression(t)?null:t}};var _r={isNode:r=>ut(r),create:(r,e)=>[e.registerReflectedNode(r,()=>new ht(r,e))]};var gt=class{constructor(e,t,i){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_jsDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._value=t,this._context=i,this._jsDoc=new N(e)}getName(){return this._node.name.getText()??""}getValue(){return this._value}getContext(){return this._context}getLine(){return this._context.getLinePosition(this._node)}getTSNode(){return this._node}getJSDoc(){return this._jsDoc}serialize(){let e={name:this.getName(),value:this.getValue()};return a(e,"jsDoc",this.getJSDoc().serialize()),e}};var ft=class{constructor(e,t){Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_jsDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._context=t,this._jsDoc=new N(this._node)}getNodeType(){return _.Declaration}getKind(){return k.Enum}getTSNode(){return this._node}getContext(){return this._context}getName(){return this._node.name.getText()??""}getLine(){return this._context.getLinePosition(this._node)}getNamespace(){return F(this._node)}getJSDoc(){return this._jsDoc}getMembers(){let e=0;return this._node.members.map(t=>{let i=t.initializer?.getText()??"";if(i!==""){let o=parseInt(i);isNaN(o)||(e=o+1,i=o)}else i=e++;let n=()=>new gt(t,i,this._context);return this._context.registerReflectedNode(t,n)})}serialize(){let e={kind:this.getKind(),name:this.getName(),line:this.getLine()};return a(e,"namespace",this.getNamespace()),a(e,"members",this.getMembers().map(t=>t.serialize())),a(e,"jsDoc",this.getJSDoc().serialize()),e}};var xr=g(f(),1),Tr={isNode:r=>xr.default.isEnumDeclaration(r),create:(r,e)=>[e.registerReflectedNode(r,()=>new ft(r,e))]};var Nr=[mr,_r,gr,Tr,cr,dr],Sr=[It,Rt,Bt];var h={ImportNode:r=>r==null||typeof r!="object"?!1:"getNodeType"in r&&typeof r.getNodeType=="function"&&r.getNodeType()===_.Import,DefaultImportNode:r=>h.ImportNode(r)&&r.getKind()===D.Default,NamedImportNode:r=>h.ImportNode(r)&&r.getKind()===D.Named,NamespaceImportNode:r=>h.ImportNode(r)&&r.getKind()===D.Namespace,SideEffectImportNode:r=>h.ImportNode(r)&&r.getKind()===D.SideEffect,DeclarationNode:r=>r==null||typeof r!="object"?!1:"getNodeType"in r&&typeof r.getNodeType=="function"&&r.getNodeType()===_.Declaration,EnumNode:r=>h.DeclarationNode(r)&&r.getKind()===k.Enum,VariableNode:r=>h.DeclarationNode(r)&&r.getKind()===k.Variable,TypeAliasNode:r=>h.DeclarationNode(r)&&r.getKind()===k.TypeAlias,FunctionNode:r=>h.DeclarationNode(r)&&r.getKind()===k.Function,ClassNode:r=>h.DeclarationNode(r)&&r.getKind()===k.Class,InterfaceNode:r=>h.DeclarationNode(r)&&r.getKind()===k.Interface,TypeNode:r=>r==null||typeof r!="object"?!1:"getKind"in r&&typeof r.getKind=="function",ArrayTypeNode:r=>h.TypeNode(r)&&r.getKind()===p.Array,ConditionalTypeNode:r=>h.TypeNode(r)&&r.getKind()===p.Conditional,FunctionTypeNode:r=>h.TypeNode(r)&&r.getKind()===p.Function,IndexedAccessTypeNode:r=>h.TypeNode(r)&&r.getKind()===p.IndexAccess,InferTypeNode:r=>h.TypeNode(r)&&r.getKind()===p.Infer,IntersectionTypeNode:r=>h.TypeNode(r)&&r.getKind()===p.Intersection,TypeLiteralTypeNode:r=>h.TypeNode(r)&&r.getKind()===p.TypeLiteral,MappedTypeNode:r=>h.TypeNode(r)&&r.getKind()===p.Mapped,NamedTupleMemberNode:r=>h.TypeNode(r)&&r.getKind()===p.NamedTupleMember,OptionalTypeNode:r=>h.TypeNode(r)&&r.getKind()===p.Optional,IntrinsicTypeNode:r=>h.TypeNode(r)&&r.getKind()===p.Intrinsic,RestTypeNode:r=>h.TypeNode(r)&&r.getKind()===p.Rest,TemplateLiteralTypeNode:r=>h.TypeNode(r)&&r.getKind()===p.TemplateLiteral,TupleTypeNode:r=>h.TypeNode(r)&&r.getKind()===p.Tuple,TypeLiteralNode:r=>h.TypeNode(r)&&r.getKind()===p.Literal,TypeOperatorNode:r=>h.TypeNode(r)&&r.getKind()===p.Operator,TypePredicateNode:r=>h.TypeNode(r)&&r.getKind()===p.Predicate,TypeQueryNode:r=>h.TypeNode(r)&&r.getKind()===p.Query,TypeReferenceNode:r=>h.TypeNode(r)&&r.getKind()===p.Reference,UnionTypeNode:r=>h.TypeNode(r)&&r.getKind()===p.Union,UnknownTypeNode:r=>h.TypeNode(r)&&r.getKind()===p.Unknown,ExportNode:r=>r==null||typeof r!="object"?!1:"getNodeType"in r&&typeof r.getNodeType=="function"&&r.getNodeType()===_.Export,DefaultExportNode:r=>h.ExportNode(r)&&r.getKind()===O.Default,NamedExportNode:r=>h.ExportNode(r)&&r.getKind()===O.Named,EqualExportNode:r=>h.ExportNode(r)&&r.getKind()===O.Equals,NamespaceExportNode:r=>h.ExportNode(r)&&r.getKind()===O.Namespace,ReExportNode:r=>h.ExportNode(r)&&r.getKind()===O.Star};var At=g(f(),1),he=class{constructor(e,t){Object.defineProperty(this,"_declarations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_exports",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_imports",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_jsDoc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._node=e,this._context=t,this._jsDoc=new N(this._node),this._visitNode(e),this._removeNonPublicDeclarations()}getTSNode(){return this._node}getSourcePath(){return this._context.getSystem().normalizePath(this._node.fileName)}getOutputPath(){let e=this._node.fileName,t=this._context.getSystem();if(e.endsWith("js"))return t.normalizePath(e);let i=t.getAbsolutePath(e),n=At.default.getOutputFileNames(this._context.getCommandLine(),i,!1)[0];return t.normalizePath(n??"")}getContext(){return this._context}getImports(){return this._imports}getExports(){return this._exports}getDeclarations(){return this._declarations}getJSDoc(){return this._jsDoc}getDeclarationByKind(e){return this.getDeclarations().filter(t=>t.getKind()===e)}getDeclarationByName(e){return this.getDeclarations().find(t=>t.getName()===e)??null}getDeclarationsByCategory(e){return this.getDeclarations().filter(t=>t.getJSDoc()?.getTag("category")?.text===e)}serialize(){let e={sourcePath:this.getSourcePath(),outputPath:this.getOutputPath(),imports:this.getImports().map(t=>t.serialize()),declarations:this.getDeclarations().map(t=>t.serialize()),exports:this.getExports().map(t=>t.serialize())};return a(e,"jsDoc",this.getJSDoc().serialize()),e}_visitNode(e){let t=!1;mt.isNode(e)&&this._add(mt.create(e,this._context));for(let i of Nr)i.isNode(e)&&(this._add(i.create(e,this._context)),t=!0);for(let i of Sr)i.isNode(e)&&this._add(i.create(e,this._context));t||At.default.forEachChild(e,i=>this._visitNode(i))}_add(e){for(let t of e)h.ImportNode(t)&&this._imports.push(t),h.DeclarationNode(t)&&!this._hasDeclaration(t)&&this._declarations.push(t),h.ExportNode(t)&&!this._hasExport(t)&&this._exports.push(t)}_hasDeclaration(e){return this._declarations.some(t=>t.getName()===e.getName())}_hasExport(e){return h.ReExportNode(e)?this._exports.some(t=>h.ReExportNode(t)&&t.getModule()===e.getModule()):this._exports.some(t=>t.getName()===e.getName()&&t.getKind()===e.getKind())}_removeNonPublicDeclarations(){this._declarations=this._declarations.filter(e=>{let t=this._exports.findIndex(n=>n.getOriginalName()===e.getName()),i=!!e.getJSDoc()?.isIgnored();return t===-1?!1:(i&&this._exports.splice(t,1),!i)})}};var ge=g(f(),1),yt=class r{constructor(e,t,i,n,o={}){Object.defineProperty(this,"_program",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_commandLine",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fileNames",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_modules",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_compilerHost",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_packageJson",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_diagnostics",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_system",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._system=e,this._compilerHost=t,this._program=i,this._commandLine=n,this._options=o,this._diagnostics=new Se(e),this._packageJson=this._getPackageJSON(),this._context=new ve(e,()=>this._program,()=>this._commandLine,this._diagnostics,o);let s=ge.default.getConfigFileParsingDiagnostics(n);this._diagnostics.addMany(s),this._diagnostics.addMany(i.getSyntacticDiagnostics()),this._diagnostics.addMany(i.getSemanticDiagnostics());for(let c of i.getRootFileNames()){let l=i.getSourceFile(c);if(!l){this._diagnostics.addOne(l,`Unable to analyse file "${c}".`);continue}this._fileNames.add(c),this._modules.push(new he(l,this._context))}}static fromTSConfig(e,t={}){let i=fe(e,t),n=new ne(e,i.options),o=ge.default.createProgram({rootNames:i.fileNames,options:i.options,host:n,projectReferences:i.projectReferences??[]});return new r(e,n,o,i,t)}static fromFiles(e,t,i={}){let n=fe(e,i),o=new ne(e,n.options),s=ge.default.createProgram({rootNames:t.map(c=>e.getAbsolutePath(c)),options:n.options,host:o,projectReferences:n.projectReferences??[]});return new r(e,o,s,n,i)}static fromSource(e,t,i={}){let n="unknown.ts";e.writeFile(n,t);let o=fe(e,i),s=new ne(e,o.options),c=ge.default.createProgram({rootNames:[e.getAbsolutePath(n)],options:o.options,host:s,projectReferences:o.projectReferences??[]});return new r(e,s,c,o,i)}getSystem(){return this._system}getProgram(){return this._program}getTypeChecker(){return this._program.getTypeChecker()}getOptions(){return this._options}getDiagnostics(){return this._diagnostics}getModules(){return this._modules}has(e){let t=this._system.normalizePath(e);return this._modules.some(i=>i.getSourcePath()===t)}add(e,t){let i=this._system.normalizePath(e),n=this._system.getAbsolutePath(e);if(this._modules.find(l=>l.getSourcePath()===i))throw new Error("File already exist");let s=this._upsertFile(n,t),c=new he(s,this._context);return this._modules.push(c),c}update(e,t){let i=this._system.normalizePath(e),n=this._system.getAbsolutePath(i),o=this._modules.findIndex(l=>l.getSourcePath()===i);if(o<0)throw new Error("The file doesn't exist");let s=this._upsertFile(n,t),c=new he(s,this._context);return this._modules.splice(o,1,c),c}getName(){return this._packageJson?.name??""}serialize(){return this._modules.map(e=>e.serialize())}_getPackageJSON(){let e=this._options.tsConfigFilePath?this._system.getDirectoryName(this._options.tsConfigFilePath):this._system.getCurrentDirectory(),t=this._system.join(e,"package.json"),i=this._system.fileExists(t)?this._system.readFile(t):null;try{return i!=null?JSON.parse(i):null}catch{return null}}_upsertFile(e,t){return this._system.writeFile(e,t),this._fileNames.has(e)||(this._commandLine=fe(this._system,this._options),this._fileNames.add(e)),this._program=ge.default.createProgram({rootNames:[...this._fileNames],options:this._program.getCompilerOptions(),host:this._compilerHost,oldProgram:this._program,projectReferences:this._program.getProjectReferences()??[]}),this._program.getSourceFile(e)}};async function ml(r,e={}){if(!r)return{project:null,errors:[{messageText:"Source code is empty."}]};let t;e.system?t=e.system:t=await(await import("./in-memory-system-DSAXVZ5V.js")).InMemorySystem.create();let i=yt.fromSource(t,r,e),n=i.getDiagnostics().getAll();return{project:i,errors:n}}export{ml as a};
