import{a as g,b as Oe}from"./chunk-7HH6DTWO.js";import{c as h}from"./chunk-BLPUKQJE.js";var Fe={experimentalDecorators:!0,target:"es2020",module:"ES2020",lib:["es2020","DOM"],declaration:!0,suppressOutputPathCheck:!0,skipLibCheck:!0,skipDefaultLibCheck:!0},Me={target:"es2020",module:"ES2020",lib:["es2020","DOM"],allowJs:!0,suppressOutputPathCheck:!0,skipLibCheck:!0,skipDefaultLibCheck:!0,moduleResolution:"node",typeRoots:[]};var tt=h(g(),1);function yt(r,t){let{compilerOptions:e,jsProject:i,include:n,exclude:o}=t,s=["**node_modules**"];if(i)return tt.default.parseJsonConfigFileContent({compilerOptions:Me,include:n??["**/*.js"],exclude:o??s},r,r.getCurrentDirectory());if(e)return tt.default.parseJsonConfigFileContent({compilerOptions:{...e,declaration:!0},include:n??["**/*.ts"],exclude:o??s},r,r.getCurrentDirectory());let c=Cr(r,t);return c||tt.default.parseJsonConfigFileContent({compilerOptions:Fe,include:n??["**/*.ts"],exclude:o??s},r,r.getCurrentDirectory())}function Cr(r,t){var e,i;let{tsConfigFilePath:n,include:o,exclude:s}=t,c=xe=>r.fileExists(xe),l=xe=>r.readFile(xe),f=n?r.isAbsolute(n)?r.getDirectoryName(n):r.getDirectoryName(r.getAbsolutePath(n)):r.getCurrentDirectory(),T=n?r.getBaseName(n):"tsconfig.json",D=tt.default.findConfigFile(f,c,T),F=D&&tt.default.readConfigFile(D,l);return!F||typeof F!="object"?null:(s!==void 0&&Array.isArray(s)&&((e=F.config).exclude??(e.exclude=[]),F.config.exclude.push(...s)),o!==void 0&&Array.isArray(o)&&((i=F.config).include??(i.include=[]),F.config.include.push(...o)),tt.default.parseJsonConfigFileContent(F.config,r,r.getDirectoryName(D),{},D))}var _t=h(g(),1),bt=class{constructor(t){this._diagnostics=[],this._argumentErrors=[],this._cwd=t}formatDiagnostics(){let t={getCanonicalFileName:e=>e,getCurrentDirectory:()=>this._cwd,getNewLine:()=>`
`};return _t.default.formatDiagnosticsWithColorAndContext(this._diagnostics,t)}getAll(){return[...this._argumentErrors,..._t.default.sortAndDeduplicateDiagnostics(this._diagnostics)]}isEmpty(){return!this._diagnostics.length}flattenMessage(t){return _t.default.flattenDiagnosticMessageText(t.messageText,`
`)}addDiagnostic(t,e){let i={file:t.getSourceFile(),start:t.getStart(),length:t.getWidth(),category:_t.default.DiagnosticCategory.Error,messageText:e,code:1e6};this._diagnostics.push(i)}addArgumentError(t){this._argumentErrors.push({messageText:t})}addManyDiagnostics(t){this._diagnostics.push(...t)}};var Pt=h(g(),1),ot=class{constructor(t,e){this._system=t,this._options=e,this._cwd=t.getCurrentDirectory()}getSourceFile(t,e){let i=this.readFile(t,this._options.charset);return Pt.default.createSourceFile(t,i,e,!0)}getDefaultLibFileName(t){return Oe?Pt.default.getDefaultLibFileName(t):Pt.default.getDefaultLibFilePath(t)}writeFile(t,e,i){this._system.writeFile(t,e,i)}getCurrentDirectory(){return this._cwd}useCaseSensitiveFileNames(){return this._system.useCaseSensitiveFileNames}getCanonicalFileName(t){return this._system.useCaseSensitiveFileNames?t:t.toLowerCase()}getNewLine(){return this._system.newLine}fileExists(t){return this._system.fileExists(t)}readFile(t,e){return this._system.readFile(t,e)??""}directoryExists(t){return this._system.directoryExists(t)}getDirectories(t){return this._system.getDirectories(t)}readDirectory(t,e,i,n,o){return this._system.readDirectory(t,e,i,n,o)}};var Ct=h(g(),1),Dt=class{constructor(t,e,i,n,o){this._reflectedNodesBySymbol=new Map,this._system=t,this._getProgram=e,this._getCommandLine=i,this._diagnostics=n,this._options=o}getProgram(){return this._getProgram()}getCommandLine(){return this._getCommandLine()}getTypeChecker(){return this._getProgram().getTypeChecker()}getSystem(){return this._system}getDiagnostics(){return this._diagnostics}getOptions(){return this._options}registerReflectedNode(t,e){let i=this.getSymbol(t);if(!i)return e();let n=this._reflectedNodesBySymbol.get(i);return n||(n=e(),this._reflectedNodesBySymbol.set(i,n)),n}getSymbol(t){let e=this.getTypeChecker(),i=e.getSymbolAtLocation(t);for(!i&&this._isNamedNode(t)&&(i=e.getSymbolAtLocation(t.name));i&&i.flags&Ct.default.SymbolFlags.Alias;)i=e.getAliasedSymbol(i);return i||(i=t.symbol),i??null}getLocation(t){let e;"kind"in t?e=this.getSymbol(t):e=t.aliasSymbol??t.getSymbol();let i=e?.getDeclarations()?.[0],n=i?.getSourceFile(),o=n?.fileName?this._system.normalizePath(this._system.realpath(n.fileName)):"",s=i?this.getLinePosition(i):null;return{symbol:e,path:o,line:s}}getLinePosition(t){return t.getSourceFile().getLineAndCharacterOfPosition(t.getStart()).line+1}_isNamedNode(t){let e=t.name;return!!e&&(Ct.default.isMemberName(e)||Ct.default.isComputedPropertyName(e))}};var Te=h(g(),1),wt=()=>typeof Te.default.canHaveDecorators=="function"&&typeof Te.default.canHaveModifiers=="function";var Se=h(g(),1);function xt(r){return wt()?Se.default.canHaveModifiers(r)?Se.default.getModifiers(r)??[]:[]:Array.from(r.modifiers??[])}var ke=h(g(),1);function Ie(r){return xt(r).some(t=>t.kind===ke.default.SyntaxKind.ExportKeyword)}function je(r){return xt(r).some(t=>t.kind===ke.default.SyntaxKind.DefaultKeyword)}var w;(function(r){r.Default="Default",r.Namespace="Namespace",r.Star="Star",r.Named="Named",r.Equals="Equals"})(w||(w={}));var _;(function(r){r.Import="Import",r.Declaration="Declaration",r.Export="Export"})(_||(_={}));var Tt=class{constructor(t,e,i){this._declaration=null,this._node=t,this._declaration=i??null,this._context=e}getName(){return this._declaration?this._declaration.name.getText()??"":this._node.name?.getText()??""}getFullyQualifiedName(){let t=this._declaration??this._node,e=this._context.getSymbol(t);return e?this._context.getTypeChecker().getFullyQualifiedName(e).split(".").slice(1).join("."):this.getName()}getOriginalName(){return this.getName()}getNodeType(){return _.Export}getContext(){return this._context}getKind(){return je(this._node)?w.Default:w.Named}getTSNode(){return this._node}serialize(){return{name:this.getFullyQualifiedName(),kind:this.getKind()}}};var At=class{constructor(t,e){this._node=t,this._context=e}getName(){return this._node.expression.getText()??""}getOriginalName(){return this.getName()}getNodeType(){return _.Export}getContext(){return this._context}getKind(){return this._node.isExportEquals?w.Equals:w.Default}isTypeOnly(){return!1}getTSNode(){return this._node}serialize(){return{name:this.getName(),kind:this.getKind()}}};function a(r,t,e){r==null||e==null||(typeof e=="boolean"?e&&(r[t]=e):typeof e=="string"?e!==""&&(r[t]=e):Array.isArray(e)?e.length&&(r[t]=e):Dr(e)?Object.keys(e).length&&(r[t]=e):r[t]=e)}function Dr(r){return r!=null&&Object.prototype.toString.call(r)==="[object Object]"}var Re=h(g(),1),zt=class{constructor(t,e){this._node=t,this._context=e}getName(){return!this._node.exportClause||!Re.default.isNamespaceExport(this._node.exportClause)?"":this._node.exportClause.name.escapedText??""}getOriginalName(){return this.getName()}getContext(){return this._context}getKind(){return w.Namespace}getNodeType(){return _.Export}getModule(){return this._node.moduleSpecifier?.getText()??""}getTSNode(){return this._node}isTypeOnly(){return this._node.isTypeOnly}serialize(){let t={name:this.getName(),kind:this.getKind()};return a(t,"module",this.getModule()),a(t,"typeOnly",this.isTypeOnly()),t}};var Kt=class{constructor(t,e,i){this._node=t,this._element=e,this._context=i}getName(){return this._element.name.escapedText??""}getOriginalName(){return this._element.propertyName?.escapedText??this.getName()}getKind(){return w.Named}getNodeType(){return _.Export}getContext(){return this._context}isTypeOnly(){return!!this._node.isTypeOnly}getModule(){return this._node.moduleSpecifier?.getText()??""}getTSNode(){return this._node}isReexport(){return this.getOriginalName()!==this.getName()}serialize(){let t=this.getOriginalName(),e={name:this.getName(),kind:this.getKind()};return t!==e.name&&a(e,"originalName",this.getOriginalName()),a(e,"typeOnly",this.isTypeOnly()),a(e,"module",this.getModule()),e}};var Et=class{constructor(t,e){this._node=t,this._context=e}getName(){return"*"}getOriginalName(){return this.getName()}getKind(){return w.Star}getNodeType(){return _.Export}getContext(){return this._context}getModule(){return this._node.moduleSpecifier?.getText()??""}getTSNode(){return this._node}isTypeOnly(){return!!this._node.isTypeOnly}serialize(){let t={name:this.getName(),kind:this.getKind()};return a(t,"module",this.getModule()),a(t,"typeOnly",this.isTypeOnly()),t}};var R=h(g(),1),Be={isNode:r=>Ie(r),create:(r,t)=>{let e=[];if(R.default.isVariableStatement(r))for(let i of r.declarationList.declarations)e.push(new Tt(r,t,i));return(R.default.isFunctionDeclaration(r)||R.default.isClassDeclaration(r)||R.default.isInterfaceDeclaration(r)||R.default.isEnumDeclaration(r)||R.default.isTypeAliasDeclaration(r))&&e.push(new Tt(r,t)),e}},ve={isNode:r=>R.default.isExportAssignment(r),create:(r,t)=>[new At(r,t)]},Ve={isNode:r=>R.default.isExportDeclaration(r),create:(r,t)=>{let e=r.exportClause&&R.default.isNamedExports(r.exportClause),i=r.exportClause&&R.default.isNamespaceExport(r.exportClause),n=r.moduleSpecifier!==void 0,o=[];if(e)for(let s of r.exportClause.elements)o.push(new Kt(r,s,t));else i?o.push(new zt(r,t)):n&&o.push(new Et(r,t));return o}};var b;(function(r){r.Class="Class",r.Interface="Interface",r.Function="Function",r.Mixin="Mixin",r.Variable="Variable",r.Enum="Enum",r.TypeAlias="TypeAlias"})(b||(b={}));var m;(function(r){r.Array="Array",r.Union="Union",r.Intersection="Intersection",r.ObjectLiteral="ObjectLiteral",r.Conditional="Conditional",r.Reference="Reference",r.Intrinsic="Intrinsic",r.Tuple="Tuple",r.NamedTupleMember="NamedTupleMember",r.Operator="Operator",r.Unknown="Unknown",r.IndexAccess="IndexAccess",r.Literal="Literal",r.Function="Function",r.Query="Query",r.Infer="Infer",r.Mapped="Mapped",r.Optional="Optional",r.Predicate="Predicate",r.Rest="Rest",r.TemplateLiteral="TemplateLiteral"})(m||(m={}));var Lt=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.TemplateLiteral}getText(){return this._context.getTypeChecker().typeToString(this._type)}serialize(){return{text:this.getText(),kind:this.getKind()}}};var Je=r=>Array.isArray(r)&&r.length>0;var Ne=h(g(),1);function Q(r){return!!r.replace(/'/g,"")[0]?.match(/[@a-zA-Z\d]/g)}function K(r){return r.length<1e3&&(/.*node_modules\/.+/.test(r)||/^https?:\/\/.+/.test(r))}function st(r,t){if(!r)return"";let n=t.getSymbol(r)?.declarations?.[0]?.getSourceFile().fileName??"";return t.getSystem().normalizePath(n)}function at(r,t){let e=t.paths??{};for(let i in e){let n=new RegExp(i);if(r.length<1e3&&n.test(r))return!0}return!1}function Ue(r){return!!r.importClause?.name}function be(r){let t=r.importClause?.namedBindings;return!t||!Ne.default.isNamedImports(t)?!1:Je(t.elements)}function qe(r){let t=r.importClause?.namedBindings;return!t||!Ne.default.isNamespaceImport(t)?!1:!!t.name&&!be(r)}function We(r){return Object.prototype.hasOwnProperty.call(r,"importClause")&&r.importClause==null}var $e=h(g(),1),Ot=class{constructor(t,e,i){this._loc=null,this._node=t,this._type=e,this._context=i,$e.default.isTypeReferenceNode(t.objectType)&&(this._loc=i.getLocation(t.objectType.typeName))}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.IndexAccess}getText(){return`${this.getObjectType().getText()}[${this.getIndexType().getText()}]`}getPath(){return this._loc?.path??""}getLine(){return this._loc?.line??null}getObjectType(){return u(this._node.objectType,this._context)}getIndexType(){return u(this._node.indexType,this._context)}serialize(){let t={text:this.getText(),kind:this.getKind()},e={},i=this.getPath(),n=this.getLine();return n!=null&&!K(i)&&(e.line=n,e.path=i),a(t,"source",e),t}};var Ft=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.NamedTupleMember}getText(){return`${this.getName()}: ${this.getType().getText()}`}getName(){return this._node.name.getText()??""}getType(){return u(this._node.type,this._context)}isOptional(){return!!this._node.questionToken}serialize(){let t={name:this.getName(),...this.getType().serialize()};return a(t,"optional",this.isOptional()),t}};var Mt=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Intersection}getText(){try{return this._node.getText()??""}catch{return this._context.getTypeChecker().typeToString(this._type)??""}}getElements(){return this._node.types.map(t=>u(t,this._context))}serialize(){return{text:this.getText(),kind:this.getKind(),elements:this.getElements().map(t=>t.serialize())}}};var It=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Conditional}getText(){try{return this._node.getText()??""}catch{return this._context.getTypeChecker().typeToString(this._type)??""}}getCheckType(){return u(this._node.checkType,this._context)}getExtendsType(){return u(this._node.extendsType,this._context)}getTrueType(){return u(this._node.trueType,this._context)}getFalseType(){return u(this._node.falseType,this._context)}serialize(){return{text:this.getText(),kind:this.getKind()}}};var J=h(g(),1),L=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Intrinsic}getText(){switch(this._node.kind){case J.default.SyntaxKind.NumberKeyword:return"number";case J.default.SyntaxKind.BooleanKeyword:return"boolean";case J.default.SyntaxKind.StringKeyword:return"string";case J.default.SyntaxKind.UndefinedKeyword:return"undefined";case J.default.SyntaxKind.NullKeyword:return"null";case J.default.SyntaxKind.ObjectKeyword:return"object";case J.default.SyntaxKind.SymbolKeyword:return"symbol";case J.default.SyntaxKind.BigIntKeyword:return"bigint";case J.default.SyntaxKind.VoidKeyword:return"void";default:return this._context.getTypeChecker().typeToString(this._type)??""}}serialize(){return{text:this.getText(),kind:this.getKind()}}};var Pe=h(g(),1),jt=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i,this._loc=i.getLocation(t.typeName)}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Reference}getText(){if(!(this._type.flags&Pe.default.TypeFlags.Any))return this._context.getTypeChecker().typeToString(this._type);let t=Pe.default.isIdentifier(this._node.typeName)?this._node.typeName.text:this._node.typeName.right.text,e=this.getTypeArguments().map(i=>i.getText());return e.length>0?`${t}<${e.join(", ")}>`:t}getPath(){return this._loc.path}getLine(){return this._loc.line}getTypeArguments(){return(this._node.typeArguments??[]).map(t=>u(t,this._context))}serialize(){let t={text:this.getText(),kind:this.getKind()},e={},i=this.getPath(),n=this.getLine();return!K(i)&&n!=null&&(e.line=n,e.path=i),a(t,"source",e),a(t,"typeArguments",this.getTypeArguments().map(o=>o.serialize())),t}};var He=h(g(),1),Rt=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Predicate}getText(){let t=He.default.isThisTypeNode(this._node.parameterName)?"this":this._node.parameterName.getText(),e=this.asserts()?["asserts",t]:[t],i=this.getTargetType();return i&&e.push("is",i.getText()),e.join(" ")}getTargetType(){return this._node.type?u(this._node.type,this._context):null}asserts(){return!!this._node.assertsModifier}serialize(){return{text:this.getText(),kind:this.getKind()}}};var Bt=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Operator}getText(){try{return this._node.getText()??""}catch{return this._context.getTypeChecker().typeToString(this._type)??""}}getElementType(){return u(this._node.type,this._context)}serialize(){return{text:this.getText(),kind:this.getKind(),elementType:this.getElementType().serialize()}}};var P=h(g(),1);function O(r,t){let e=r;if(e==null)return;if((P.default.isAsExpression(e)||P.default.isTypeAssertionExpression(e)||P.default.isParenthesizedExpression(e)||P.default.isComputedPropertyName(e))&&(e=e.expression),P.default.isPrefixUnaryExpression(e))return Kr(e,t);if(e==null)return;let i=e.getText()??"";if(P.default.isStringLiteralLike(e)||P.default.isArrayLiteralExpression(e)||P.default.isObjectLiteralExpression(e))return i;if(P.default.isNumericLiteral(e))return Ar(i);if(wr(e))return i==="true";if(e.kind===P.default.SyntaxKind.NullKeyword)return null;if(e.kind!==P.default.SyntaxKind.UndefinedKeyword)return P.default.isIdentifier(e)||P.default.isPropertyAccessExpression(e)?zr(e,t):i}function wr(r){return r.kind===P.default.SyntaxKind.FalseKeyword||r.kind===P.default.SyntaxKind.TrueKeyword}function Ar(r){let t=parseFloat(r);return isNaN(t)?r:t}function zr(r,t){let e=t.getSymbol(r),i=r.getText()??"",n=e?.declarations?.[0],o=n?.getSourceFile().fileName??"",s=o?t.getSystem().realpath(o):"";return n==null||K(s)?i:P.default.isVariableDeclaration(n)||P.default.isPropertyDeclaration(n)?O(n.initializer,t):i}function Kr(r,t){let e=O(r.operand,t);if(typeof e!="number"&&typeof e!="string"&&typeof e!="boolean")return e;switch(r.operator){case P.default.SyntaxKind.MinusToken:return-e;case P.default.SyntaxKind.ExclamationToken:return!e;case P.default.SyntaxKind.PlusToken:return+e;default:return e}}var vt=class{constructor(t,e){this._node=t,this._context=e}getTSNode(){return this._node}getContext(){return this._context}getName(){return this._node.name.getText()||""}getDefault(){return O(this._node.initializer,this._context)}serialize(){let t={name:this.getName()};return a(t,"default",this.getDefault()),t}};var Ce=h(g(),1);function M(r){let t;return wt()?t=Ce.default.canHaveDecorators(r)?Ce.default.getDecorators(r)??[]:[]:t=r.decorators??[],t}function et(r){let t=[r(0)],e=[];return{next(i){e.push(i);let n=t[t.length-1],o=n.next(i);if(o.kind==="backtrack"){if(!n.isValid())return t.pop(),{kind:"backtrack",tokens:e};let s=r(t.length),c=o.tokens,l,f=0;for(let T=0;T<c.length;T++){let D=c[T];if(l=s.next(D),f=T,l.kind==="error"||l.kind==="success")break;if(l.kind==="backtrack"){f-=l.tokens.length-1;break}}return l?.kind==="error"?{kind:"backtrack",tokens:o.tokens}:((s.isValid()||l?.kind==="in-progress")&&(e=c,t.push(s)),f===c.length-1?l:{kind:"backtrack",tokens:c.slice(f)})}if(o.kind==="error"){let s=t.length;return t.pop(),s>1?{kind:"backtrack",tokens:e}:o}return o.kind==="success"&&(t.push(r(t.length)),e=[]),{kind:"in-progress"}},isValid(){return t.length>0&&!!t[0]?.isValid()},serialize(){return t.flatMap(i=>i.serialize())}}}function k(r){let t=[],e=!0;return{next(i){t.push(i);let n=r.next(i);return n.kind==="error"?(e=!1,{kind:"backtrack",tokens:t}):n},isValid(){return e},serialize(){return e?r.serialize():[]}}}var A=(d=>(d[d.Newline=0]="Newline",d[d.Spaces=1]="Spaces",d[d.AsciiWord=2]="AsciiWord",d[d.Slash=3]="Slash",d[d.Star=4]="Star",d[d.Backslash=5]="Backslash",d[d.DoubleQuote=6]="DoubleQuote",d[d.Tilde=7]="Tilde",d[d.AtSign=8]="AtSign",d[d.LeftCurlyBracket=9]="LeftCurlyBracket",d[d.RightCurlyBracket=10]="RightCurlyBracket",d[d.Backtick=11]="Backtick",d[d.Period=12]="Period",d[d.Colon=13]="Colon",d[d.Pipe=14]="Pipe",d[d.PoundSymbol=15]="PoundSymbol",d[d.RightSquareBracket=16]="RightSquareBracket",d[d.LeftSquareBracket=17]="LeftSquareBracket",d[d.Equal=18]="Equal",d[d.Hyphen=19]="Hyphen",d[d.Other=20]="Other",d))(A||{}),St=class{constructor(t,e,i,n,o,s){this._kind=t,this._lexeme=e,this._multiple=i,this._line=n,this._start=o,this._end=s}get kind(){return this._kind}get start(){return this._start}get end(){return this._end}get line(){return this._line}get length(){return this._end-this._start}get multiple(){return this._multiple}merge(t){this._end=t.end,this._lexeme=`${this._lexeme}${t.toString()}`}toString(){return this._lexeme}};function p(r,t){let e=null;return{next(i){let n=t?.length==null||i.length===t.length;return i.kind===r&&n?(e=i,{kind:"success"}):{kind:"error",error:{line:i.line,start:i.start,end:i.end,message:`Expected token of kind "${A[r]}" but instead found "${A[i.kind]}".`}}},isValid(){return!!e},serialize(){let i=e?.toString()??"";return t?.serializable&&i?[{kind:"text",text:i}]:[]}}}function G(r){let t=r.reduce((i,n,o)=>(i[o]={valid:!0,finalized:!1,backtrackTokens:[]},i),{}),e=null;return{next(i){for(let s=0;s<r.length;s++){let c=t[s],l=r[s],f=e!=null?r[e]:null;(e!=null?t[e]:null)?.valid||(e=null),Er(i,l,c),c.finalized&&c.valid&&(!f||f.priority<l.priority)&&(e=s)}let n=Object.values(t);if(n.every(s=>!s.valid))return{kind:"error",error:t[0]?.error};if(e==null||n.some(s=>s.valid&&!s.finalized))return{kind:"in-progress"};let o=t[e];return o.backtrackTokens.length>0?{kind:"backtrack",tokens:o.backtrackTokens}:{kind:"success"}},isValid(){return e!=null&&!!t[e]?.valid},serialize(){return e==null?[]:r[e].symbol.serialize()}}}function Er(r,t,e){if(!e.valid)return;if(e.finalized){e.backtrackTokens.push(r);return}let i=t.symbol,n=i.next(r);if(n.kind!=="in-progress"){if(n.kind==="success"){e.valid=!0,e.finalized=!0;return}if(n.kind==="error"){e.valid=!1,e.error=n.error;return}e.finalized=!0,e.valid=i.isValid(),e.backtrackTokens=n.tokens}}function W(r){let t=[],e=!0;return{next(i){t.push(i);let n=0;for(let{kinds:s,canEscape:c}of r){if(t.length<s.length)continue;let l=c&&t[t.length-s.length-1]?.kind===5;if(s.every((T,D)=>t[t.length-s.length+D]?.kind===T)&&!l){n=s.length;break}}if(!n)return{kind:"in-progress"};let o=t.slice(t.length-n);return t=t.slice(0,t.length-n),e=t.length>0,{kind:"backtrack",tokens:o}},isValid(){return e},serialize(){return e?[{kind:"text",text:t.map(i=>i.toString()).join("").trim()}]:[]}}}function Qe(){let r=G([{symbol:Lr(),priority:0},{symbol:Or(),priority:0}]);return{next(t){return r.next(t)},isValid(){return r.isValid()},serialize(){return r.serialize()}}}function Lr(){let r=[p(17),W([{kinds:[8],canEscape:!0},{kinds:[4,3]},{kinds:[9],canEscape:!0},{kinds:[16],canEscape:!0}]),p(16),p(9),p(8),p(2,{serializable:!0}),p(1),W([{kinds:[8],canEscape:!0},{kinds:[4,3]},{kinds:[17],canEscape:!0},{kinds:[10],canEscape:!0}]),p(10)],t=0,e=!0;return{next(i){let o=r[t].next(i);if(o.kind==="backtrack"){if(t++,t===r.length-1){let l={kind:"error",error:{line:i.line,start:i.start,end:i.end,message:`Unexpected token found "${A[i.kind]}"`}};return o.tokens.length===1?this.next(o.tokens[0]):l}let s,c=o.tokens.length-1;for(let l=0;l<=c;l++){let f=o.tokens[l];if(s=this.next(f),s.kind==="error")return s;if(s.kind==="success"&&l<c)return{kind:"backtrack",tokens:o.tokens.slice(l+1)}}return s}return o.kind==="error"?(e=!1,o):(o.kind==="success"&&t++,t===r.length?(e=!0,{kind:"success"}):{kind:"in-progress"})},isValid(){return e},serialize(){if(!e)return[];let i=r[5].serialize()[0]?.text??"",n=r[7].serialize()[0]?.text??"",o=r[1].serialize()[0]?.text??"";return[{kind:i,target:n,targetText:o}]}}}function Or(){let r=[p(9),p(8),p(2,{serializable:!0}),W([{kinds:[8],canEscape:!0},{kinds:[14],canEscape:!0},{kinds:[4,3]},{kinds:[10],canEscape:!0}]),k(p(1)),k(p(14)),k(p(1)),W([{kinds:[8],canEscape:!0},{kinds:[14],canEscape:!0},{kinds:[4,3]},{kinds:[10],canEscape:!0}]),p(10)],t=0,e=!0;return{next(i){let o=r[t].next(i);if(o.kind==="backtrack"){if(t++,t===r.length-1){let l={kind:"error",error:{line:i.line,start:i.start,end:i.end,message:`Unexpected token found "${A[i.kind]}"`}};return o.tokens.length===1?this.next(o.tokens[0]):l}if(t!==4)return this.next(o.tokens[0]);let s,c=o.tokens.length-1;for(let l=0;l<=c;l++){let f=o.tokens[l];if(s=this.next(f),s.kind==="error")return s;if(s.kind==="success"&&l<c)return{kind:"backtrack",tokens:o.tokens.slice(l+1)}}return s}return o.kind==="error"?(e=!1,o):(o.kind==="success"&&t++,t===r.length?(e=!0,{kind:"success"}):{kind:"in-progress"})},isValid(){return e},serialize(){if(!e)return[];let i=r[2].serialize()[0]?.text??"",n=r[3].serialize()[0]?.text??"",o=r[7].serialize()[0]?.text??"";return[{kind:i,target:n,targetText:o}]}}}function De(r){let t=[],e=!1;return{next(i){return t.push(i),t.length<r.length?{kind:"in-progress"}:t.length===r.length&&t.every((o,s)=>r[s]===o.kind)?(e=!1,{kind:"error",error:{line:i.line,start:i.start,end:i.end,message:`Unexpected token of kind "${A[i.kind]}".`}}):(e=!0,{kind:"backtrack",tokens:t})},isValid(){return e},serialize(){return[]}}}function Ge(){let r=et(t=>we({startPadding:!0,standaloneLine:t>0}));return{next(t){return r.next(t)},isValid(){return r.isValid()},serialize(){let t=Ae(r.serialize());return t.length?[{kind:"description",text:t}]:[]}}}function we(r){let t=[r.startPadding?p(1,{length:1}):k(p(1,{length:1})),De([4,3]),r.standaloneLine?p(4):k(p(4)),k(p(1)),De([8]),k(et(()=>G([{priority:0,symbol:W([{kinds:[17],canEscape:!0},{kinds:[9],canEscape:!0},{kinds:[0]},{kinds:[4,3]},{kinds:[8],canEscape:!0}])},{priority:1,symbol:Qe()}]))),k(p(0,{serializable:!0}))],e=0,i=!1,n=[];return{next(o){n.push(o);let c=t[e].next(o);if(c.kind==="backtrack"){if(e++,e===t.length)return i=!0,c;if(e===t.length-1){let T=c.tokens[0],D=c.tokens.length>1;return T.kind===8?(i=!1,{kind:"backtrack",tokens:n}):D?(i=!0,c):this.next(T)}if(e!==2)return this.next(c.tokens[0]);n=n.slice(0,n.length-c.tokens.length);let l,f=c.tokens.length-1;for(let T=0;T<=f;T++){let D=c.tokens[T];if(l=this.next(D),l.kind==="success"&&T<f)return{kind:"backtrack",tokens:c.tokens.slice(T+1)}}return l}return c.kind==="error"?(i=!1,{kind:"backtrack",tokens:n}):(c.kind==="success"&&e++,e===t.length?(i=!0,{kind:"success"}):{kind:"in-progress"})},isValid(){return i},serialize(){return t.flatMap(o=>o.serialize())}}}function Ae(r){let t=[];if(r.every(n=>n.kind==="text"&&(n.text===""||n.text===`
`)))return[];for(let n=0;n<r.length;n++){let o=r[n],s=t[t.length-1],c=n===r.length-1,l=typeof o.text=="string"&&o.text===`
`;if(!(l&&c)){if(o.kind==="text"&&s?.kind==="text"){let f=s.text??"",T=f.endsWith(`
`),D=l&&T?"":o.text??"";s.text=f+D;continue}t.push(o)}}if(t.length===1&&t[0]?.kind==="text")return(t[0]?.text??"").replace(/^\n+|\n+$/,"");let i=t[t.length-1];return i.kind==="text"&&(i.text=(i.text??"").replace(/\n+$/,"")),t}function Xe(){let r=[p(1,{length:1}),p(4),k(p(1)),p(0)],t=[],e=0,i=!1;return{next(n){t.push(n);let s=r[e].next(n);if(s.kind==="backtrack"){e++;let c=s.tokens[0];return t.pop(),this.next(c)}return s.kind==="error"?(i=!1,{kind:"backtrack",tokens:t}):(s.kind==="success"&&e++,e===r.length?(i=!0,{kind:"success"}):{kind:"in-progress"})},isValid(){return i},serialize(){return[]}}}var Fr=["access","author","default","defaultvalue","description","example","exception","file","fileoverview","kind","license","overview","return","returns","since","summary","throws","version","variation"];function Ye(){let r=[p(1,{length:1}),k(p(4)),k(p(1)),p(8),p(2,{serializable:!0}),k(p(1)),k(Mr()),k(p(1)),k(G([{symbol:p(2,{serializable:!0}),priority:0},{symbol:Ir(),priority:1}])),k(p(1)),k(p(19)),k(p(1)),k(et(e=>we({startPadding:e>0,standaloneLine:e>0})))],t=0;return{next(e){let n=r[t].next(e);if(n.kind==="backtrack"){if(t++,t===r.length)return n;if(t!==7&&t!==9)return this.next(n.tokens[0]);let o;for(let s=0;s<n.tokens.length;s++){let c=n.tokens[s];if(o=this.next(c),o.kind==="error")return n;if(o.kind==="backtrack")return{kind:"backtrack",tokens:o.tokens.concat(n.tokens.slice(s+1))}}return o}return n.kind==="error"?n:(n.kind==="success"&&t++,{kind:"in-progress"})},isValid(){return t>4},serialize(){if(t<=4)return[];let e={},i=r[4]?.serialize()[0]?.text??"",n=r[6]?.serialize()[0]?.text??"",o=r[8]?.serialize()[0],s=!!o?.optional,c=o?.default??"",l=(o?.name??"")||(o?.text??""),f=Ae(r[r.length-1]?.serialize()??[]);return Fr.includes(i)&&(f=typeof f=="string"?[l,f].join(" ").trim():[{kind:"text",text:l},...f],l=""),Array.isArray(f)&&!f.length&&(f=""),e.kind=i,l&&(e.name=l),f&&(e.text=f),n&&(e.type=n),s&&(e.optional=!0),c&&(e.default=c),[e]}}}function Mr(){let r=[],t=0,e=!0;return{next(i){return r.push(i),i.kind===9?(t++,{kind:"in-progress"}):t?i.kind===10?(t--,t>0?{kind:"in-progress"}:(e=!0,{kind:"success"})):{kind:"in-progress"}:(e=!1,{kind:"error",error:{line:i.line,start:i.start,end:i.end,message:`Expected a left curly bracket but found "${A[i.kind]}"`}})},isValid(){return e},serialize(){return e?[{kind:"text",text:r.slice(1,-1).map(i=>i.toString()).join("").trim()}]:[]}}}function Ir(){let r=[p(17),p(2,{serializable:!0}),jr(),p(16)],t=[],e=0,i=!0;return{next(n){t.push(n);let s=r[e].next(n);return s.kind==="backtrack"?(e++,i=!0,s.tokens.length>1?{kind:"backtrack",tokens:t}:this.next(s.tokens[0])):s.kind==="error"?(i=!1,{kind:"backtrack",tokens:t}):(s.kind==="success"&&e++,e===r.length?(i=!0,{kind:"success"}):{kind:"in-progress"})},isValid(){return i},serialize(){if(!i)return[];let n=r[1].serialize()[0]?.text??"",o=r[2].serialize()[0]?.text??"";return[{name:n,default:o,optional:!0}]}}}function jr(){let r=[p(18),W([{kinds:[0]},{kinds:[4,3]},{kinds:[8],canEscape:!0},{kinds:[16],canEscape:!0}])],t=[],e=0,i=!0;return{next(n){t.push(n);let s=r[e].next(n);return s.kind==="backtrack"?(e++,i=!0,s):s.kind==="error"?(i=!1,{kind:"backtrack",tokens:t}):(s.kind==="success"&&e++,e===r.length?(i=!0,{kind:"success"}):{kind:"in-progress"})},isValid(){return i},serialize(){return i?[{text:r[1].serialize()[0]?.text??""}]:[]}}}function Ze(){let r=[p(3),p(4),p(4),k(p(0)),k(Ge()),k(et(()=>G([{priority:0,symbol:Xe()},{priority:1,symbol:Ye()}]))),k(p(1,{length:1})),p(4),p(3)],t=0;return{next(e){let i=r[t];if(!i)return{kind:"error",error:{start:e.start,end:e.end,line:e.line,message:`Unexpected token found at the end of the comment: "${A[e.kind]}"`}};let n=i.next(e);if(n.kind==="error")return n;if(n.kind==="backtrack"){t++;let o=n.tokens;for(let s of o)if(n=this.next(s),n.kind==="error")return n}else n.kind==="success"&&t++;return t<r.length?{kind:"in-progress"}:{kind:"success"}},isValid(){return t===r.length},serialize(){let e=[];for(let i of r)e.push(...i.serialize());return e}}}var Rr=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","_"],Br=[" ","	","\f"],tr={["/".charCodeAt(0)]:{kind:3,multiple:!1},["*".charCodeAt(0)]:{kind:4,multiple:!1},["#".charCodeAt(0)]:{kind:15,multiple:!1},['"'.charCodeAt(0)]:{kind:6,multiple:!1},[".".charCodeAt(0)]:{kind:12,multiple:!1},["@".charCodeAt(0)]:{kind:8,multiple:!1},["`".charCodeAt(0)]:{kind:11,multiple:!1},["{".charCodeAt(0)]:{kind:9,multiple:!1},["}".charCodeAt(0)]:{kind:10,multiple:!1},["|".charCodeAt(0)]:{kind:14,multiple:!1},["~".charCodeAt(0)]:{kind:7,multiple:!1},[":".charCodeAt(0)]:{kind:13,multiple:!1},["=".charCodeAt(0)]:{kind:18,multiple:!1},["[".charCodeAt(0)]:{kind:17,multiple:!1},["]".charCodeAt(0)]:{kind:16,multiple:!1},["-".charCodeAt(0)]:{kind:19,multiple:!1},["\\".charCodeAt(0)]:{kind:5,multiple:!1},[`
`.charCodeAt(0)]:{kind:0,multiple:!1},...Rr.reduce((r,t)=>(r[t.charCodeAt(0)]={kind:2,multiple:!0},r),{}),...Br.reduce((r,t)=>(r[t.charCodeAt(0)]={kind:1,multiple:!0},r),{})};function*er(r){let t=r.trim().replace(/\r\n/g,`
`),e=t.length,i=0,n=0,o=0,s=[],c=null,l=null;for(;i<e;){let f=t.charCodeAt(i),T=t[i],D=tr[f],F=i-o;if(D!==void 0?c=new St(D.kind,T,D.multiple,n,F,F+1):c=new St(20,T,!0,n,F,F+1),i+=c.length,l&&l.multiple&&c.kind===l.kind?(l.merge(c),c=l):(l&&(yield l),s.push(c),l=c),c.kind===0&&(n++,o=i+1,s=[]),vr(s)){yield l;break}}}function vr(r){let t=r.length;return r[t-1]?.kind===3&&r[t-2]?.kind===4}function rr(r){let t=Ze(),e=null;for(let i of er(r))if(e=t.next(i),e.kind==="error")return{error:e.error,parts:[]};return e?.kind!=="success"?{parts:[],error:{line:0,start:0,end:r.length,message:"Unbalanced comment"}}:{error:null,parts:t.serialize()}}var Vt=h(g(),1),S=class{constructor(t){this._parts=[],this._parseComments(t)}hasTag(t){return this._parts.some(e=>e.kind===t)}getTag(t){return this._parts.find(e=>e.kind===t)}getAllTags(t){return this._parts.filter(e=>e.kind===t)}isIgnored(){return this._parts.some(t=>t.kind==="ignore"||t.kind==="internal"||t.kind==="private")}serialize(){return this._parts}_parseComments(t){let e=Vt.default.isSourceFile(t),i,n;if(e?(n=Vt.default.forEachChild(t,s=>s),i=t.text):(n=t,i=t.getSourceFile()?.text),!i||!n)return;let o=Vt.default.getLeadingCommentRanges(i,n.pos)??[];if(o.length){e?o=o.slice(0,o.length>1?-1:1):o=[o[o.length-1]];for(let s of o){let c=i.substring(s.pos,s.end);c=c.split(/\r\n|\n/).map(T=>T.replace(/^\s+/," ")).join(`
`);let l;try{l=rr(c)}catch{}if(!l||l.error)continue;let f=l.parts.some(T=>T.kind==="module"||T.kind==="fileoverview"||T.kind==="packageDocumentation");!e&&f||o.length===1&&e&&!f||(this._parts=this._parts.concat(l.parts))}}}};var kt=h(g(),1),E=class{constructor(t,e){this._decorator=t,this._context=e,this._jsDoc=new S(t)}getName(){let t=this._decorator.expression;return kt.default.isCallExpression(t)&&(t=t.expression),t.getText()}getTSNode(){return this._decorator}getContext(){return this._context}getJSDoc(){return this._jsDoc}hasArguments(){return!!this.getArguments().length}getArguments(){let t=this._decorator.expression;return kt.default.isCallExpression(t)?t.arguments.map(e=>O(e,this._context)):[]}getLine(){let t=this._decorator.expression;return kt.default.isCallExpression(t)?this._context.getLocation(t.expression).line:this._context.getLocation(t).line}getPath(){let t=this._decorator.expression;return kt.default.isCallExpression(t)?this._context.getLocation(t.expression).path:this._context.getLocation(t).path}serialize(){let t=this.getPath(),e=this.getLine(),i={name:this.getName()};return e!=null&&(i.source={path:t,line:e}),a(i,"jsDoc",this.getJSDoc().serialize()),a(i,"arguments",this.getArguments()),i}};var ze=h(g(),1),X=class{constructor(t,e,i){this._node=t,this._symbol=e,this._context=i,this._jsDoc=new S(this._node)}getName(){return this.isNamed()?"__namedParameter":this._symbol?this._symbol.getName()??"":this._node.name.getText()??""}getTSNode(){return this._node}getContext(){return this._context}getLine(){return this._context.getLinePosition(this._node)}getType(){let t=this._context.getTypeChecker(),e=this._symbol?t.getTypeOfSymbolAtLocation(this._symbol,this._node):null;return e?u(e,this._context):ct(this._node,this._context)}getDefault(){return O(this._node.initializer,this._context)}getDecorators(){return M(this._node).map(t=>new E(t,this._context))}getNamedElements(){if(!this.isNamed())return[];let t=this._node.name.elements??[],e=[];for(let i of t)e.push(new vt(i,this._context));return e}getJSDoc(){return this._jsDoc}isNamed(){return ze.default.isObjectBindingPattern(this._node.name)}isRest(){return!!(this._node.dotDotDotToken&&this._node.type?.kind===ze.default.SyntaxKind.ArrayType)}isOptional(){return!!this._context.getTypeChecker().isOptionalParameter(this._node)}serialize(){let t={name:this.getName(),type:this.getType().serialize(),line:this.getLine()};return a(t,"decorators",this.getDecorators().map(e=>e.serialize())),a(t,"jsDoc",this.getJSDoc().serialize()),a(t,"optional",this.isOptional()),a(t,"rest",this.isRest()),a(t,"named",this.isNamed()),a(t,"default",this.getDefault()),a(t,"elements",this.getNamedElements().map(e=>e.serialize())),t}};var ir=h(g(),1),Jt=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Function}getText(){return this._context.getTypeChecker().typeToString(this._type)}getTypeParameters(){return this._node.typeParameters?.map(t=>new I(t,this._context))??[]}getParameters(){return(this._node.parameters??[]).map(t=>{let e=this._context.getSymbol(t),i=e?.getDeclarations()?.find(n=>ir.default.isParameter(n));return new X(i??t,e,this._context)})}getReturnType(){return u(this._node.type,this._context)}serialize(){let t={text:this.getText(),kind:this.getKind(),return:this.getReturnType().serialize()};return a(t,"typeParameters",this.getTypeParameters().map(e=>e.serialize())),a(t,"parameters",this.getParameters().map(e=>e.serialize())),t}};var Ut=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Optional}getText(){return`${this.getElementType().getText()}?`}getElementType(){return u(this._node.type,this._context)}serialize(){return{text:this.getText(),kind:this.getKind(),elementType:this.getElementType().serialize()}}};var $;(function(r){r.public="public",r.private="private",r.protected="protected"})($||($={}));var x=h(g(),1);function qt(r){let t=x.default.getCombinedModifierFlags(r);return B(t,x.default.ModifierFlags.Private)||r.name&&x.default.isPrivateIdentifier(r.name)?$.private:B(t,x.default.ModifierFlags.Protected)?$.protected:$.public}function Wt(r,t){let e=t.getTypeChecker(),i=e.getTypeAtLocation(r).getSymbol(),o=(i&&e.getDeclaredTypeOfSymbol(i))?.getProperties()??[];return or(r,o,t)}function nr(r,t){let e=t.getTypeChecker(),i=e.getTypeAtLocation(r).getSymbol(),n=i&&e.getTypeOfSymbolAtLocation(i,r),o=(n&&e.getPropertiesOfType(n))??[];return or(r,o,t)}function or(r,t,e){let i=[],n=e.getTypeChecker(),o=e.getSystem();for(let s of t){let c=s.getDeclarations()?.[0],l=c?.getSourceFile()?.fileName??"",f=l?o.realpath(l):"",T=n.getTypeOfSymbolAtLocation(s,r);if(B(s.flags,x.default.SymbolFlags.ModuleMember)||B(s.flags,x.default.SymbolFlags.Prototype)||K(f))continue;let D=Vr(r,s,n);i.push({inherited:D,symbol:s,type:T,overrides:Jr(c)})}return i}function Vr(r,t,e){let n=e.getTypeAtLocation(r).getBaseTypes()?.[0];if(!n)return!1;let o=n.getSymbol()?.getDeclarations()?.slice()??[],s=o.flatMap(c=>x.default.isClassDeclaration(c)?c.members.filter(x.default.isConstructorDeclaration):[]);return o.push(...s),o.some(c=>t.getDeclarations()?.some(l=>l.parent===c))}function sr(r){return r?x.default.isMethodSignature(r)||x.default.isPropertySignature(r)||x.default.isPropertyDeclaration(r)||x.default.isMethodDeclaration(r):!1}function $t(r){return!r||!x.default.canHaveModifiers(r)||x.default.isVariableStatement(r)||x.default.isImportDeclaration(r)?!1:B(x.default.getCombinedModifierFlags(r),x.default.ModifierFlags.Readonly)}function Jr(r){return!r||!x.default.canHaveModifiers(r)||x.default.isVariableStatement(r)||x.default.isImportDeclaration(r)?!1:B(x.default.getCombinedModifierFlags(r),x.default.ModifierFlags.Override)}function Nt(r){return!!r&&B(r.flags,x.default.SymbolFlags.Optional)}function lt(r){return!r||!x.default.canHaveModifiers(r)||x.default.isVariableStatement(r)||x.default.isImportDeclaration(r)?!1:B(x.default.getCombinedModifierFlags(r),x.default.ModifierFlags.Static)}function mt(r){return!r||!x.default.canHaveModifiers(r)||x.default.isVariableStatement(r)||x.default.isImportDeclaration(r)?!1:B(x.default.getCombinedModifierFlags(r),x.default.ModifierFlags.Abstract)}function B(r,t){return(r&t)===t}var Y=h(g(),1);function ar(r){return r?.statements.find(Y.default.isReturnStatement)}function rt(r){return r!=null&&Y.default.isArrowFunction(r)}function it(r){return r!=null&&Y.default.isFunctionExpression(r)}function Ht(r){if(r==null)return!1;if(Y.default.isFunctionDeclaration(r))return!0;if(!Y.default.isVariableStatement(r))return!1;let t=r.declarationList.declarations[0];if(!t)return!1;let e=t.initializer;return!!e&&(Y.default.isArrowFunction(e)||Y.default.isFunctionExpression(e))}var H;(function(r){r.Property="Property",r.Method="Method",r.IndexSignature="IndexSignature"})(H||(H={}));var ut=h(g(),1),Z=class{constructor(t,e,i){this._node=t,this._nodeContext=e,this._context=i;let[n,o]=this._getAccessors();n?this._jsDoc=new S(n):o?this._jsDoc=new S(o):this._jsDoc=new S(this._node)}getName(){let[t,e]=this._getAccessors();return t?t.name.getText()??"":e?e.name.getText()??"":ut.default.isIdentifier(this._node.name)?this._node.name.escapedText??"":this._node.name.getText()??""}getKind(){return H.Property}getTSNode(){return this._node}getContext(){return this._context}getLine(){let[t,e]=this._getAccessors();return t?this._context.getLinePosition(t):e?this._context.getLinePosition(e):this._context.getLocation(this._node).line}getType(){let t=ut.default.getJSDocType(this._node);return t?u(t,this._context):this._nodeContext?.type?u(this._nodeContext.type,this._context):this._node.type?u(this._node.type,this._context):ct(this._node,this._context)}getDefault(){let t=this.getJSDoc().getTag("default")?.text,[e,i]=this._getAccessors();if(t)return t;if(e)return O(ar(e.body)?.expression,this._context);if(!i)return O(this._node.initializer,this._context)}getModifier(){return ut.default.isClassElement(this._node)?qt(this._node):null}getJSDoc(){return this._jsDoc}getDecorators(){let[t,e]=this._getAccessors();return t?M(t).map(i=>new E(i,this._context)):e?M(e).map(i=>new E(i,this._context)):M(this._node).map(i=>new E(i,this._context))}isOptional(){if(this._nodeContext)return Nt(this._nodeContext.symbol);let t=this._context.getSymbol(this._node);return Nt(t)}isStatic(){let[t,e]=this._getAccessors();return t?lt(t):e?lt(e):lt(this._node)}isReadOnly(){let t=!!this.getJSDoc().getTag("readonly"),[e,i]=this._getAccessors();return t||!!e&&!i||$t(this._node)}isWriteOnly(){let[t,e]=this._getAccessors();return!t&&!!e}isAbstract(){return mt(this._node)}isInherited(){return!this._nodeContext?.overrides&&!!this._nodeContext?.inherited}overrides(){return!!this._nodeContext?.overrides}serialize(){let t={name:this.getName(),kind:this.getKind(),type:this.getType().serialize()};return a(t,"line",this.getLine()),a(t,"optional",this.isOptional()),a(t,"jsDoc",this.getJSDoc().serialize()),a(t,"decorators",this.getDecorators().map(e=>e.serialize())),a(t,"default",this.getDefault()),a(t,"static",this.isStatic()),a(t,"readOnly",this.isReadOnly()),a(t,"abstract",this.isAbstract()),a(t,"override",this.overrides()),a(t,"inherited",this.isInherited()),a(t,"writeOnly",this.isWriteOnly()),t}_getAccessors(){let t=this._nodeContext?.symbol?.getDeclarations()??[],e=t.find(ut.default.isGetAccessor),i=t.find(ut.default.isSetAccessor);return[e,i]}};var Ke=h(g(),1);function cr(r){return!!(r&&Ke.default.isModuleDeclaration(r)&&r.body&&Ke.default.isModuleBlock(r.body))}function Ur(r){let t=[r.name.getText()??""],e=r;for(;cr(e.parent?.parent);)t.push(e.parent?.parent?.name.getText()??""),e=e.parent?.parent;return t.reverse().join(".")}function j(r){let t=r.parent?.parent;for(;t&&!cr(t);)t=t.parent;return t?Ur(t):""}var lr=h(g(),1),nt=class{constructor(t,e){this._node=t,this._context=e,this._jsDoc=new S(this._node.getDeclaration())}getContext(){return this._context}getTSNode(){return this._node}getLine(){return this._context.getLinePosition(this._node.getDeclaration())}getPath(){let t=this._node.getDeclaration().getSourceFile().fileName??"";return t&&this._context.getSystem().realpath(t)}getJSDoc(){return this._jsDoc}getReturnType(){let t=lr.default.getJSDocReturnType(this._node.getDeclaration());if(t)return u(t,this._context);let e=this._context.getTypeChecker().getReturnTypeOfSignature(this._node);return u(e,this._context)}getTypeParameters(){return this._node.getDeclaration().typeParameters?.map(t=>new I(t,this._context))??[]}getParameters(){let t=this._node.parameters??[],e=this._node.getDeclaration().parameters??[],i=[];for(let n=0;n<e.length;n++){let o=e[n],s=new X(o,t[n]??null,this._context);s.getJSDoc().isIgnored()||i.push(s)}return i}getParameterByName(t){return this.getParameters().find(e=>e.getName()===t)??null}serialize(){let t={return:{type:this.getReturnType().serialize()}};return a(t,"line",this.getLine()),a(t,"jsDoc",this.getJSDoc().serialize()),a(t,"typeParameters",this.getTypeParameters().map(e=>e.serialize())),a(t,"parameters",this.getParameters().map(e=>e.serialize())),t}};var N=h(g(),1),U=class{constructor(t,e,i){this._jsDoc=null,this._node=t,this._member=e,this._context=i,(N.default.isVariableStatement(t)||N.default.isPropertyDeclaration(t)||N.default.isPropertySignature(t))&&(this._jsDoc=new S(t))}getName(){return N.default.isFunctionDeclaration(this._node)||N.default.isMethodDeclaration(this._node)||N.default.isMethodSignature(this._node)||N.default.isPropertyDeclaration(this._node)||N.default.isPropertySignature(this._node)?this._node.name?.getText()??"":N.default.isVariableStatement(this._node)?this._node.declarationList.declarations.find(e=>rt(e.initializer)||it(e.initializer))?.name.getText()??"":""}getNodeType(){return _.Declaration}getContext(){return this._context}getKind(){return sr(this._node)?H.Method:b.Function}getTSNode(){return this._node}getLine(){return this._context.getLocation(this._node).line}getNamespace(){return j(this._node)}getJSDoc(){return this._jsDoc}getDecorators(){return M(this._node).map(t=>new E(t,this._context))}getDecoratorWithName(t){return this.getDecorators().find(e=>e.getName()===t)??null}getSignatures(){let t=this._getFunctionNode(),e=this._context.getTypeChecker(),i=this._member?.type;if(!i){let n=t&&this._context.getSymbol(t);i=t&&n&&e.getTypeOfSymbolAtLocation(n,t.getSourceFile())}if(!i){let n=t&&e.getSignatureFromDeclaration(t);return n?[new nt(n,this._context)]:[]}return i.getNonNullableType().getCallSignatures().map(n=>new nt(n,this._context))}getModifier(){return N.default.isClassElement(this._node)?qt(this._node):null}isGenerator(){let t=this._getFunctionNode();return!!t&&!N.default.isMethodSignature(t)&&!N.default.isFunctionTypeNode(t)&&!!t.asteriskToken}isAsync(){let t=this._getFunctionNode();return t?xt(t).some(e=>e.kind===N.default.SyntaxKind.AsyncKeyword):!1}isOptional(){return Nt(this._member?.symbol)}isStatic(){return lt(this._node)}isReadOnly(){return $t(this._node)}isAbstract(){return mt(this._node)}isInherited(){return!this._member?.overrides&&!!this._member?.inherited}isArrowFunctionOrFunctionExpression(){return N.default.isVariableStatement(this._node)?this._node.declarationList.declarations.some(t=>rt(t.initializer)||it(t.initializer)):!1}overrides(){return!!this._member?.overrides}serialize(){let t={name:this.getName(),kind:this.getKind(),signatures:this.getSignatures().map(e=>e.serialize())};return a(t,"namespace",this.getNamespace()),a(t,"jsDoc",this.getJSDoc()?.serialize()),a(t,"decorators",this.getDecorators().map(e=>e.serialize())),a(t,"async",this.isAsync()),a(t,"generator",this.isGenerator()),a(t,"static",this.isStatic()),a(t,"readOnly",this.isReadOnly()),a(t,"abstract",this.isAbstract()),a(t,"override",this.overrides()),a(t,"inherited",this.isInherited()),a(t,"optional",this.isOptional()),t}_getFunctionNode(){let t=this._node;return N.default.isVariableStatement(this._node)&&(t=this._node.declarationList.declarations.find(i=>rt(i.initializer)||it(i.initializer))?.initializer),N.default.isPropertySignature(this._node)&&(t=this._node.type&&N.default.isFunctionTypeNode(this._node.type)?this._node.type:null),N.default.isPropertyDeclaration(this._node)&&(t=this._node.initializer),t==null||!N.default.isFunctionDeclaration(t)&&!N.default.isArrowFunction(t)&&!N.default.isFunctionExpression(t)&&!N.default.isMethodSignature(t)&&!N.default.isMethodDeclaration(t)&&!N.default.isFunctionTypeNode(t)?null:t}};var Ee=h(g(),1),Qt=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getText(){try{return this._node.getText()??""}catch{return this._context.getTypeChecker().typeToString(this._type)??""}}getKind(){return m.ObjectLiteral}getProperties(){let t=this._context.getTypeChecker(),e=this._node.members??[],i=[];for(let n of e){if(!Ee.default.isPropertySignature(n))continue;let o=this._context.getSymbol(n),s=o&&t.getTypeOfSymbolAtLocation(o,this._node);i.push(new Z(n,{symbol:o,type:s},this._context))}return i}getMethods(){let t=this._context.getTypeChecker(),e=this._node.members??[],i=[];for(let n of e){if(!Ee.default.isMethodSignature(n))continue;let o=this._context.getSymbol(n),s=o&&t.getTypeOfSymbolAtLocation(o,this._node);i.push(new U(n,{symbol:o,type:s},this._context))}return i}serialize(){let t={text:this.getText(),kind:this.getKind()};return a(t,"properties",this.getProperties().map(e=>e.serialize())),a(t,"methods",this.getMethods().map(e=>e.serialize())),t}};var pt=h(g(),1),dt=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Unknown}getText(){let t={[pt.default.SyntaxKind.AnyKeyword]:"any",[pt.default.SyntaxKind.NeverKeyword]:"never",[pt.default.SyntaxKind.ObjectKeyword]:"object",[pt.default.SyntaxKind.UnknownKeyword]:"unknown",[pt.default.SyntaxKind.IntrinsicKeyword]:"intrinsic"},e=this._node&&t[this._node.kind];return e||this._context.getTypeChecker().typeToString(this._type)}serialize(){return{text:this.getText(),kind:this.getKind()}}};var v=h(g(),1),Gt=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Literal}getText(){switch(this._node.literal.kind){case v.default.SyntaxKind.TrueKeyword:return"true";case v.default.SyntaxKind.FalseKeyword:return"false";case v.default.SyntaxKind.NullKeyword:return"null";case v.default.SyntaxKind.PrefixUnaryExpression:{let e=this._node.literal.operand;return this._getUnaryExpressionText(e)}case v.default.SyntaxKind.NumericLiteral:return this._node.literal.text;case v.default.SyntaxKind.StringLiteral:return`"${this._node.literal.text}"`;case v.default.SyntaxKind.BigIntLiteral:return this._node.literal.text;case v.default.SyntaxKind.NoSubstitutionTemplateLiteral:return this._node.literal.text;default:return""}}serialize(){return{text:this.getText(),kind:this.getKind()}}_getUnaryExpressionText(t){switch(t.kind){case v.default.SyntaxKind.NumericLiteral:return this._node.literal.getText();case v.default.SyntaxKind.BigIntLiteral:return this._node.literal.getText().replace("n","");default:return""}}};var Xt=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Mapped}getText(){return this._context.getTypeChecker().typeToString(this._type)}serialize(){return{text:this.getText(),kind:this.getKind()}}};var Yt=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i,this._loc=i.getLocation(t.exprName)}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Query}getPath(){return this._loc.path}getLine(){return this._loc.line}getText(){return this._context.getTypeChecker().typeToString(this._type)}getTypeArguments(){return(this._node.typeArguments??[]).map(t=>u(t,this._context))}serialize(){let t={text:this.getText(),kind:this.getKind()},e={},i=this.getPath(),n=this.getLine();return!K(i)&&n!=null&&(e.line=n,e.path=i),a(t,"source",e),a(t,"typeArguments",this.getTypeArguments().map(o=>o.serialize())),t}};var Zt=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Infer}getText(){let t=this.getConstraint(),e=this._node.typeParameter.name.text;return t?`infer ${e} extends ${t.getText()}`:`infer ${e}`}getConstraint(){let t=this._node.typeParameter.constraint;return t?u(t,this._context):null}serialize(){let t={text:this.getText(),kind:this.getKind()};return a(t,"constraint",this.getConstraint()?.serialize()),t}};var te=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Union}getText(){try{return this._node.getText()??""}catch{return this._context.getTypeChecker().typeToString(this._type)??""}}getElements(){return this._node.types.map(t=>u(t,this._context))}serialize(){return{text:this.getText(),kind:this.getKind(),elements:this.getElements().map(t=>t.serialize())}}};var ee=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Array}getText(){return`${this.getElementType().getText()}[]`}getElementType(){return u(this._node.elementType,this._context)}serialize(){return{text:this.getText(),kind:this.getKind(),elementType:this.getElementType().serialize()}}};var re=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Tuple}getText(){return`[${this.getElements().map(t=>t.getText()).join(", ")}]`}getElements(){return this._node.elements.map(t=>u(t,this._context))}serialize(){return{text:this.getText(),kind:this.getKind(),elements:this.getElements().map(t=>t.serialize())}}};var ie=class{constructor(t,e,i){this._node=t,this._type=e,this._context=i}getContext(){return this._context}getTSNode(){return this._node}getTSType(){return this._type}getKind(){return m.Rest}getText(){return`...${this.getElementType().getText()}`}getElementType(){return u(this._node.type,this._context)}serialize(){return{text:this.getText(),kind:this.getKind(),elementType:this.getElementType().serialize()}}};var y=h(g(),1),qr={[y.default.SyntaxKind.TypeLiteral]:(r,t,e)=>new Qt(r,t,e),[y.default.SyntaxKind.ConditionalType]:(r,t,e)=>new It(r,t,e),[y.default.SyntaxKind.UnionType]:(r,t,e)=>new te(r,t,e),[y.default.SyntaxKind.IntersectionType]:(r,t,e)=>new Mt(r,t,e),[y.default.SyntaxKind.ArrayType]:(r,t,e)=>new ee(r,t,e),[y.default.SyntaxKind.TypeReference]:(r,t,e)=>new jt(r,t,e),[y.default.SyntaxKind.TupleType]:(r,t,e)=>new re(r,t,e),[y.default.SyntaxKind.NamedTupleMember]:(r,t,e)=>new Ft(r,t,e),[y.default.SyntaxKind.TypeOperator]:(r,t,e)=>new Bt(r,t,e),[y.default.SyntaxKind.LiteralType]:(r,t,e)=>new Gt(r,t,e),[y.default.SyntaxKind.IndexedAccessType]:(r,t,e)=>new Ot(r,t,e),[y.default.SyntaxKind.FunctionType]:(r,t,e)=>new Jt(r,t,e),[y.default.SyntaxKind.TypeQuery]:(r,t,e)=>new Yt(r,t,e),[y.default.SyntaxKind.InferType]:(r,t,e)=>new Zt(r,t,e),[y.default.SyntaxKind.MappedType]:(r,t,e)=>new Xt(r,t,e),[y.default.SyntaxKind.OptionalType]:(r,t,e)=>new Ut(r,t,e),[y.default.SyntaxKind.TypePredicate]:(r,t,e)=>new Rt(r,t,e),[y.default.SyntaxKind.RestType]:(r,t,e)=>new ie(r,t,e),[y.default.SyntaxKind.TemplateLiteralType]:(r,t,e)=>new Lt(r,t,e),[y.default.SyntaxKind.AnyKeyword]:(r,t,e)=>new L(r,t,e),[y.default.SyntaxKind.BigIntKeyword]:(r,t,e)=>new L(r,t,e),[y.default.SyntaxKind.BooleanKeyword]:(r,t,e)=>new L(r,t,e),[y.default.SyntaxKind.NeverKeyword]:(r,t,e)=>new L(r,t,e),[y.default.SyntaxKind.NumberKeyword]:(r,t,e)=>new L(r,t,e),[y.default.SyntaxKind.ObjectKeyword]:(r,t,e)=>new L(r,t,e),[y.default.SyntaxKind.StringKeyword]:(r,t,e)=>new L(r,t,e),[y.default.SyntaxKind.SymbolKeyword]:(r,t,e)=>new L(r,t,e),[y.default.SyntaxKind.UndefinedKeyword]:(r,t,e)=>new L(r,t,e),[y.default.SyntaxKind.VoidKeyword]:(r,t,e)=>new L(r,t,e),[y.default.SyntaxKind.UnknownKeyword]:(r,t,e)=>new dt(r,t,e)};function u(r,t){let e=t.getTypeChecker(),i,n;if("kind"in r)i=r,n=e.getTypeFromTypeNode(r);else if(i=e.typeToTypeNode(r,void 0,y.default.NodeBuilderFlags.IgnoreErrors)??null,n=r,!i)return new dt(null,r,t);y.default.isParenthesizedTypeNode(i)&&(i=i.type,n=e.getTypeFromTypeNode(i));let o=qr[i.kind];return o?o(i,n,t):new dt(i,n,t)}function ct(r,t){let e=t.getTypeChecker(),i=y.default.getJSDocType(r);if(i)return u(i,t);let n=e.getTypeAtLocation(r);return Wr(r)||(n=e.getBaseTypeOfLiteralType(n)),u(n,t)}function Wr(r){return y.default.hasOnlyExpressionInitializer(r)&&!!r.initializer&&(y.default.isAsExpression(r.initializer)||y.default.isTypeAssertionExpression(r))}var I=class{constructor(t,e){this._node=t,this._context=e}getContext(){return this._context}getName(){return this._node.name.getText()??""}getTSNode(){return this._node}getLine(){return this._context.getLinePosition(this._node)}getDefault(){return this._node.default?u(this._node.default,this._context):null}getConstraint(){return this._node.constraint?u(this._node.constraint,this._context):null}hasDefault(){return!!this._node.default}serialize(){let t={name:this.getName()};return a(t,"default",this.getDefault()?.serialize()),a(t,"constraint",this.getConstraint()?.serialize()),t}};var ne=class{constructor(t,e){this._node=t,this._context=e,this._jsDoc=new S(this._node)}getContext(){return this._context}getTSNode(){return this._node}getNodeType(){return _.Declaration}getKind(){return b.TypeAlias}getName(){return this._node.name.getText()??""}getLine(){return this._context.getLinePosition(this._node)}getNamespace(){return j(this._node)}getJSDoc(){return this._jsDoc}getValue(){return u(this._node.type,this._context)}getTypeParameters(){return this._node.typeParameters?.map(t=>new I(t,this._context))??[]}serialize(){let t={name:this.getName(),kind:this.getKind(),line:this.getLine(),value:this.getValue().serialize()};return a(t,"namespace",this.getNamespace()),a(t,"jsDoc",this.getJSDoc().serialize()),a(t,"typeParameters",this.getTypeParameters().map(e=>e.serialize())),t}};var mr=h(g(),1),ur={isNode:r=>mr.default.isTypeAliasDeclaration(r),create:(r,t)=>[t.registerReflectedNode(r,()=>new ne(r,t))]};var pr=h(g(),1),ht=class{constructor(t,e){this._node=t,this._context=e,this._loc=e.getLocation(t.expression)}getContext(){return this._context}getTSNode(){return this._node}getName(){return this._node.expression.getText()}getTypeArguments(){return(this._node.typeArguments??[]).map(t=>u(t,this._context))}getPath(){return this._loc.path}getLine(){return this._loc.line}serialize(){let t={name:this.getName(),kind:this._loc.symbol&&B(this._loc.symbol.flags,pr.default.SymbolFlags.Class)?b.Class:b.Interface},e={},i=this.getPath(),n=this.getLine();return!K(i)&&n!=null&&(e.line=n,e.path=i),a(t,"source",e),a(t,"typeArguments",this.getTypeArguments().map(o=>o.serialize())),t}};var oe=class{constructor(t,e,i){this._node=t,this._member=e,this._context=i,this._parameter=this._getParameter(),this._jsDoc=new S(this._node)}getName(){return this._parameter?.getName()??""}getContext(){return this._context}getKind(){return H.IndexSignature}getTSNode(){return this._node}getJSDoc(){return this._jsDoc}getLine(){return this._context.getLinePosition(this._node)}getType(){return u(this._node.type,this._context)}getIndexType(){return this._parameter?.getType()??null}isOptional(){return!!this._parameter?.isOptional()}serialize(){let t={name:this.getName(),line:this.getLine(),kind:H.IndexSignature,type:this.getType().serialize()};return a(t,"indexType",this.getIndexType()?.serialize()),a(t,"optional",this.isOptional()),a(t,"jsDoc",this.getJSDoc().serialize()),t}_getParameter(){let t=this._member.type?.getCallSignatures()?.[0],e=this._node.parameters??[],i=t?.parameters??[],n=e[0],o=i[0]??null;return n?new X(n,o,this._context):null}};var q=h(g(),1),se=class{constructor(t,e){this._members=[],this._heritage=[],this._node=t,this._context=e,this._members=Wt(this._node,this._context),this._jsDoc=new S(this._node),this._heritage=(this._node.heritageClauses??[]).flatMap(i=>i.types.map(n=>new ht(n,this._context)))}getName(){return this._node.name.getText()??""}getNodeType(){return _.Declaration}getKind(){return b.Interface}getContext(){return this._context}getTSNode(){return this._node}getLine(){return this._context.getLinePosition(this._node)}getIndexSignature(){let t=this._context.getTypeChecker(),e=this._context.getSymbol(this._node)?.members?.get("__index"),i=e?.getDeclarations()?.[0];if(!i||!q.default.isIndexSignatureDeclaration(i))return null;let n={symbol:e,type:t.getTypeOfSymbolAtLocation(e,this._node)},o=()=>new oe(i,n,this._context);return this._context.registerReflectedNode(i,o)}getProperties(){let t=[];for(let e of this._members){let{symbol:i}=e,n=i?.getDeclarations()?.[0];if(!n)continue;let o=q.default.isPropertySignature(n)&&n.type&&q.default.isFunctionTypeNode(n.type);if((q.default.isPropertySignature(n)||q.default.isGetAccessor(n)||q.default.isSetAccessor(n))&&!o){let s=new Z(n,e,this._context);t.push(s)}}return t}getPropertyWithName(t){return this.getProperties().find(e=>e.getName()===t)??null}getMethods(){let t=[];for(let e of this._members){let{symbol:i}=e,n=i?.getDeclarations()?.[0];if(!n)continue;let o=q.default.isPropertySignature(n)&&n.type&&q.default.isFunctionTypeNode(n.type);if(q.default.isMethodSignature(n)||o){let s=new U(n,e,this._context);t.push(s)}}return t}getMethodWithName(t){return this.getMethods().find(e=>e.getName()===t)??null}getTypeParameters(){return(this._node.typeParameters??[]).map(t=>new I(t,this._context))}getNamespace(){return j(this._node)}getJSDoc(){return this._jsDoc}getHeritage(){return this._heritage}serialize(){let t={name:this.getName(),kind:this.getKind(),line:this.getLine()};return a(t,"heritage",this.getHeritage().map(e=>e.serialize())),a(t,"typeParameters",this.getTypeParameters().map(e=>e.serialize())),a(t,"jsDoc",this.getJSDoc().serialize()),a(t,"namespace",this.getNamespace()),a(t,"indexSignature",this.getIndexSignature()?.serialize()),a(t,"properties",this.getProperties().map(e=>e.serialize())),a(t,"methods",this.getMethods().map(e=>e.serialize())),t}};var dr=h(g(),1),hr={isNode:r=>dr.default.isInterfaceDeclaration(r),create:(r,t)=>[t.registerReflectedNode(r,()=>new se(r,t))]};var gr={isNode:Ht,create:(r,t)=>[t.registerReflectedNode(r,()=>new U(r,null,t))]};var ae=class{constructor(t,e,i){this._node=t,this._declaration=e,this._context=i,this._jsDoc=new S(this._node)}getContext(){return this._context}getName(){return this._declaration.name.getText()??""}getTSNode(){return this._declaration}getNodeType(){return _.Declaration}getKind(){return b.Variable}getDecorators(){return M(this._node).map(t=>new E(t,this._context))}getLine(){return this._context.getLinePosition(this._node)}getType(){return ct(this._declaration,this._context)}getValue(){return this.getJSDoc().getTag("default")?.text??O(this._declaration.initializer,this._context)}getNamespace(){return j(this._node)}getJSDoc(){return this._jsDoc}serialize(){let t=this.getValue(),e={name:this.getName(),kind:this.getKind(),line:this.getLine(),type:this.getType().serialize()};return t!==""&&(e.default=t),a(e,"jsDoc",this.getJSDoc().serialize()),a(e,"decorators",this.getDecorators().map(i=>i.serialize())),a(e,"namespace",this.getNamespace()),e}};var ce=h(g(),1);function le(r){if(ce.default.isClassDeclaration(r))return!0;if(!ce.default.isVariableStatement(r))return!1;let t=r.declarationList.declarations[0];if(!t)return!1;let e=t.initializer;return!!e&&ce.default.isClassExpression(e)}var fr=h(g(),1),yr={isNode:r=>fr.default.isVariableStatement(r)&&!Ht(r)&&!le(r),create:(r,t)=>{let e=[];for(let i of r.declarationList.declarations){let n=()=>new ae(r,i,t),o=t.registerReflectedNode(i,n);e.push(o)}return e}};var z;(function(r){r.Default="Default",r.Named="Named",r.Namespace="Namespace",r.SideEffect="SideEffect",r.Dynamic="Dynamic"})(z||(z={}));var me=class{constructor(t,e){this._node=t,this._context=e}getTSNode(){return this._node}getNodeType(){return _.Import}getKind(){return z.SideEffect}getContext(){return this._context}getImportPath(){return this._node.moduleSpecifier.text??""}isBareModuleSpecifier(){return Q(this.getImportPath())}serialize(){let t={kind:z.SideEffect,importPath:this.getImportPath()};return a(t,"bareModuleSpecifier",this.isBareModuleSpecifier()),t}};var ue=class{constructor(t,e){this._node=t,this._context=e}getTSNode(){return this._node}getContext(){return this._context}getName(){return(this._node.importClause?.namedBindings).name.escapedText??""}getNodeType(){return _.Import}getKind(){return z.Namespace}getImportPath(){return this._node.moduleSpecifier.text??""}getOriginalPath(){let t=(this._node.importClause?.namedBindings).name,e=this.getImportPath(),i=this._context.getCommandLine().options;return at(e,i)?st(t,this._context):e}isTypeOnly(){return!!this._node.importClause?.isTypeOnly}isBareModuleSpecifier(){return Q(this.getImportPath())}serialize(){let t=this.getOriginalPath(),e={name:this.getName(),kind:this.getKind(),importPath:this.getImportPath()};return t!==e.importPath&&(e.originalPath=t),a(e,"typeOnly",this.isTypeOnly()),a(e,"bareModuleSpecifier",this.isBareModuleSpecifier()),e}};var pe=class{constructor(t,e){this._node=t,this._context=e}getName(){return this._node.importClause?.name?.escapedText??""}getTSNode(){return this._node}getContext(){return this._context}getNodeType(){return _.Import}getKind(){return z.Default}getReferenceName(){return this.getName()}getImportPath(){return this._node.moduleSpecifier.text??""}getOriginalPath(){let t=this._node.importClause?.name,e=this.getImportPath(),i=this._context.getCommandLine().options;return at(e,i)?st(t,this._context):e}isTypeOnly(){return!!this._node.importClause?.isTypeOnly}isBareModuleSpecifier(){return Q(this.getImportPath())}serialize(){let t=this.getOriginalPath(),e={name:this.getName(),kind:this.getKind(),importPath:this.getImportPath()};return t!==e.importPath&&(e.originalPath=t),a(e,"typeOnly",this.isTypeOnly()),a(e,"bareModuleSpecifier",this.isBareModuleSpecifier()),e}};var de=class{constructor(t,e,i){this._node=t,this._element=e,this._context=i}getTSNode(){return this._node}getContext(){return this._context}getName(){return this._element.name.escapedText??""}getReferenceName(){return this._element.propertyName?.escapedText??this.getName()}getNodeType(){return _.Import}getKind(){return z.Named}getImportPath(){return this._node.moduleSpecifier.text??""}getOriginalPath(){let t=this.getImportPath(),e=this._context.getCommandLine().options;return at(t,e)?st(this._element.name,this._context):t}isTypeOnly(){return!!this._node.importClause?.isTypeOnly}isBareModuleSpecifier(){return Q(this.getImportPath())}serialize(){let t=this.getOriginalPath(),e=this.getReferenceName(),i={name:this.getName(),kind:this.getKind(),importPath:this.getImportPath()};return e!==i.name&&(i.referenceName=e),t!==i.importPath&&(i.originalPath=t),a(i,"typeOnly",this.isTypeOnly()),a(i,"bareModuleSpecifier",this.isBareModuleSpecifier()),i}};var _r=h(g(),1),he={isNode:r=>_r.default.isImportDeclaration(r),create:(r,t)=>{let e=[];return Ue(r)&&e.push(new pe(r,t)),We(r)&&e.push(new me(r,t)),be(r)&&((r.importClause?.namedBindings).elements??[]).forEach(n=>e.push(new de(r,n,t))),qe(r)&&e.push(new ue(r,t)),e}};function xr(r,t){let e=t.getTypeChecker(),i=e.getTypeAtLocation(r),n=i.isClassOrInterface()?e.getBaseTypes(i):[];for(let o of n)if(Tr(o,e))return!0;return!1}function Tr(r,t){return r.getSymbol()?.getName()==="HTMLElement"?!0:r.isClassOrInterface()?t.getBaseTypes(r).some(i=>Tr(i,t)):!1}var V=h(g(),1),ge=class{constructor(t,e){this._instanceMembers=[],this._staticMembers=[],this._heritage=[],this._node=t,this._context=e,this._jsDoc=new S(t);let i=this._getClassNode();i&&(this._instanceMembers=Wt(i,this._context),this._staticMembers=nr(i,this._context),this._heritage=(i.heritageClauses??[]).flatMap(n=>n.types.map(o=>new ht(o,this._context))))}getName(){return V.default.isVariableStatement(this._node)?this._node.declarationList.declarations[0]?.name.getText()??"":this._node.name?.getText()??""}getNodeType(){return _.Declaration}getKind(){return b.Class}getContext(){return this._context}getTSNode(){return this._node}getLine(){return this._context.getLinePosition(this._node)}getNamespace(){return j(this._node)}getJSDoc(){return this._jsDoc}getDecorators(){return M(this._node).map(t=>new E(t,this._context))}getDecoratorWithName(t){return this.getDecorators().find(e=>e.getName()===t)??null}getConstructors(){let t=this._getClassNode();if(!t)return[];let e=this._context.getTypeChecker(),i=e.getTypeAtLocation(t).getSymbol(),o=(i&&e.getTypeOfSymbolAtLocation(i,t))?.getConstructSignatures()??[],s=[];for(let c of o){if(!c.getDeclaration())continue;let l=new nt(c,this._context),f=l.getPath();f&&!K(f)&&s.push(l)}return s}getProperties(){return this._getPropertyMembers(this._instanceMembers)}getStaticProperties(){return this._getPropertyMembers(this._staticMembers)}getPropertyWithName(t){return this.getProperties().find(e=>e.getName()===t)??null}getMethods(){return this._getMethodMembers(this._instanceMembers)}getStaticMethods(){return this._getMethodMembers(this._staticMembers)}getMethodWithName(t){return this.getMethods().find(e=>e.getName()===t)??null}getTypeParameters(){let t=this._getClassNode();return t?t.typeParameters?.map(e=>new I(e,this._context))??[]:[]}getHeritage(){return this._heritage}isCustomElement(){let t=this._getClassNode();return t?xr(t,this._context):!1}isAbstract(){let t=this._getClassNode();return t?mt(t):!1}serialize(){let t={name:this.getName(),kind:this.getKind(),line:this.getLine()};return a(t,"constructors",this.getConstructors().map(e=>e.serialize())),a(t,"decorators",this.getDecorators().map(e=>e.serialize())),a(t,"jsDoc",this.getJSDoc().serialize()),a(t,"typeParameters",this.getTypeParameters().map(e=>e.serialize())),a(t,"heritage",this.getHeritage().map(e=>e.serialize())),a(t,"abstract",this.isAbstract()),a(t,"customElement",this.isCustomElement()),a(t,"namespace",this.getNamespace()),a(t,"properties",this.getProperties().map(e=>e.serialize())),a(t,"staticProperties",this.getStaticProperties().map(e=>e.serialize())),a(t,"methods",this.getMethods().map(e=>e.serialize())),a(t,"staticMethods",this.getStaticMethods().map(e=>e.serialize())),t}_getPropertyMembers(t){let e=[];for(let i of t){let{symbol:n}=i,o=n?.getDeclarations()?.[0];if(!o)continue;let s=V.default.isPropertyDeclaration(o);if(!(V.default.isMethodDeclaration(o)||s&&(rt(o.initializer)||it(o.initializer)))&&(s||V.default.isGetAccessor(o)||V.default.isSetAccessor(o))){let l=new Z(o,i,this._context);l.getModifier()===$.public&&e.push(l)}}return e}_getMethodMembers(t){let e=[];for(let i of t){let{symbol:n}=i,o=n?.getDeclarations()?.[0];if(!o)continue;let s=V.default.isPropertyDeclaration(o);if(V.default.isMethodDeclaration(o)||s&&(rt(o.initializer)||it(o.initializer))){let l=new U(o,i,this._context);l.getModifier()===$.public&&e.push(l)}}return e}_getClassNode(){if(V.default.isClassDeclaration(this._node)||V.default.isClassExpression(this._node))return this._node;let e=this._node.declarationList.declarations[0]?.initializer;return!e||!V.default.isClassExpression(e)?null:e}};var Sr={isNode:r=>le(r),create:(r,t)=>[t.registerReflectedNode(r,()=>new ge(r,t))]};var fe=class{constructor(t,e,i){this._node=t,this._value=e,this._context=i,this._jsDoc=new S(t)}getName(){return this._node.name.getText()??""}getValue(){return this._value}getContext(){return this._context}getLine(){return this._context.getLinePosition(this._node)}getTSNode(){return this._node}getJSDoc(){return this._jsDoc}serialize(){let t={name:this.getName(),value:this.getValue()};return a(t,"jsDoc",this.getJSDoc().serialize()),t}};var ye=class{constructor(t,e){this._node=t,this._context=e,this._jsDoc=new S(this._node)}getNodeType(){return _.Declaration}getKind(){return b.Enum}getTSNode(){return this._node}getContext(){return this._context}getName(){return this._node.name.getText()??""}getLine(){return this._context.getLinePosition(this._node)}getNamespace(){return j(this._node)}getJSDoc(){return this._jsDoc}getMembers(){let t=0;return this._node.members.map(e=>{let i=e.initializer?.getText()??"";if(i!==""){let o=parseInt(i);isNaN(o)||(t=o+1,i=o)}else i=t++;let n=()=>new fe(e,i,this._context);return this._context.registerReflectedNode(e,n)})}serialize(){let t={kind:this.getKind(),name:this.getName(),line:this.getLine()};return a(t,"namespace",this.getNamespace()),a(t,"members",this.getMembers().map(e=>e.serialize())),a(t,"jsDoc",this.getJSDoc().serialize()),t}};var kr=h(g(),1),Nr={isNode:r=>kr.default.isEnumDeclaration(r),create:(r,t)=>[t.registerReflectedNode(r,()=>new ye(r,t))]};var br=[gr,Sr,yr,Nr,ur,hr],Pr=[Be,ve,Ve];var C={ImportNode:r=>r.getNodeType()===_.Import,DefaultImportNode:r=>C.ImportNode(r)&&r.getKind()===z.Default,NamedImportNode:r=>C.ImportNode(r)&&r.getKind()===z.Named,NamespaceImportNode:r=>C.ImportNode(r)&&r.getKind()===z.Namespace,SideEffectImportNode:r=>C.ImportNode(r)&&r.getKind()===z.SideEffect,DeclarationNode:r=>r.getNodeType()===_.Declaration,EnumNode:r=>C.DeclarationNode(r)&&r.getKind()===b.Enum,VariableNode:r=>C.DeclarationNode(r)&&r.getKind()===b.Variable,TypeAliasNode:r=>C.DeclarationNode(r)&&r.getKind()===b.TypeAlias,FunctionNode:r=>C.DeclarationNode(r)&&r.getKind()===b.Function,ClassNode:r=>C.DeclarationNode(r)&&r.getKind()===b.Class,InterfaceNode:r=>C.DeclarationNode(r)&&r.getKind()===b.Interface,ArrayTypeNode:r=>r.getKind()===m.Array,ConditionalTypeNode:r=>r.getKind()===m.Conditional,FunctionTypeNode:r=>r.getKind()===m.Function,IndexedAccessTypeNode:r=>r.getKind()===m.IndexAccess,InferTypeNode:r=>r.getKind()===m.Infer,IntersectionTypeNode:r=>r.getKind()===m.Intersection,LiteralTypeNode:r=>r.getKind()===m.ObjectLiteral,MappedTypeNode:r=>r.getKind()===m.Mapped,NamedTupleMemberNode:r=>r.getKind()===m.NamedTupleMember,OptionalTypeNode:r=>r.getKind()===m.Optional,PrimitiveTypeNode:r=>r.getKind()===m.Intrinsic,RestTypeNode:r=>r.getKind()===m.Rest,TemplateLiteralTypeNode:r=>r.getKind()===m.TemplateLiteral,TupleTypeNode:r=>r.getKind()===m.Tuple,TypeLiteralNode:r=>r.getKind()===m.Literal,TypeOperatorNode:r=>r.getKind()===m.Operator,TypePredicateNode:r=>r.getKind()===m.Predicate,TypeQueryNode:r=>r.getKind()===m.Query,TypeReferenceNode:r=>r.getKind()===m.Reference,UnionTypeNode:r=>r.getKind()===m.Union,UnknownTypeNode:r=>r.getKind()===m.Unknown,ExportNode:r=>r.getNodeType()===_.Export,DefaultExportNode:r=>C.ExportNode(r)&&r.getKind()===w.Default,NamedExportNode:r=>C.ExportNode(r)&&r.getKind()===w.Named,EqualExportNode:r=>C.ExportNode(r)&&r.getKind()===w.Equals,NamespaceExportNode:r=>C.ExportNode(r)&&r.getKind()===w.Namespace,ReExportNode:r=>C.ExportNode(r)&&r.getKind()===w.Star};var Le=h(g(),1),gt=class{constructor(t,e){this._declarations=[],this._exports=[],this._imports=[],this._node=t,this._context=e,this._jsDoc=new S(this._node),this._visitNode(t),this._removeNonPublicDeclarations()}getTSNode(){return this._node}getSourcePath(){return this._context.getSystem().normalizePath(this._node.fileName)}getOutputPath(){let t=this._node.fileName,e=this._context.getSystem();if(t.endsWith("js"))return e.normalizePath(t);let i=e.getAbsolutePath(t),n=Le.default.getOutputFileNames(this._context.getCommandLine(),i,!1)[0];return e.normalizePath(n??"")}getContext(){return this._context}getImports(){return this._imports}getExports(){return this._exports}getDeclarations(){return this._declarations}getJSDoc(){return this._jsDoc}getDeclarationByKind(t){return this.getDeclarations().filter(e=>e.getKind()===t)}getDeclarationByName(t){return this.getDeclarations().find(e=>e.getName()===t)??null}getDeclarationsByCategory(t){return this.getDeclarations().filter(e=>e.getJSDoc()?.getTag("category")?.text===t)}serialize(){let t={sourcePath:this.getSourcePath(),outputPath:this.getOutputPath(),imports:this.getImports().map(e=>e.serialize()),declarations:this.getDeclarations().map(e=>e.serialize()),exports:this.getExports().map(e=>e.serialize())};return a(t,"jsDoc",this.getJSDoc().serialize()),t}_visitNode(t){let e=!1;he.isNode(t)&&this._add(he.create(t,this._context));for(let i of br)i.isNode(t)&&(this._add(i.create(t,this._context)),e=!0);for(let i of Pr)i.isNode(t)&&this._add(i.create(t,this._context));e||Le.default.forEachChild(t,i=>this._visitNode(i))}_add(t){for(let e of t)C.ImportNode(e)&&this._imports.push(e),C.DeclarationNode(e)&&!this._hasDeclaration(e)&&this._declarations.push(e),C.ExportNode(e)&&!this._hasExport(e)&&this._exports.push(e)}_hasDeclaration(t){return this._declarations.some(e=>e.getName()===t.getName())}_hasExport(t){return C.ReExportNode(t)?this._exports.some(e=>C.ReExportNode(e)&&e.getModule()===t.getModule()):this._exports.some(e=>e.getName()===t.getName()&&e.getKind()===t.getKind())}_removeNonPublicDeclarations(){this._declarations=this._declarations.filter(t=>{let e=this._exports.findIndex(n=>n.getOriginalName()===t.getName()),i=!!t.getJSDoc()?.isIgnored();return e===-1?!1:(i&&this._exports.splice(e,1),!i)})}};var ft=h(g(),1),_e=class r{constructor(t,e,i,n,o={}){this._fileNames=new Set,this._modules=[],this._options={},this._system=t,this._compilerHost=e,this._program=i,this._commandLine=n,this._options=o,this._diagnostics=new bt(t.getCurrentDirectory()),this._packageJson=this._getPackageJSON(),this._context=new Dt(t,()=>this._program,()=>this._commandLine,this._diagnostics,o);let s=ft.default.getConfigFileParsingDiagnostics(n);this._diagnostics.addManyDiagnostics(s),this._diagnostics.addManyDiagnostics(i.getSyntacticDiagnostics()),this._diagnostics.addManyDiagnostics(i.getSemanticDiagnostics());for(let c of i.getRootFileNames()){let l=i.getSourceFile(c);if(!l){this._diagnostics.addArgumentError(`Unable to analyse file "${c}".`);continue}this._fileNames.add(c),this._modules.push(new gt(l,this._context))}}static fromTSConfig(t,e={}){let i=yt(t,e),n=new ot(t,i.options),o=ft.default.createProgram({rootNames:i.fileNames,options:i.options,host:n,projectReferences:i.projectReferences??[]});return new r(t,n,o,i,e)}static fromFiles(t,e,i={}){let n=yt(t,i),o=new ot(t,n.options),s=ft.default.createProgram({rootNames:e.map(c=>t.getAbsolutePath(c)),options:n.options,host:o,projectReferences:n.projectReferences??[]});return new r(t,o,s,n,i)}static fromSource(t,e,i={}){let n="unknown.ts";t.writeFile(n,e);let o=yt(t,i),s=new ot(t,o.options),c=ft.default.createProgram({rootNames:[t.getAbsolutePath(n)],options:o.options,host:s,projectReferences:o.projectReferences??[]});return new r(t,s,c,o,i)}getSystem(){return this._system}getProgram(){return this._program}getTypeChecker(){return this._program.getTypeChecker()}getOptions(){return this._options}getDiagnostics(){return this._diagnostics}getModules(){return this._modules}has(t){let e=this._context.getSystem().normalizePath(t);return this._modules.some(i=>i.getSourcePath()===e)}add(t,e){let i=this._system.normalizePath(t),n=this._system.getAbsolutePath(t);if(this._modules.find(l=>l.getSourcePath()===i))throw new Error("File already exist");let s=this._upsertFile(n,e),c=new gt(s,this._context);return this._modules.push(c),c}update(t,e){let i=this._system.normalizePath(t),n=this._system.getAbsolutePath(i),o=this._modules.findIndex(l=>l.getSourcePath()===i);if(o<0)throw new Error("The file doesn't exist");let s=this._upsertFile(n,e),c=new gt(s,this._context);return this._modules.splice(o,1,c),c}getName(){return this._packageJson?.name??""}serialize(){return this._modules.map(t=>t.serialize())}_getPackageJSON(){let t=this._options.tsConfigFilePath?this._system.getDirectoryName(this._options.tsConfigFilePath):this._system.getCurrentDirectory(),e=this._system.join(t,"package.json"),i=this._system.fileExists(e)?this._system.readFile(e):null;try{return i!=null?JSON.parse(i):null}catch{return null}}_upsertFile(t,e){return this._system.writeFile(t,e),this._fileNames.has(t)||(this._commandLine=yt(this._system,this._options),this._fileNames.add(t)),this._program=ft.default.createProgram({rootNames:[...this._fileNames],options:this._program.getCompilerOptions(),host:this._compilerHost,oldProgram:this._program,projectReferences:this._program.getProjectReferences()??[]}),this._program.getSourceFile(t)}};async function ym(r,t={}){if(!r)return{project:null,errors:[{messageText:"Source code is empty."}]};let e;t.system?e=t.system:e=await(await import("./in-memory-system-PBHOYKE5.js")).InMemorySystem.create();let i=_e.fromSource(e,r,t),n=i.getDiagnostics();return{project:i,errors:n.getAll(),formattedDiagnostics:n.formatDiagnostics()}}export{ym as a};
